"use strict";(self.webpackChunkflowise_ui=self.webpackChunkflowise_ui||[]).push([[5601],{74404:(e,t,a)=>{a.d(t,{Z:()=>n});var o=a(23917);const n={getAllTools:()=>o.Z.get("/tools"),getSpecificTool:e=>o.Z.get("/tools/".concat(e)),createNewTool:e=>o.Z.post("/tools",e),updateTool:(e,t)=>o.Z.put("/tools/".concat(e),t),deleteTool:e=>o.Z.delete("/tools/".concat(e))}},97251:(e,t,a)=>{a.d(t,{H:()=>c});var o=a(46705),n=a(6779),s=a(91243),i=a(12011),r=a(69405),l=a(37574);const c=e=>{let{title:t,style:a}=e;const c=(0,r.v9)((e=>e.customization));return(0,l.jsx)(n.Z,{title:(0,i.ZP)(t),placement:"right",children:(0,l.jsx)(s.Z,{sx:{height:15,width:15},children:(0,l.jsx)(o.Z,{style:{...a,background:"transparent",color:c.isDarkMode?"white":"inherit",height:15,width:15}})})})}},53024:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var o=a(30969),n=a(13026),s=a(69405),i=a(38361),r=a(25139),l=a(73447),c=a(8288),d=a(26754),h=a(78744),p=a(94702),u=a(49009),m=a(55705),x=a(24326),g=a(11021),f=a(55303),y=a(668),j=a(23917);const T=()=>j.Z.get("/marketplaces/chatflows"),w=()=>j.Z.get("/marketplaces/tools");var Z=a(60990),v=a(37574);function b(e){const{children:t,value:a,index:o,...n}=e;return(0,v.jsx)("div",{role:"tabpanel",hidden:a!==o,id:"attachment-tabpanel-".concat(o),"aria-labelledby":"attachment-tab-".concat(o),...n,children:a===o&&(0,v.jsx)(i.Z,{sx:{p:1},children:t})})}const k=()=>{const e=(0,n.s0)(),t=(0,p.Z)(),a=(0,s.v9)((e=>e.customization)),[j,k]=(0,o.useState)(!0),[C,E]=(0,o.useState)(!0),[S,D]=(0,o.useState)({}),P=["Chatflows","Tools"],[M,N]=(0,o.useState)(0),[L,A]=(0,o.useState)(!1),[I,R]=(0,o.useState)({}),O=(0,Z.Z)(T),F=(0,Z.Z)(w),U=e=>{const t={title:e.templateName,type:"TEMPLATE",data:e};R(t),A(!0)},B=t=>{e("/marketplace/".concat(t.id),{state:t})};return(0,o.useEffect)((()=>{O.request(),F.request()}),[]),(0,o.useEffect)((()=>{k(O.loading)}),[O.loading]),(0,o.useEffect)((()=>{E(F.loading)}),[F.loading]),(0,o.useEffect)((()=>{if(O.data)try{const e=O.data,t={};for(let a=0;a<e.length;a+=1){const o=e[a].flowData,n=JSON.parse(o).nodes||[];t[e[a].id]=[];for(let s=0;s<n.length;s+=1){const o="".concat(g.v2,"/api/v1/node-icon/").concat(n[s].data.name);t[e[a].id].includes(o)||t[e[a].id].push(o)}}D(t)}catch(e){console.error(e)}}),[O.data]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(m.Z,{sx:{background:a.isDarkMode?t.palette.common.black:""},children:[(0,v.jsx)(r.Z,{flexDirection:"row",children:(0,v.jsx)("h1",{children:"Marketplace"})}),(0,v.jsx)(l.Z,{sx:{mb:2},variant:"fullWidth",value:M,onChange:(e,t)=>{N(t)},"aria-label":"tabs",children:P.map(((e,t)=>(0,v.jsx)(c.Z,{icon:0===t?(0,v.jsx)(u.Mv4,{}):(0,v.jsx)(u.cKW,{}),iconPosition:"start",label:(0,v.jsx)("span",{style:{fontSize:"1.1rem"},children:e})},t)))}),P.map(((e,t)=>(0,v.jsxs)(b,{value:M,index:t,children:["Chatflows"===e&&(0,v.jsx)(d.ZP,{container:!0,spacing:g.dv,children:!j&&O.data&&O.data.map(((e,t)=>(0,v.jsxs)(d.ZP,{item:!0,lg:3,md:4,sm:6,xs:12,children:[e.badge&&(0,v.jsx)(h.Z,{sx:{"& .MuiBadge-badge":{right:20}},badgeContent:e.badge,color:"POPULAR"===e.badge?"primary":"error",children:(0,v.jsx)(x.Z,{onClick:()=>B(e),data:e,images:S[e.id]})}),!e.badge&&(0,v.jsx)(x.Z,{onClick:()=>B(e),data:e,images:S[e.id]})]},t)))}),"Tools"===e&&(0,v.jsx)(d.ZP,{container:!0,spacing:g.dv,children:!C&&F.data&&F.data.map(((e,t)=>(0,v.jsxs)(d.ZP,{item:!0,lg:3,md:4,sm:6,xs:12,children:[e.badge&&(0,v.jsx)(h.Z,{sx:{"& .MuiBadge-badge":{right:20}},badgeContent:e.badge,color:"POPULAR"===e.badge?"primary":"error",children:(0,v.jsx)(x.Z,{data:e,onClick:()=>U(e)})}),!e.badge&&(0,v.jsx)(x.Z,{data:e,onClick:()=>U(e)})]},t)))})]},t))),(!j&&(!O.data||0===O.data.length)||!C&&(!F.data||0===F.data.length))&&(0,v.jsxs)(r.Z,{sx:{alignItems:"center",justifyContent:"center"},flexDirection:"column",children:[(0,v.jsx)(i.Z,{sx:{p:2,height:"auto"},children:(0,v.jsx)("img",{style:{objectFit:"cover",height:"30vh",width:"auto"},src:f.Z,alt:"WorkflowEmptySVG"})}),(0,v.jsx)("div",{children:"No Marketplace Yet"})]})]}),(0,v.jsx)(y.Z,{show:L,dialogProps:I,onCancel:()=>A(!1),onConfirm:()=>A(!1),onUseTemplate:e=>(R({title:"Add New Tool",type:"IMPORT",cancelButtonName:"Cancel",confirmButtonName:"Add",data:e}),void A(!0))})]})}},668:(e,t,a)=>{a.d(t,{Z:()=>A});var o=a(15749),n=a(30969),s=a(69405),i=a(2383),r=a(50576),l=a(46138),c=a(48886),d=a(38357),h=a(87130),p=a(38361),u=a(25139),m=a(47915),x=a(33656),g=a(91862),f=a(52312),y=a(40894),j=a(49009),T=a(37574);const w=e=>{let{columns:t,rows:a,style:o,disabled:n=!1,onRowUpdate:s,addNewRow:i}=e;return(0,T.jsxs)(T.Fragment,{children:[!n&&(0,T.jsx)(l.Z,{variant:"outlined",onClick:i,startIcon:(0,T.jsx)(j.SC9,{}),children:"Add Item"}),a&&t&&(0,T.jsx)("div",{style:{marginTop:10,height:300,width:"100%",...o},children:(0,T.jsx)(y._$,{processRowUpdate:e=>(s(e),e),isCellEditable:()=>!n,onProcessRowUpdateError:e=>console.error(e),rows:a,columns:t})})]})};var Z=a(97251),v=a(44850),b=a(10814),k=a(48349),C=a(84956),E=a(94677),S=a(94702),D=a(74404),P=a(60806),M=a(60990),N=a(33926),L=a(86115);const A=e=>{let{show:t,dialogProps:a,onUseTemplate:y,onCancel:A,onConfirm:I}=e;const R=document.getElementById("portal"),O=(0,S.Z)(),F=(0,s.v9)((e=>e.customization)),U=(0,s.I0)();(0,N.Z)();const{confirm:B}=(0,P.Z)(),W=function(){return U((0,i.yv)(...arguments))},q=function(){return U((0,i.sy)(...arguments))},z=(0,M.Z)(D.Z.getSpecificTool),[H,G]=(0,n.useState)(""),[J,_]=(0,n.useState)(""),[Y,V]=(0,n.useState)(""),[$,K]=(0,n.useState)(""),[Q,X]=(0,n.useState)([]),[ee,te]=(0,n.useState)(""),ae=(0,n.useCallback)((e=>()=>{setTimeout((()=>{X((t=>t.filter((t=>t.id!==e))))}))}),[]),oe=(0,n.useMemo)((()=>[{field:"property",headerName:"Property",editable:!0,flex:1},{field:"type",headerName:"Type",type:"singleSelect",valueOptions:["string","number","boolean","date"],editable:!0,width:120},{field:"description",headerName:"Description",editable:!0,flex:1},{field:"required",headerName:"Required",type:"boolean",editable:!0,width:80},{field:"actions",type:"actions",width:80,getActions:e=>[(0,T.jsx)(v.u,{icon:(0,T.jsx)(b.Z,{}),label:"Delete",onClick:ae(e.id)},"Delete")]}]),[ae]);(0,n.useEffect)((()=>(U(t?{type:i.tS}:{type:i.Go}),()=>U({type:i.Go}))),[t,U]),(0,n.useEffect)((()=>{z.data&&(G(z.data.id),_(z.data.name),V(z.data.description),X((0,L.RO)(z.data.schema)),z.data.func?te(z.data.func):te(""))}),[z.data]),(0,n.useEffect)((()=>{"EDIT"===a.type&&a.data?(G(a.data.id),_(a.data.name),V(a.data.description),K(a.data.iconSrc),X((0,L.RO)(a.data.schema)),a.data.func?te(a.data.func):te("")):"EDIT"===a.type&&a.toolId?z.request(a.toolId):"IMPORT"===a.type&&a.data||"TEMPLATE"===a.type&&a.data?(_(a.data.name),V(a.data.description),K(a.data.iconSrc),X((0,L.RO)(a.data.schema)),a.data.func?te(a.data.func):te("")):"ADD"===a.type&&(G(""),_(""),V(""),K(""),X([]),te(""))}),[a]);const ne=t?(0,T.jsxs)(c.Z,{fullWidth:!0,maxWidth:"md",open:t,onClose:A,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,T.jsx)(d.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:(0,T.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[a.title,(0,T.jsx)("div",{style:{flex:1}}),"EDIT"===a.type&&(0,T.jsx)(l.Z,{variant:"outlined",onClick:()=>(async()=>{try{const e=await D.Z.getSpecificTool(H);if(e.data){const t=e.data;delete t.id,delete t.createdDate,delete t.updatedDate;let a=JSON.stringify(t,null,2),o="data:application/json;charset=utf-8,"+encodeURIComponent(a),n="".concat(J,"-CustomTool.json"),s=document.createElement("a");s.setAttribute("href",o),s.setAttribute("download",n),s.click()}}catch(e){const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);W({message:"Failed to export Tool: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,T.jsx)(l.Z,{style:{color:"white"},onClick:()=>q(e),children:(0,T.jsx)(j.kLi,{})})}}),A()}})(),startIcon:(0,T.jsx)(j.D57,{}),children:"Export"})]})}),(0,T.jsxs)(h.Z,{children:[(0,T.jsxs)(p.Z,{sx:{p:2},children:[(0,T.jsx)(u.Z,{sx:{position:"relative"},direction:"row",children:(0,T.jsxs)(m.Z,{variant:"overline",children:["Tool Name",(0,T.jsx)("span",{style:{color:"red"},children:"\xa0*"}),(0,T.jsx)(Z.H,{style:{marginLeft:10},title:"Tool name must be small capital letter with underscore. Ex: my_tool"})]})}),(0,T.jsx)(x.Z,{id:"toolName",type:"string",fullWidth:!0,disabled:"TEMPLATE"===a.type,placeholder:"My New Tool",value:J,name:"toolName",onChange:e=>_(e.target.value)})]}),(0,T.jsxs)(p.Z,{sx:{p:2},children:[(0,T.jsx)(u.Z,{sx:{position:"relative"},direction:"row",children:(0,T.jsxs)(m.Z,{variant:"overline",children:["Tool description",(0,T.jsx)("span",{style:{color:"red"},children:"\xa0*"}),(0,T.jsx)(Z.H,{style:{marginLeft:10},title:"Description of what the tool does. This is for ChatGPT to determine when to use this tool."})]})}),(0,T.jsx)(x.Z,{id:"toolDesc",type:"string",fullWidth:!0,disabled:"TEMPLATE"===a.type,placeholder:"Description of what the tool does. This is for ChatGPT to determine when to use this tool.",multiline:!0,rows:3,value:Y,name:"toolDesc",onChange:e=>V(e.target.value)})]}),(0,T.jsxs)(p.Z,{sx:{p:2},children:[(0,T.jsx)(u.Z,{sx:{position:"relative"},direction:"row",children:(0,T.jsx)(m.Z,{variant:"overline",children:"Tool Icon Src"})}),(0,T.jsx)(x.Z,{id:"toolIcon",type:"string",fullWidth:!0,disabled:"TEMPLATE"===a.type,placeholder:"https://raw.githubusercontent.com/gilbarbara/logos/main/logos/airtable.svg",value:$,name:"toolIcon",onChange:e=>K(e.target.value)})]}),(0,T.jsxs)(p.Z,{sx:{p:2},children:[(0,T.jsx)(u.Z,{sx:{position:"relative"},direction:"row",children:(0,T.jsxs)(m.Z,{variant:"overline",children:["Output Schema",(0,T.jsx)(Z.H,{style:{marginLeft:10},title:"What should be the output response in JSON format?"})]})}),(0,T.jsx)(w,{columns:oe,rows:Q,disabled:"TEMPLATE"===a.type,addNewRow:()=>{setTimeout((()=>{X((e=>{let t=[...(0,r.cloneDeep)(e)];const a=t.length?t[t.length-1].id+1:1;return t.push({id:a,property:"",description:"",type:"",required:!1}),t}))}))},onRowUpdate:e=>{setTimeout((()=>{X((t=>{let a=[...(0,r.cloneDeep)(t)];const o=a.findIndex((t=>t.id===e.id));return o>=0&&(a[o]={...e}),a}))}))}})]}),(0,T.jsxs)(p.Z,{sx:{p:2},children:[(0,T.jsx)(u.Z,{sx:{position:"relative"},direction:"row",children:(0,T.jsxs)(m.Z,{variant:"overline",children:["Javascript Function",(0,T.jsx)(Z.H,{style:{marginLeft:10},title:'Function to execute when tool is being used. You can use properties specified in Output Schema as variables. For example, if the property is <code>userid</code>, you can use as <code>$userid</code>. Return value must be a string. You can also override the code from API by following this <a target="_blank" href="https://docs.flowiseai.com/tools/custom-tool#override-function-from-api">guide</a>'})]})}),"TEMPLATE"!==a.type&&(0,T.jsx)(l.Z,{style:{marginBottom:10},variant:"outlined",onClick:()=>te("/*\n* You can use any libraries imported in Flowise\n* You can use properties specified in Output Schema as variables. Ex: Property = userid, Variable = $userid\n* Must return a string value at the end of function\n*/\n\nconst fetch = require('node-fetch');\nconst url = 'https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&current_weather=true';\nconst options = {\n    method: 'GET',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n};\ntry {\n    const response = await fetch(url, options);\n    const text = await response.text();\n    return text;\n} catch (error) {\n    console.error(error);\n    return '';\n}"),children:"See Example"}),F.isDarkMode?(0,T.jsx)(C.x,{value:ee,disabled:"TEMPLATE"===a.type,onValueChange:e=>te(e),style:{fontSize:"0.875rem",minHeight:"calc(100vh - 220px)",width:"100%",borderRadius:5}}):(0,T.jsx)(E.d,{value:ee,disabled:"TEMPLATE"===a.type,onValueChange:e=>te(e),style:{fontSize:"0.875rem",minHeight:"calc(100vh - 220px)",width:"100%",border:"1px solid ".concat(O.palette.grey[300]),borderRadius:5}})]})]}),(0,T.jsxs)(g.Z,{children:["EDIT"===a.type&&(0,T.jsx)(f.S,{color:"error",variant:"contained",onClick:()=>(async()=>{const e={title:"Delete Tool",description:"Delete tool ".concat(J,"?"),confirmButtonName:"Delete",cancelButtonName:"Cancel"};if(await B(e))try{(await D.Z.deleteTool(H)).data&&(W({message:"Tool deleted",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,T.jsx)(l.Z,{style:{color:"white"},onClick:()=>q(e),children:(0,T.jsx)(j.kLi,{})})}}),I())}catch(t){const e=t.response.data||"".concat(t.response.status,": ").concat(t.response.statusText);W({message:"Failed to delete Tool: ".concat(e),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,T.jsx)(l.Z,{style:{color:"white"},onClick:()=>q(e),children:(0,T.jsx)(j.kLi,{})})}}),A()}})(),children:"Delete"}),"TEMPLATE"===a.type&&(0,T.jsx)(f.S,{color:"secondary",variant:"contained",onClick:()=>{y(a.data)},children:"Use Template"}),"TEMPLATE"!==a.type&&(0,T.jsx)(f.S,{disabled:!(J&&Y),variant:"contained",onClick:()=>"ADD"===a.type||"IMPORT"===a.type?(async()=>{try{const e={name:J,description:Y,color:(0,L.xl)(),schema:JSON.stringify(Q),func:ee,iconSrc:$},t=await D.Z.createNewTool(e);t.data&&(W({message:"New Tool added",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,T.jsx)(l.Z,{style:{color:"white"},onClick:()=>q(e),children:(0,T.jsx)(j.kLi,{})})}}),I(t.data.id))}catch(e){const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);W({message:"Failed to add new Tool: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,T.jsx)(l.Z,{style:{color:"white"},onClick:()=>q(e),children:(0,T.jsx)(j.kLi,{})})}}),A()}})():(async()=>{try{const e=await D.Z.updateTool(H,{name:J,description:Y,schema:JSON.stringify(Q),func:ee,iconSrc:$});e.data&&(W({message:"Tool saved",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,T.jsx)(l.Z,{style:{color:"white"},onClick:()=>q(e),children:(0,T.jsx)(j.kLi,{})})}}),I(e.data.id))}catch(e){console.error(e);const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);W({message:"Failed to save Tool: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,T.jsx)(l.Z,{style:{color:"white"},onClick:()=>q(e),children:(0,T.jsx)(j.kLi,{})})}}),A()}})(),children:a.confirmButtonName})]}),(0,T.jsx)(k.Z,{})]}):null;return(0,o.createPortal)(ne,R)}}}]);
//# sourceMappingURL=5601.77417584.chunk.js.map