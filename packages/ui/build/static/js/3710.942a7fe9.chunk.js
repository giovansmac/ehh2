"use strict";(self.webpackChunkflowise_ui=self.webpackChunkflowise_ui||[]).push([[3710],{42016:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(23917);const i={getAllAPIKeys:()=>a.Z.get("/apikey"),createNewAPI:e=>a.Z.post("/apikey",e),updateAPI:(e,t)=>a.Z.put("/apikey/".concat(e),t),deleteAPI:e=>a.Z.delete("/apikey/".concat(e))}},60990:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(30969);const i=e=>{const[t,n]=(0,a.useState)(null),[i,o]=(0,a.useState)(null),[s,r]=(0,a.useState)(!1);return{data:t,error:i,loading:s,request:async function(){r(!0);try{const t=await e(...arguments);n(t.data)}catch(t){o(t||"Unexpected Error!")}finally{r(!1)}}}}},60806:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(30969),i=n(30864),o=n(2383);let s;const r=()=>{const[e,t]=(0,a.useContext)(i.Z),n=()=>{t({type:o.bA})};return{confirm:e=>(t({type:o.gN,payload:e}),new Promise((e=>{s=e}))),onConfirm:()=>{n(),s(!0)},onCancel:()=>{n(),s(!1)},confirmState:e}}},52312:(e,t,n)=>{n.d(t,{S:()=>s});var a=n(45971),i=n(46138),o=n(17897);const s=(0,a.ZP)(i.Z)((e=>{let{theme:t,color:n="primary"}=e;return{color:"white",backgroundColor:t.palette[n].main,"&:hover":{backgroundColor:t.palette[n].main,backgroundImage:"linear-gradient(rgb(0 0 0/10%) 0 0)"}}}));(0,a.ZP)(o.Z)((e=>{let{theme:t,color:n="primary"}=e;return{"&.Mui-selected, &.Mui-selected:hover":{color:"white",backgroundColor:t.palette[n].main}}}))},48349:(e,t,n)=>{n.d(t,{Z:()=>x});var a=n(15749),i=n(48886),o=n(38357),s=n(87130),r=n(91862),l=n(46138),c=n(60806),d=n(52312),h=n(37574);const x=()=>{const{onConfirm:e,onCancel:t,confirmState:n}=(0,c.Z)(),x=document.getElementById("portal"),p=n.show?(0,h.jsxs)(i.Z,{fullWidth:!0,maxWidth:"xs",open:n.show,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,h.jsx)(o.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:n.title}),(0,h.jsx)(s.Z,{children:(0,h.jsx)("span",{children:n.description})}),(0,h.jsxs)(r.Z,{children:[(0,h.jsx)(l.Z,{onClick:t,children:n.cancelButtonName}),(0,h.jsx)(d.S,{variant:"contained",onClick:e,children:n.confirmButtonName})]})]}):null;return(0,a.createPortal)(p,x)}},33926:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(30969),i=n(69405),o=n(47379),s=n(2383);let r=[];const l=()=>{const e=(0,i.I0)(),t=(0,i.v9)((e=>e.notifier)),{notifications:n}=t,{enqueueSnackbar:l,closeSnackbar:c}=(0,o.Ds)();a.useEffect((()=>{n.forEach((t=>{let{key:n,message:a,options:i={},dismissed:o=!1}=t;var d;o?c(n):r.includes(n)||(l(a,{key:n,...i,onClose:(e,t,n)=>{i.onClose&&i.onClose(e,t,n)},onExited:(t,n)=>{var a;e((0,s.PN)(n)),a=n,r=[...r.filter((e=>a!==e))]}}),d=n,r=[...r,d])}))}),[n,c,l,e])}},3710:(e,t,n)=>{n.r(t),n.d(t,{default:()=>J});var a=n(30969),i=n(69405),o=n(2383),s=n(92472),r=n(91243),l=n(35531),c=n(47915),d=n(97192),h=n(38361),x=n(7836),p=n(10741),u=n(85481),y=n(48598),m=n(46138),j=n(25139),Z=n(34777),g=n(98483),k=n(11100),f=n(27265),w=n(82309),C=n(56349),b=n(61758),v=n(82848),K=n(45971),A=n(94702),I=n(55705),P=n(52312),D=n(15749),N=n(48886),S=n(38357),E=n(87130),T=n(33656),B=n(91862),M=n(49009),F=n(42016),z=n(33926),L=n(37574);const O=e=>{let{show:t,dialogProps:n,onCancel:s,onConfirm:d}=e;const x=document.getElementById("portal"),p=(0,A.Z)(),u=(0,i.I0)();(0,z.Z)();const y=function(){return u((0,o.yv)(...arguments))},Z=function(){return u((0,o.sy)(...arguments))},[g,k]=(0,a.useState)(""),[f,w]=(0,a.useState)(null),C=Boolean(f);(0,a.useEffect)((()=>{"EDIT"===n.type&&n.key?k(n.key.keyName):"ADD"===n.type&&k("")}),[n]);const b=()=>{w(null)},v=t?(0,L.jsxs)(N.Z,{fullWidth:!0,maxWidth:"sm",open:t,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,L.jsx)(S.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:n.title}),(0,L.jsxs)(E.Z,{children:["EDIT"===n.type&&(0,L.jsxs)(h.Z,{sx:{p:2},children:[(0,L.jsx)(c.Z,{variant:"overline",children:"API Key"}),(0,L.jsxs)(j.Z,{direction:"row",sx:{mb:1},children:[(0,L.jsx)(c.Z,{sx:{p:1,borderRadius:10,backgroundColor:p.palette.primary.light,width:"max-content",height:"max-content"},variant:"h5",children:n.key.apiKey}),(0,L.jsx)(r.Z,{title:"Copy API Key",color:"success",onClick:e=>{navigator.clipboard.writeText(n.key.apiKey),w(e.currentTarget),setTimeout((()=>{b()}),1500)},children:(0,L.jsx)(M.vUr,{})}),(0,L.jsx)(l.ZP,{open:C,anchorEl:f,onClose:b,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,L.jsx)(c.Z,{variant:"h6",sx:{pl:1,pr:1,color:"white",background:p.palette.success.dark},children:"Copied!"})})]})]}),(0,L.jsxs)(h.Z,{sx:{p:2},children:[(0,L.jsx)(j.Z,{sx:{position:"relative"},direction:"row",children:(0,L.jsx)(c.Z,{variant:"overline",children:"Key Name"})}),(0,L.jsx)(T.Z,{id:"keyName",type:"string",fullWidth:!0,placeholder:"My New Key",value:g,name:"keyName",onChange:e=>k(e.target.value)})]})]}),(0,L.jsx)(B.Z,{children:(0,L.jsx)(P.S,{variant:"contained",onClick:()=>"ADD"===n.type?(async()=>{try{(await F.Z.createNewAPI({keyName:g})).data&&(y({message:"New API key added",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,L.jsx)(m.Z,{style:{color:"white"},onClick:()=>Z(e),children:(0,L.jsx)(M.kLi,{})})}}),d())}catch(e){const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);y({message:"Failed to add new API key: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,L.jsx)(m.Z,{style:{color:"white"},onClick:()=>Z(e),children:(0,L.jsx)(M.kLi,{})})}}),s()}})():(async()=>{try{(await F.Z.updateAPI(n.key.id,{keyName:g})).data&&(y({message:"API Key saved",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,L.jsx)(m.Z,{style:{color:"white"},onClick:()=>Z(e),children:(0,L.jsx)(M.kLi,{})})}}),d())}catch(e){const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);y({message:"Failed to save API key: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,L.jsx)(m.Z,{style:{color:"white"},onClick:()=>Z(e),children:(0,L.jsx)(M.kLi,{})})}}),s()}})(),children:n.confirmButtonName})})]}):null;return(0,D.createPortal)(v,x)};var W=n(48349),R=n(60990),q=n(60806);const G=n.p+"static/media/api_empty.6032fc7f3d6f6a5082bec0505aaf8ecb.svg";var U=n(92426),Y=n.n(U);const _=(0,K.ZP)(b.Z)((e=>{let{theme:t}=e;return{["&.".concat(v.Z.head)]:{backgroundColor:t.palette.action.hover}}})),H=(0,K.ZP)(s.Z)((()=>({"&:last-child td, &:last-child th":{border:0}})));function V(e){const[t,n]=(0,a.useState)(!1);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(s.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,L.jsx)(b.Z,{scope:"row",children:e.apiKey.keyName}),(0,L.jsxs)(b.Z,{children:[e.showApiKeys.includes(e.apiKey.apiKey)?e.apiKey.apiKey:"".concat(e.apiKey.apiKey.substring(0,2)).concat("\u2022".repeat(18)).concat(e.apiKey.apiKey.substring(e.apiKey.apiKey.length-5)),(0,L.jsx)(r.Z,{title:"Copy",color:"success",onClick:e.onCopyClick,children:(0,L.jsx)(M.vUr,{})}),(0,L.jsx)(r.Z,{title:"Show",color:"inherit",onClick:e.onShowAPIClick,children:e.showApiKeys.includes(e.apiKey.apiKey)?(0,L.jsx)(M.Jib,{}):(0,L.jsx)(M.tCy,{})}),(0,L.jsx)(l.ZP,{open:e.open,anchorEl:e.anchorEl,onClose:e.onClose,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,L.jsx)(c.Z,{variant:"h6",sx:{pl:1,pr:1,color:"white",background:e.theme.palette.success.dark},children:"Copied!"})})]}),(0,L.jsxs)(b.Z,{children:[e.apiKey.chatFlows.length," ",e.apiKey.chatFlows.length>0&&(0,L.jsx)(r.Z,{"aria-label":"expand row",size:"small",color:"inherit",onClick:()=>n(!t),children:e.apiKey.chatFlows.length>0&&t?(0,L.jsx)(M.DW6,{}):(0,L.jsx)(M.Hch,{})})]}),(0,L.jsx)(b.Z,{children:e.apiKey.createdAt}),(0,L.jsx)(b.Z,{children:(0,L.jsx)(r.Z,{title:"Edit",color:"primary",onClick:e.onEditClick,children:(0,L.jsx)(M.yl5,{})})}),(0,L.jsx)(b.Z,{children:(0,L.jsx)(r.Z,{title:"Delete",color:"error",onClick:e.onDeleteClick,children:(0,L.jsx)(M.IT9,{})})})]}),t&&(0,L.jsx)(s.Z,{sx:{"& td":{border:0}},children:(0,L.jsx)(b.Z,{sx:{pb:0,pt:0},colSpan:6,children:(0,L.jsx)(d.Z,{in:t,timeout:"auto",unmountOnExit:!0,children:(0,L.jsx)(h.Z,{sx:{mt:1,mb:2,borderRadius:"15px",border:"1px solid"},children:(0,L.jsxs)(x.Z,{"aria-label":"chatflow table",children:[(0,L.jsx)(p.Z,{children:(0,L.jsxs)(s.Z,{children:[(0,L.jsx)(_,{sx:{width:"30%",borderTopLeftRadius:"15px"},children:"Chatflow Name"}),(0,L.jsx)(_,{sx:{width:"20%"},children:"Modified On"}),(0,L.jsx)(_,{sx:{width:"50%",borderTopRightRadius:"15px"},children:"Category"})]})}),(0,L.jsx)(u.Z,{children:e.apiKey.chatFlows.map(((e,t)=>(0,L.jsxs)(H,{children:[(0,L.jsx)(b.Z,{children:e.flowName}),(0,L.jsx)(b.Z,{children:Y()(e.updatedDate).format("DD-MMM-YY")}),(0,L.jsxs)(b.Z,{children:["\xa0",e.category&&e.category.split(";").map(((e,t)=>(0,L.jsx)(y.Z,{label:e,style:{marginRight:5,marginBottom:5}},t)))]})]},t)))})]})})})})})]})}const J=()=>{const e=(0,A.Z)(),t=(0,i.v9)((e=>e.customization)),n=(0,i.I0)();(0,z.Z)();const r=function(){return n((0,o.yv)(...arguments))},l=function(){return n((0,o.sy)(...arguments))},[c,d]=(0,a.useState)(!1),[y,v]=(0,a.useState)({}),[K,D]=(0,a.useState)([]),[N,S]=(0,a.useState)(null),[E,T]=(0,a.useState)([]),B=Boolean(N),[U,Y]=(0,a.useState)("");const{confirm:_}=(0,q.Z)(),H=(0,R.Z)(F.Z.getAllAPIKeys),J=()=>{S(null)},Q=()=>{d(!1),H.request()};return(0,a.useEffect)((()=>{H.request()}),[]),(0,a.useEffect)((()=>{H.data&&D(H.data)}),[H.data]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(I.Z,{sx:{background:t.isDarkMode?e.palette.common.black:""},children:[(0,L.jsx)(j.Z,{flexDirection:"row",children:(0,L.jsx)(h.Z,{sx:{flexGrow:1},children:(0,L.jsxs)(Z.Z,{disableGutters:!0,style:{margin:1,padding:1,paddingBottom:10,display:"flex",justifyContent:"space-between",width:"100%"},children:[(0,L.jsx)("h1",{children:"API Keys\xa0"}),(0,L.jsx)(g.Z,{size:"small",sx:{display:{xs:"none",sm:"block"},ml:3},variant:"outlined",placeholder:"Search key name",onChange:e=>{Y(e.target.value)},InputProps:{startAdornment:(0,L.jsx)(k.Z,{position:"start",children:(0,L.jsx)(M.jVj,{})})}}),(0,L.jsx)(h.Z,{sx:{flexGrow:1}}),(0,L.jsx)(f.Z,{sx:{maxHeight:40},disableElevation:!0,variant:"contained","aria-label":"outlined primary button group",children:(0,L.jsx)(f.Z,{disableElevation:!0,"aria-label":"outlined primary button group",children:(0,L.jsx)(P.S,{variant:"contained",sx:{color:"white",mr:1,height:37},onClick:()=>{v({title:"Add New API Key",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add"}),d(!0)},startIcon:(0,L.jsx)(M.SC9,{}),children:"Create Key"})})})]})})}),K.length<=0&&(0,L.jsxs)(j.Z,{sx:{alignItems:"center",justifyContent:"center"},flexDirection:"column",children:[(0,L.jsx)(h.Z,{sx:{p:2,height:"auto"},children:(0,L.jsx)("img",{style:{objectFit:"cover",height:"30vh",width:"auto"},src:G,alt:"APIEmptySVG"})}),(0,L.jsx)("div",{children:"No API Keys Yet"})]}),K.length>0&&(0,L.jsx)(w.Z,{component:C.Z,children:(0,L.jsxs)(x.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,L.jsx)(p.Z,{children:(0,L.jsxs)(s.Z,{children:[(0,L.jsx)(b.Z,{children:"Key Name"}),(0,L.jsx)(b.Z,{children:"API Key"}),(0,L.jsx)(b.Z,{children:"Usage"}),(0,L.jsx)(b.Z,{children:"Created"}),(0,L.jsx)(b.Z,{children:" "}),(0,L.jsx)(b.Z,{children:" "})]})}),(0,L.jsx)(u.Z,{children:K.filter((function(e){return e.keyName.toLowerCase().indexOf(U.toLowerCase())>-1})).map(((t,n)=>(0,L.jsx)(V,{apiKey:t,showApiKeys:E,onCopyClick:e=>{navigator.clipboard.writeText(t.apiKey),S(e.currentTarget),setTimeout((()=>{J()}),1500)},onShowAPIClick:()=>(e=>{if(E.indexOf(e)>-1){const t=E.filter((function(t){return t!==e}));T(t)}else T((t=>[...t,e]))})(t.apiKey),open:B,anchorEl:N,onClose:J,theme:e,onEditClick:()=>(e=>{v({title:"Edit API Key",type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",key:e}),d(!0)})(t),onDeleteClick:()=>(async e=>{const t={title:"Delete",description:0===e.chatFlows.length?"Delete key [".concat(e.keyName,"] ? "):"Delete key [".concat(e.keyName,"] ?\n There are ").concat(e.chatFlows.length," chatflows using this key."),confirmButtonName:"Delete",cancelButtonName:"Cancel"};if(await _(t))try{(await F.Z.deleteAPI(e.id)).data&&(r({message:"API key deleted",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,L.jsx)(m.Z,{style:{color:"white"},onClick:()=>l(e),children:(0,L.jsx)(M.kLi,{})})}}),Q())}catch(n){const e=n.response.data||"".concat(n.response.status,": ").concat(n.response.statusText);r({message:"Failed to delete API key: ".concat(e),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,L.jsx)(m.Z,{style:{color:"white"},onClick:()=>l(e),children:(0,L.jsx)(M.kLi,{})})}}),onCancel()}})(t)},n)))})]})})]}),(0,L.jsx)(O,{show:c,dialogProps:y,onCancel:()=>d(!1),onConfirm:Q}),(0,L.jsx)(W.Z,{})]})}}}]);
//# sourceMappingURL=3710.942a7fe9.chunk.js.map