"use strict";(self.webpackChunkflowise_ui=self.webpackChunkflowise_ui||[]).push([[2531],{42016:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(23917);const o={getAllAPIKeys:()=>n.Z.get("/apikey"),createNewAPI:e=>n.Z.post("/apikey",e),updateAPI:(e,t)=>n.Z.put("/apikey/".concat(e),t),deleteAPI:e=>n.Z.delete("/apikey/".concat(e))}},76858:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(23917);const o={getAllChatflows:()=>n.Z.get("/chatflows"),getSpecificChatflow:e=>n.Z.get("/chatflows/".concat(e)),getSpecificChatflowFromPublicEndpoint:e=>n.Z.get("/public-chatflows/".concat(e)),createNewChatflow:e=>n.Z.post("/chatflows",e),updateChatflow:(e,t)=>n.Z.put("/chatflows/".concat(e),t),deleteChatflow:e=>n.Z.delete("/chatflows/".concat(e)),getIsChatflowStreaming:e=>n.Z.get("/chatflows-streaming/".concat(e))}},14464:(e,t,a)=>{a.d(t,{Z:()=>p});var n=a(15749),o=a(30969),s=a(48886),i=a(38357),r=a(87130),l=a(33656),c=a(91862),d=a(46138),u=a(52312),h=a(37574);const p=e=>{let{show:t,dialogProps:a,onCancel:p,onConfirm:m}=e;const f=document.getElementById("portal"),[g,x]=(0,o.useState)(""),[y,v]=(0,o.useState)(!1);(0,o.useEffect)((()=>{v(!!g)}),[g]);const w=t?(0,h.jsxs)(s.Z,{open:t,fullWidth:!0,maxWidth:"xs",onClose:p,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,h.jsx)(i.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:a.title}),(0,h.jsx)(r.Z,{children:(0,h.jsx)(l.Z,{sx:{mt:1},id:"chatflow-name",type:"text",fullWidth:!0,placeholder:"My New Chatflow",value:g,onChange:e=>x(e.target.value)})}),(0,h.jsxs)(c.Z,{children:[(0,h.jsx)(d.Z,{onClick:p,children:a.cancelButtonName}),(0,h.jsx)(u.S,{disabled:!y,variant:"contained",onClick:()=>m(g),children:a.confirmButtonName})]})]}):null;return(0,n.createPortal)(w,f)}},48072:(e,t,a)=>{a.r(t),a.d(t,{default:()=>da});var n=a(30969),o=a(48428),s=a(5378),i=a(18658),r=(a(30599),a(69405)),l=a(13026);function c(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{navigator:a}=(0,n.useContext)(l.Us);(0,n.useEffect)((()=>{if(!t)return;const n=a.block((t=>{const a={...t,retry(){n(),t.retry()}};e(a)}));return n}),[a,e,t])}((0,n.useCallback)((t=>{window.confirm(e)&&t.retry()}),[e]),t)}var d=a(2383),u=a(50576),h=a(46138),p=a(38361),m=a(39088),f=a(34777),g=a(94702),x=a(45971),y=a(91243),v=a(47915),w=a(75295),j=a(6779),b=a(2295),C=a(55705),k=a(50728),S=a(22526),Z=a(27341),D=a(15749),I=a(48886),T=a(38357),A=a(87130),P=a(82309),N=a(56349),R=a(7836),M=a(10741),E=a(92472),L=a(61758),O=a(85481),F=a(37574);const B=e=>{let{columns:t,rows:a,sx:n}=e;return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(P.Z,{component:N.Z,children:(0,F.jsxs)(R.Z,{sx:{minWidth:650,...n},"aria-label":"simple table",children:[(0,F.jsx)(M.Z,{children:(0,F.jsx)(E.Z,{children:t.map(((e,t)=>(0,F.jsx)(L.Z,{children:e.charAt(0).toUpperCase()+e.slice(1)},t)))})}),(0,F.jsx)(O.Z,{children:a.map(((e,t)=>(0,F.jsx)(E.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:Object.keys(e).map(((t,a)=>(0,F.jsx)(L.Z,{children:e[t]},a)))},t)))})]})})})};var q=a(11021),z=a(23917);const J=e=>z.Z.get("/flow-config/".concat(e)),H=e=>z.Z.post("/node-config",e);var U=a(60990);const W=e=>{var t;let{show:a,dialogProps:o,onCancel:s}=e;const i=document.getElementById("portal"),l=(0,r.I0)(),c=(0,U.Z)(H);(0,n.useEffect)((()=>{o.data&&c.request(o.data)}),[o]),(0,n.useEffect)((()=>(l(a?{type:d.tS}:{type:d.Go}),()=>l({type:d.Go}))),[a,l]);const u=a?(0,F.jsxs)(I.Z,{onClose:s,open:a,fullWidth:!0,maxWidth:"md","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,F.jsx)(T.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:o.data&&o.data.name&&o.data.label&&(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,F.jsx)("div",{style:{width:50,height:50,marginRight:10,borderRadius:"50%",backgroundColor:"white"},children:(0,F.jsx)("img",{style:{width:"100%",height:"100%",padding:7,borderRadius:"50%",objectFit:"contain"},alt:o.data.name,src:"".concat(q.v2,"/api/v1/node-icon/").concat(o.data.name)})}),(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginLeft:10},children:[o.data.label,(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,F.jsx)("div",{style:{display:"flex",flexDirection:"row",width:"max-content",borderRadius:15,background:"rgb(254,252,191)",padding:5,paddingLeft:10,paddingRight:10,marginTop:5,marginBottom:5},children:(0,F.jsx)("span",{style:{color:"rgb(116,66,16)",fontSize:"0.825rem"},children:o.data.id})}),o.data.version&&(0,F.jsx)("div",{style:{display:"flex",flexDirection:"row",width:"max-content",borderRadius:15,background:"#e9edc9",padding:5,paddingLeft:10,paddingRight:10,marginTop:5,marginLeft:10,marginBottom:5},children:(0,F.jsxs)("span",{style:{color:"#606c38",fontSize:"0.825rem"},children:["version ",o.data.version]})}),o.data.badge&&(0,F.jsx)("div",{style:{display:"flex",flexDirection:"row",width:"max-content",borderRadius:15,background:"DEPRECATING"===o.data.badge?"#ffe57f":"#52b69a",padding:5,paddingLeft:10,paddingRight:10,marginTop:5,marginLeft:10,marginBottom:5},children:(0,F.jsx)("span",{style:{color:"DEPRECATING"!==o.data.badge?"white":"inherit",fontSize:"0.825rem"},children:o.data.badge})})]})]})]})}),(0,F.jsxs)(A.Z,{children:[(null===(t=o.data)||void 0===t?void 0:t.description)&&(0,F.jsx)("div",{style:{padding:10,marginBottom:10},children:(0,F.jsx)("span",{children:o.data.description})}),c.data&&c.data.length>0&&(0,F.jsx)(B,{rows:c.data.map((e=>{const{node:t,nodeId:a,...n}=e;return n})),columns:Object.keys(c.data[0]).slice(-3)})]})]}):null;return(0,D.createPortal)(u,i)};var K=a(49009),G=a(99177);const Y=(0,x.ZP)(C.Z)((e=>{let{theme:t}=e;return{background:t.palette.card.main,color:t.darkTextPrimary,border:"solid 1px",borderColor:t.palette.primary[200]+75,width:"300px",height:"auto",padding:"10px",boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)","&:hover":{borderColor:t.palette.primary.main}}})),_=(0,x.ZP)((e=>{let{className:t,...a}=e;return(0,F.jsx)(j.Z,{...a,classes:{popper:t}})}))((e=>{let{theme:t}=e;return{["& .".concat(b.Z.tooltip)]:{backgroundColor:t.palette.nodeToolTip.background,color:t.palette.nodeToolTip.color,boxShadow:t.shadows[1]}}})),V=e=>{var t,a,o,s,i,l;let{data:c}=e;const d=(0,g.Z)(),u=(0,r.v9)((e=>e.canvas)),{deleteNode:m,duplicateNode:f}=(0,n.useContext)(G.K),[x,b]=(0,n.useState)(!1),[C,D]=(0,n.useState)({}),[I,T]=(0,n.useState)(!1),[A,P]=(0,n.useState)({}),[N,R]=(0,n.useState)(""),[M,E]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const e=u.componentNodes.find((e=>e.name===c.name));var t;e&&(c.version?c.version&&e.version>c.version?R(((e,t)=>"Node version ".concat(e," outdated\nUpdate to latest version ").concat(t))(c.version,e.version)):"DEPRECATING"===e.badge&&R("This node will be deprecated in the next release. Change to a new node tagged with NEW"):R((t=e.version,"Node outdated\nUpdate to latest version ".concat(t))))}),[u.componentNodes,c.name,c.version]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Y,{content:!1,sx:{padding:0,borderColor:c.selected?d.palette.primary.main:d.palette.text.secondary},border:!1,children:(0,F.jsx)(_,{open:!u.canvasDialogShow&&M,onClose:()=>{E(!1)},onOpen:()=>{E(!0)},disableFocusListener:!0,title:(0,F.jsxs)("div",{style:{background:"transparent",display:"flex",flexDirection:"column"},children:[(0,F.jsx)(y.Z,{title:"Duplicate",onClick:()=>{f(c.id)},sx:{height:"35px",width:"35px","&:hover":{color:null===d||void 0===d?void 0:d.palette.primary.main}},color:null!==d&&void 0!==d&&null!==(t=d.customization)&&void 0!==t&&t.isDarkMode?null===(a=d.colors)||void 0===a?void 0:a.paper:"inherit",children:(0,F.jsx)(K.vUr,{})}),(0,F.jsx)(y.Z,{title:"Delete",onClick:()=>{m(c.id)},sx:{height:"35px",width:"35px","&:hover":{color:"red"}},color:null!==d&&void 0!==d&&null!==(o=d.customization)&&void 0!==o&&o.isDarkMode?null===(s=d.colors)||void 0===s?void 0:s.paper:"inherit",children:(0,F.jsx)(K.IT9,{})}),(0,F.jsx)(y.Z,{title:"Info",onClick:()=>{P({data:c}),T(!0)},sx:{height:"35px",width:"35px","&:hover":{color:null===d||void 0===d?void 0:d.palette.secondary.main}},color:null!==d&&void 0!==d&&null!==(i=d.customization)&&void 0!==i&&i.isDarkMode?null===(l=d.colors)||void 0===l?void 0:l.paper:"inherit",children:(0,F.jsx)(K.Us8,{})})]}),placement:"right-start",children:(0,F.jsxs)(p.Z,{children:[(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,F.jsx)(p.Z,{style:{width:50,marginRight:10,padding:5},children:(0,F.jsx)("div",{style:{...d.typography.commonAvatar,...d.typography.largeAvatar,borderRadius:"50%",backgroundColor:"white",cursor:"grab"},children:(0,F.jsx)("img",{style:{width:"100%",height:"100%",padding:5,objectFit:"contain"},src:"".concat(q.v2,"/api/v1/node-icon/").concat(c.name),alt:"Notification"})})}),(0,F.jsx)(p.Z,{children:(0,F.jsx)(v.Z,{sx:{fontSize:"1rem",fontWeight:500,mr:2},children:c.label})}),N&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{style:{flexGrow:1}}),(0,F.jsx)(j.Z,{title:(0,F.jsx)("span",{style:{whiteSpace:"pre-line"},children:N}),placement:"top",children:(0,F.jsx)(y.Z,{sx:{height:35,width:35},children:(0,F.jsx)(K.DpU,{size:35,color:"orange"})})})]})]}),(c.inputAnchors.length>0||c.inputParams.length>0)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(w.Z,{}),(0,F.jsx)(p.Z,{sx:{background:d.palette.asyncSelect.main,p:1},children:(0,F.jsx)(v.Z,{sx:{fontWeight:500,textAlign:"center"},children:"Inputs"})}),(0,F.jsx)(w.Z,{})]}),c.inputAnchors.map(((e,t)=>(0,F.jsx)(k.Z,{inputAnchor:e,data:c},t))),c.inputParams.filter((e=>!e.hidden)).map(((e,t)=>(0,F.jsx)(k.Z,{inputParam:e,data:c},t))),c.inputParams.find((e=>e.additionalParams))&&(0,F.jsx)("div",{style:{textAlign:"center",marginTop:c.inputParams.filter((e=>e.additionalParams)).length===c.inputParams.length+c.inputAnchors.length?20:0},children:(0,F.jsx)(h.Z,{sx:{borderRadius:25,width:"90%",mb:2},variant:"outlined",onClick:()=>{const e={data:c,inputParams:c.inputParams.filter((e=>e.additionalParams)),confirmButtonName:"Save",cancelButtonName:"Cancel"};D(e),b(!0)},children:"Additional Parameters"})}),(0,F.jsx)(w.Z,{}),(0,F.jsx)(p.Z,{sx:{background:d.palette.asyncSelect.main,p:1},children:(0,F.jsx)(v.Z,{sx:{fontWeight:500,textAlign:"center"},children:"Output"})}),(0,F.jsx)(w.Z,{}),c.outputAnchors.map(((e,t)=>(0,F.jsx)(S.Z,{outputAnchor:e,data:c},t)))]})})}),(0,F.jsx)(Z.Z,{show:x,dialogProps:C,onCancel:()=>b(!1)}),(0,F.jsx)(W,{show:I,dialogProps:A,onCancel:()=>T(!1)})]})};a(86420);const X=e=>{let{id:t,sourceX:a,sourceY:s,targetX:i,targetY:l,sourcePosition:c,targetPosition:u,style:h={},data:p,markerEnd:m}=e;const[f,g,x]=(0,o.OQ)({sourceX:a,sourceY:s,sourcePosition:c,targetX:i,targetY:l,targetPosition:u}),{deleteEdge:y}=(0,n.useContext)(G.K),v=(0,r.I0)();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("path",{id:t,style:h,className:"react-flow__edge-path",d:f,markerEnd:m}),p&&p.label&&(0,F.jsx)(o.f6,{x:a+10,y:s+10,label:p.label,labelStyle:{fill:"black"},labelBgStyle:{fill:"transparent"},labelBgPadding:[2,4],labelBgBorderRadius:2}),(0,F.jsx)("foreignObject",{width:40,height:40,x:g-20,y:x-20,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml",children:(0,F.jsx)("div",{children:(0,F.jsx)("button",{className:"edgebutton",onClick:e=>((e,t)=>{e.stopPropagation(),y(t),v({type:d.K8})})(e,t),children:"\xd7"})})})]})};var Q=a(6596),$=a(59467),ee=a(25139),te=a(98483),ae=a(2847),ne=a(71127),oe=a(67888),se=a(42558),ie=a.n(se),re=a(15742),le=a(37616);const ce={IconTrash:K.IT9,IconFileUpload:K.XuY,IconFileExport:K.D57,IconCopy:K.vUr,IconSearch:K.jVj,IconMessage:K.fu1},de={id:"settings",title:"",type:"group",children:[{id:"viewMessages",title:"View Messages",type:"item",url:"",icon:ce.IconMessage},{id:"duplicateChatflow",title:"Duplicate Chatflow",type:"item",url:"",icon:ce.IconCopy},{id:"loadChatflow",title:"Load Chatflow",type:"item",url:"",icon:ce.IconFileUpload},{id:"exportChatflow",title:"Export Chatflow",type:"item",url:"",icon:ce.IconFileExport},{id:"analyseChatflow",title:"Analyse Chatflow",type:"item",url:"",icon:ce.IconSearch},{id:"deleteChatflow",title:"Delete Chatflow",type:"item",url:"",icon:ce.IconTrash}]},ue=e=>{let{chatflow:t,isSettingsOpen:a,anchorEl:o,onSettingsItemClick:s,onUploadFile:i,onClose:r}=e;const l=(0,g.Z)(),[c,d]=(0,n.useState)([]),[u,h]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(t&&!t.id){const e=de.children.filter((e=>"loadChatflow"===e.id));d(e)}else if(t&&t.id){const e=de.children;d(e)}}),[t]),(0,n.useEffect)((()=>{h(a)}),[a]);const m=c.map((e=>(0,F.jsx)(le.Z,{item:e,level:1,navType:"SETTINGS",onClick:e=>s(e),onUploadFile:i},e.id)));return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(ae.Z,{placement:"bottom-end",open:u,anchorEl:o,role:void 0,transition:!0,disablePortal:!0,popperOptions:{modifiers:[{name:"offset",options:{offset:[170,20]}}]},sx:{zIndex:1e3},children:e=>{let{TransitionProps:t}=e;return(0,F.jsx)(re.Z,{in:u,...t,children:(0,F.jsx)(N.Z,{children:(0,F.jsx)(ne.d,{onClickAway:r,children:(0,F.jsx)(C.Z,{border:!1,elevation:16,content:!1,boxShadow:!0,shadow:l.shadows[16],children:(0,F.jsx)(ie(),{style:{height:"100%",maxHeight:"calc(100vh - 250px)",overflowX:"hidden"},children:(0,F.jsx)(p.Z,{sx:{p:2},children:(0,F.jsx)(oe.Z,{children:m})})})})})})})}})})};var he=a(14464),pe=a(73447),me=a(8288),fe=a(64048),ge=a(80928),xe=a(17187),ye=a(14891),ve=a(23038),we=a(34061),je=a(98545),be=a(70475),Ce=a(33656),ke=a(35531),Se=a(52312),Ze=a(97251),De=a(76858),Ie=a(33926);const Te="#ffffff",Ae=16,Pe="#303235",Ne={backgroundColor:"#f7f8ff",textColor:"#303235"},Re={backgroundColor:"#3B81F6",textColor:"#ffffff"},Me={backgroundColor:"#ffffff",textColor:"#303235",sendButtonColor:"#3B81F6"},Ee=e=>{var t,a,o,s,i,l,c,u,m,f,x,w,j,b,C,k,S,Z,D,I,T,A,P,N,R,M,E,L,O,B,z,J;let{isSessionMemory:H}=e;const U=(0,r.I0)(),W=(0,g.Z)(),G=(0,r.v9)((e=>e.canvas.chatflow)),Y=G.id,_=G.chatbotConfig?JSON.parse(G.chatbotConfig):{};(0,Ie.Z)();const V=function(){return U((0,d.yv)(...arguments))},X=function(){return U((0,d.sy)(...arguments))},[Q,$]=(0,n.useState)(null!==(t=G.isPublic)&&void 0!==t&&t),[te,ae]=(0,n.useState)(null!==(a=null===_||void 0===_?void 0:_.generateNewSession)&&void 0!==a&&a),[ne,oe]=(0,n.useState)(null!==(o=null===_||void 0===_?void 0:_.title)&&void 0!==o?o:""),[se,ie]=(0,n.useState)(null!==(s=null===_||void 0===_?void 0:_.titleAvatarSrc)&&void 0!==s?s:""),[re,le]=(0,n.useState)(null!==(i=null===_||void 0===_?void 0:_.welcomeMessage)&&void 0!==i?i:""),[ce,de]=(0,n.useState)(null!==(l=null===_||void 0===_?void 0:_.backgroundColor)&&void 0!==l?l:Te),[ue,he]=(0,n.useState)(null!==(c=null===_||void 0===_?void 0:_.fontSize)&&void 0!==c?c:Ae),[pe,me]=(0,n.useState)(null!==(u=null===_||void 0===_?void 0:_.poweredByTextColor)&&void 0!==u?u:Pe),[fe,ge]=(0,n.useState)(null!==(m=null===_||void 0===_||null===(f=_.botMessage)||void 0===f?void 0:f.backgroundColor)&&void 0!==m?m:Ne.backgroundColor),[xe,ye]=(0,n.useState)(null!==(x=null===_||void 0===_||null===(w=_.botMessage)||void 0===w?void 0:w.textColor)&&void 0!==x?x:Ne.textColor),[ve,we]=(0,n.useState)(null!==(j=null===_||void 0===_||null===(b=_.botMessage)||void 0===b?void 0:b.avatarSrc)&&void 0!==j?j:""),[Ee,Le]=(0,n.useState)(null!==(C=null===_||void 0===_||null===(k=_.botMessage)||void 0===k?void 0:k.showAvatar)&&void 0!==C&&C),[Oe,Fe]=(0,n.useState)(null!==(S=null===_||void 0===_||null===(Z=_.userMessage)||void 0===Z?void 0:Z.backgroundColor)&&void 0!==S?S:Re.backgroundColor),[Be,qe]=(0,n.useState)(null!==(D=null===_||void 0===_||null===(I=_.userMessage)||void 0===I?void 0:I.textColor)&&void 0!==D?D:Re.textColor),[ze,Je]=(0,n.useState)(null!==(T=null===_||void 0===_||null===(A=_.userMessage)||void 0===A?void 0:A.avatarSrc)&&void 0!==T?T:""),[He,Ue]=(0,n.useState)(null!==(P=null===_||void 0===_||null===(N=_.userMessage)||void 0===N?void 0:N.showAvatar)&&void 0!==P&&P),[We,Ke]=(0,n.useState)(null!==(R=null===_||void 0===_||null===(M=_.textInput)||void 0===M?void 0:M.backgroundColor)&&void 0!==R?R:Me.backgroundColor),[Ge,Ye]=(0,n.useState)(null!==(E=null===_||void 0===_||null===(L=_.textInput)||void 0===L?void 0:L.textColor)&&void 0!==E?E:Me.textColor),[_e,Ve]=(0,n.useState)(null!==(O=null===_||void 0===_||null===(B=_.textInput)||void 0===B?void 0:B.placeholder)&&void 0!==O?O:""),[Xe,Qe]=(0,n.useState)(null!==(z=null===_||void 0===_||null===(J=_.textInput)||void 0===J?void 0:J.sendButtonColor)&&void 0!==z?z:Me.sendButtonColor),[$e,et]=(0,n.useState)(null),[tt,at]=(0,n.useState)(""),[nt,ot]=(0,n.useState)(""),st=Boolean($e),[it,rt]=(0,n.useState)(null),lt=Boolean(it),ct=()=>{const e={botMessage:{showAvatar:!1},userMessage:{showAvatar:!1},textInput:{},overrideConfig:{}};return ne&&(e.title=ne),se&&(e.titleAvatarSrc=se),re&&(e.welcomeMessage=re),ce&&(e.backgroundColor=ce),ue&&(e.fontSize=ue),pe&&(e.poweredByTextColor=pe),fe&&(e.botMessage.backgroundColor=fe),xe&&(e.botMessage.textColor=xe),ve&&(e.botMessage.avatarSrc=ve),Ee&&(e.botMessage.showAvatar=Ee),Oe&&(e.userMessage.backgroundColor=Oe),Be&&(e.userMessage.textColor=Be),ze&&(e.userMessage.avatarSrc=ze),He&&(e.userMessage.showAvatar=He),We&&(e.textInput.backgroundColor=We),Ge&&(e.textInput.textColor=Ge),_e&&(e.textInput.placeholder=_e),Xe&&(e.textInput.sendButtonColor=Xe),H&&(e.overrideConfig.generateNewSession=te),e},dt=()=>{rt(null)},ut=(e,t,a)=>(0,F.jsx)(p.Z,{sx:{pt:2,pb:2},children:(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,F.jsx)(v.Z,{sx:{mb:1},children:a}),(0,F.jsx)(p.Z,{sx:{cursor:"pointer",width:"30px",height:"30px",border:"1px solid #616161",marginRight:"10px",backgroundColor:null!==e&&void 0!==e?e:"#ffffff",borderRadius:"5px"},onClick:a=>{at(t),ot(null!==e&&void 0!==e?e:"#ffffff"),et(a.currentTarget)}})]})}),ht=(e,t,a)=>(0,F.jsx)(p.Z,{sx:{pt:2,pb:2},children:(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,F.jsx)(v.Z,{sx:{mb:1},children:a}),(0,F.jsx)(be.Z,{id:t,checked:e,onChange:e=>{((e,t)=>{switch(t){case"botMessageShowAvatar":Le(e);break;case"userMessageShowAvatar":Ue(e);break;case"generateNewSession":ae(e)}})(e.target.checked,t)}})]})}),pt=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"string",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return(0,F.jsx)(p.Z,{sx:{pt:2,pb:2},children:(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,F.jsx)(v.Z,{sx:{mb:1},children:a}),(0,F.jsx)(Ce.Z,{id:t,type:n,fullWidth:!0,value:e,placeholder:o,name:t,onChange:e=>{((e,t)=>{switch(t){case"title":oe(e);break;case"titleAvatarSrc":ie(e);break;case"welcomeMessage":le(e);break;case"fontSize":he(e);break;case"botMessageAvatarSrc":we(e);break;case"userMessageAvatarSrc":Je(e);break;case"textInputPlaceholder":Ve(e)}})(e.target.value,t)}})]})})};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(ee.Z,{direction:"row",children:[(0,F.jsx)(v.Z,{sx:{p:1,borderRadius:10,backgroundColor:W.palette.primary.light,width:"max-content",height:"max-content"},variant:"h5",children:"".concat(q.v2,"/chatbot/").concat(Y)}),(0,F.jsx)(y.Z,{title:"Copy Link",color:"success",onClick:e=>{navigator.clipboard.writeText("".concat(q.v2,"/chatbot/").concat(Y)),rt(e.currentTarget),setTimeout((()=>{dt()}),1500)},children:(0,F.jsx)(K.vUr,{})}),(0,F.jsx)(y.Z,{title:"Open New Tab",color:"primary",onClick:()=>window.open("".concat(q.v2,"/chatbot/").concat(Y),"_blank"),children:(0,F.jsx)(K.m7l,{})}),(0,F.jsx)("div",{style:{flex:1}}),(0,F.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,F.jsx)(be.Z,{checked:Q,onChange:e=>{$(e.target.checked),(async e=>{try{const t=await De.Z.updateChatflow(Y,{isPublic:e});t.data&&(V({message:"Chatbot Configuration Saved",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>X(e),children:(0,F.jsx)(K.kLi,{})})}}),U({type:d.ch,chatflow:t.data}))}catch(t){console.error(t);const e=t.response.data||"".concat(t.response.status,": ").concat(t.response.statusText);V({message:"Failed to save Chatbot Configuration: ".concat(e),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>X(e),children:(0,F.jsx)(K.kLi,{})})}})}})(e.target.checked)}}),(0,F.jsx)(v.Z,{children:"Make Public"}),(0,F.jsx)(Ze.H,{style:{marginLeft:10},title:"Making public will allow anyone to access the chatbot without username & password"})]})]}),pt(ne,"title","Title","string","Flowise Assistant"),pt(se,"titleAvatarSrc","Title Avatar Link","string","https://raw.githubusercontent.com/FlowiseAI/Flowise/main/assets/FloWiseAI_dark.png"),pt(re,"welcomeMessage","Welcome Message","string","Hello! This is custom welcome message"),ut(ce,"backgroundColor","Background Color"),pt(ue,"fontSize","Font Size","number"),ut(pe,"poweredByTextColor","PoweredBy TextColor"),(0,F.jsx)(v.Z,{variant:"h4",sx:{mb:1,mt:2},children:"Bot Message"}),ut(fe,"botMessageBackgroundColor","Background Color"),ut(xe,"botMessageTextColor","Text Color"),pt(ve,"botMessageAvatarSrc","Avatar Link","string","https://raw.githubusercontent.com/zahidkhawaja/langchain-chat-nextjs/main/public/parroticon.png"),ht(Ee,"botMessageShowAvatar","Show Avatar"),(0,F.jsx)(v.Z,{variant:"h4",sx:{mb:1,mt:2},children:"User Message"}),ut(Oe,"userMessageBackgroundColor","Background Color"),ut(Be,"userMessageTextColor","Text Color"),pt(ze,"userMessageAvatarSrc","Avatar Link","string","https://raw.githubusercontent.com/zahidkhawaja/langchain-chat-nextjs/main/public/usericon.png"),ht(He,"userMessageShowAvatar","Show Avatar"),(0,F.jsx)(v.Z,{variant:"h4",sx:{mb:1,mt:2},children:"Text Input"}),ut(We,"textInputBackgroundColor","Background Color"),ut(Ge,"textInputTextColor","Text Color"),pt(_e,"textInputPlaceholder","TextInput Placeholder","string","Type question.."),ut(Xe,"textInputSendButtonColor","TextIntput Send Button Color"),H&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(v.Z,{variant:"h4",sx:{mb:1,mt:2},children:"Session Memory"}),ht(te,"generateNewSession","Start new session when chatbot link is opened or refreshed")]}),(0,F.jsx)(Se.S,{style:{marginBottom:10,marginTop:10},variant:"contained",onClick:()=>(async()=>{try{const e=await De.Z.updateChatflow(Y,{chatbotConfig:JSON.stringify(ct())});e.data&&(V({message:"Chatbot Configuration Saved",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>X(e),children:(0,F.jsx)(K.kLi,{})})}}),U({type:d.ch,chatflow:e.data}))}catch(e){console.error(e);const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);V({message:"Failed to save Chatbot Configuration: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>X(e),children:(0,F.jsx)(K.kLi,{})})}})}})(),children:"Save Changes"}),(0,F.jsx)(ke.ZP,{open:st,anchorEl:$e,onClose:()=>{et(null)},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,F.jsx)(je.xS,{color:nt,onChange:e=>(e=>{switch(tt){case"backgroundColor":de(e);break;case"poweredByTextColor":me(e);break;case"botMessageBackgroundColor":ge(e);break;case"botMessageTextColor":ye(e);break;case"userMessageBackgroundColor":Fe(e);break;case"userMessageTextColor":qe(e);break;case"textInputBackgroundColor":Ke(e);break;case"textInputTextColor":Ye(e);break;case"textInputSendButtonColor":Qe(e)}ot(e)})(e.hex)})}),(0,F.jsx)(ke.ZP,{open:lt,anchorEl:it,onClose:dt,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,F.jsx)(v.Z,{variant:"h6",sx:{pl:1,pr:1,color:"white",background:W.palette.success.dark},children:"Copied!"})})]})};var Le=a(36597),Oe=a(14682);const Fe=e=>{let{value:t,label:a,onChange:o,disabled:s=!1}=e;const[i,r]=(0,n.useState)(t);return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(Le.Z,{sx:{mt:1,width:"100%"},size:"small",control:(0,F.jsx)(Oe.Z,{disabled:s,checked:i,onChange:e=>{r(e.target.checked),o(e.target.checked)}}),label:a})})};function Be(e){const{children:t,value:a,index:n,...o}=e;return(0,F.jsx)("div",{role:"tabpanel",hidden:a!==n,id:"attachment-tabpanel-".concat(n),"aria-labelledby":"attachment-tab-".concat(n),...o,children:a===n&&(0,F.jsx)(p.Z,{sx:{p:1},children:t})})}function qe(e){return{id:"attachment-tab-".concat(e),"aria-controls":"attachment-tabpanel-".concat(e)}}const ze=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?'button: {\n                    backgroundColor: "#3B81F6",\n                    right: 20,\n                    bottom: 20,\n                    size: "medium",\n                    iconColor: "white",\n                    customIconSrc: "https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/svg/google-messages.svg",\n                }':'button: {\n                backgroundColor: "#3B81F6",\n                right: 20,\n                bottom: 20,\n                size: "medium",\n                iconColor: "white",\n                customIconSrc: "https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/svg/google-messages.svg",\n            }'},Je=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?'chatWindow: {\n                    welcomeMessage: "Hello! This is custom welcome message",\n                    backgroundColor: "#ffffff",\n                    height: 700,\n                    width: 400,\n                    fontSize: 16,\n                    poweredByTextColor: "#303235",\n                    botMessage: {\n                        backgroundColor: "#f7f8ff",\n                        textColor: "#303235",\n                        showAvatar: true,\n                        avatarSrc: "https://raw.githubusercontent.com/zahidkhawaja/langchain-chat-nextjs/main/public/parroticon.png",\n                    },\n                    userMessage: {\n                        backgroundColor: "#3B81F6",\n                        textColor: "#ffffff",\n                        showAvatar: true,\n                        avatarSrc: "https://raw.githubusercontent.com/zahidkhawaja/langchain-chat-nextjs/main/public/usericon.png",\n                    },\n                    textInput: {\n                        placeholder: "Type your question",\n                        backgroundColor: "#ffffff",\n                        textColor: "#303235",\n                        sendButtonColor: "#3B81F6",\n                    }\n                }':'chatWindow: {\n                welcomeMessage: "Hello! This is custom welcome message",\n                backgroundColor: "#ffffff",\n                height: 700,\n                width: 400,\n                fontSize: 16,\n                poweredByTextColor: "#303235",\n                botMessage: {\n                    backgroundColor: "#f7f8ff",\n                    textColor: "#303235",\n                    showAvatar: true,\n                    avatarSrc: "https://raw.githubusercontent.com/zahidkhawaja/langchain-chat-nextjs/main/public/parroticon.png",\n                },\n                userMessage: {\n                    backgroundColor: "#3B81F6",\n                    textColor: "#ffffff",\n                    showAvatar: true,\n                    avatarSrc: "https://raw.githubusercontent.com/zahidkhawaja/langchain-chat-nextjs/main/public/usericon.png",\n                },\n                textInput: {\n                    placeholder: "Type your question",\n                    backgroundColor: "#ffffff",\n                    textColor: "#303235",\n                    sendButtonColor: "#3B81F6",\n                }\n            }'},He=e=>{let{chatflowid:t}=e;const a=["Popup Html","Fullpage Html","Popup React","Fullpage React"],[o,s]=(0,n.useState)(0),[i,r]=(0,n.useState)(!1),l=e=>{r(e)},c=e=>{switch(e){case"Popup Html":return(e=>'<script type="module">\n    import Chatbot from "https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js"\n    Chatbot.init({\n        chatflowid: "'.concat(e,'",\n        apiHost: "').concat(q.v2,'",\n    })\n<\/script>'))(t);case"Fullpage Html":return(e=>'<flowise-fullchatbot></flowise-fullchatbot>\n<script type="module">\n    import Chatbot from "https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js"\n    Chatbot.initFull({\n        chatflowid: "'.concat(e,'",\n        apiHost: "').concat(q.v2,'",\n    })\n<\/script>'))(t);case"Popup React":return(e=>"import { BubbleChat } from 'flowise-embed-react'\n\nconst App = () => {\n    return (\n        <BubbleChat chatflowid=\"".concat(e,'" apiHost="').concat(q.v2,'" />\n    );\n};'))(t);case"Fullpage React":return(e=>'import { FullPageChat } from "flowise-embed-react"\n\nconst App = () => {\n    return (\n        <FullPageChat\n            chatflowid="'.concat(e,'"\n            apiHost="').concat(q.v2,'"\n        />\n    );\n};'))(t);default:return""}},d=e=>{switch(e){case"Popup Html":return(e=>'<script type="module">\n    import Chatbot from "https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js"\n    Chatbot.init({\n        chatflowid: "'.concat(e,'",\n        apiHost: "').concat(q.v2,'",\n        chatflowConfig: {\n            // topK: 2\n        },\n        theme: {\n            ').concat(ze(),",\n            ").concat(Je(),"\n        }\n    })\n<\/script>"))(t);case"Fullpage Html":return(e=>'<flowise-fullchatbot></flowise-fullchatbot>\n<script type="module">\n    import Chatbot from "https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js"\n    Chatbot.initFull({\n        chatflowid: "'.concat(e,'",\n        apiHost: "').concat(q.v2,'",\n        theme: {\n            ').concat(Je(),"\n        }\n    })\n<\/script>"))(t);case"Popup React":return(e=>"import { BubbleChat } from 'flowise-embed-react'\n\nconst App = () => {\n    return (\n        <BubbleChat\n            chatflowid=\"".concat(e,'"\n            apiHost="').concat(q.v2,'"\n            theme={{\n                ').concat(ze(!0),",\n                ").concat(Je(!0),"\n            }}\n        />\n    );\n};"))(t);case"Fullpage React":return(e=>'import { FullPageChat } from "flowise-embed-react"\n\nconst App = () => {\n    return (\n        <FullPageChat\n            chatflowid="'.concat(e,'"\n            apiHost="').concat(q.v2,'"\n            theme={{\n                ').concat(Je(!0),"\n            }}\n        />\n    );\n};"))(t);default:return""}};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:(0,F.jsx)("div",{style:{flex:80},children:(0,F.jsx)(pe.Z,{value:o,onChange:(e,t)=>{s(t)},"aria-label":"tabs",children:a.map(((e,t)=>(0,F.jsx)(me.Z,{label:e,...qe(t)},t)))})})}),(0,F.jsx)("div",{style:{marginTop:10}}),a.map(((e,t)=>(0,F.jsxs)(Be,{value:o,index:t,children:[(0===o||1===o)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("span",{children:["Paste this anywhere in the ",(0,F.jsx)("code",{children:"<body>"})," tag of your html file.",(0,F.jsxs)("p",{children:["You can also specify a\xa0",(0,F.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://www.npmjs.com/package/flowise-embed?activeTab=versions",children:"version"}),":\xa0",(0,F.jsx)("code",{children:"https://cdn.jsdelivr.net/npm/flowise-embed@<version>/dist/web.js"})]})]}),(0,F.jsx)("div",{style:{height:10}})]}),(0,F.jsx)(ye.Z1,{theme:ye.FE,text:c(e),language:"javascript",showLineNumbers:!1,wrapLines:!0}),(0,F.jsx)(Fe,{label:"Show Embed Chat Config",value:i,onChange:l}),i&&(0,F.jsx)(ye.Z1,{theme:ye.FE,text:d(e),language:"javascript",showLineNumbers:!1,wrapLines:!0})]},t)))]})},Ue=()=>{var e,t,a,o,s,i;const l=(0,r.I0)(),c=(0,r.v9)((e=>e.canvas.chatflow)),u=c.id,m=c.apiConfig?JSON.parse(c.apiConfig):{};(0,Ie.Z)();const f=function(){return l((0,d.yv)(...arguments))},g=function(){return l((0,d.sy)(...arguments))},[x,y]=(0,n.useState)(null!==(e=null===m||void 0===m||null===(t=m.rateLimit)||void 0===t?void 0:t.limitMax)&&void 0!==e?e:""),[w,j]=(0,n.useState)(null!==(a=null===m||void 0===m||null===(o=m.rateLimit)||void 0===o?void 0:o.limitDuration)&&void 0!==a?a:""),[b,C]=(0,n.useState)(null!==(s=null===m||void 0===m||null===(i=m.rateLimit)||void 0===i?void 0:i.limitMsg)&&void 0!==s?s:""),k=()=>{const e={rateLimit:{}},t=[!x,!w,!b].filter((e=>!1===e));if(t.length>=1&&t.length<=2)throw new Error("Need to fill all rate limit input fields");return 3===t.length&&(e.rateLimit={limitMax:x,limitDuration:w,limitMsg:b}),e},S=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"string",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return(0,F.jsx)(p.Z,{sx:{pt:2,pb:2},children:(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,F.jsx)(v.Z,{sx:{mb:1},children:a}),(0,F.jsx)(Ce.Z,{id:t,type:n,fullWidth:!0,value:e,placeholder:o,name:t,onChange:e=>{((e,t)=>{switch(t){case"limitMax":y(e);break;case"limitDuration":j(e);break;case"limitMsg":C(e)}})(e.target.value,t)}})]})})};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(v.Z,{variant:"h4",sx:{mb:1,mt:2},children:["Rate Limit"," ",(0,F.jsx)(Ze.H,{style:{mb:1,mt:2,marginLeft:10},title:'Visit <a target="_blank" href="https://docs.flowiseai.com/rate-limit">Rate Limit Setup Guide</a> to set up Rate Limit correctly in your hosting environment.'})]}),S(x,"limitMax","Message Limit per Duration","number"),S(w,"limitDuration","Duration in Second","number"),S(b,"limitMsg","Limit Message","string"),(0,F.jsx)(Se.S,{style:{marginBottom:10,marginTop:10},variant:"contained",onClick:()=>(async()=>{try{const e=await De.Z.updateChatflow(u,{apiConfig:JSON.stringify(k())});e.data&&(f({message:"API Configuration Saved",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>g(e),children:(0,F.jsx)(K.kLi,{})})}}),l({type:d.ch,chatflow:e.data}))}catch(e){console.error(e);const t=e.response?e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText):e.message;f({message:"Failed to save API Configuration: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>g(e),children:(0,F.jsx)(K.kLi,{})})}})}})(),children:"Save Changes"})]})};const We=a.p+"static/media/python.b0fd2326ee21d9c5524d0d243379c879.svg";const Ke=a.p+"static/media/javascript.0baf38b3d3f5b2d24e87fb5cc2fcfea0.svg";const Ge=a.p+"static/media/cURL.37eb8ccceafb9e8630a53aa0eb756128.svg";const Ye=a.p+"static/media/embed.289f71beedf481a4fab870e9fed16fec.svg",_e=a.p+"static/media/sharing.932311c91d3fa05253cc.png";const Ve=a.p+"static/media/settings.09181fb470b6437d7de0fa70595c182a.svg";var Xe=a(42016),Qe=a(86115);function $e(e){const{children:t,value:a,index:n,...o}=e;return(0,F.jsx)("div",{role:"tabpanel",hidden:a!==n,id:"attachment-tabpanel-".concat(n),"aria-labelledby":"attachment-tab-".concat(n),...o,children:a===n&&(0,F.jsx)(p.Z,{sx:{p:1},children:t})})}function et(e){return{id:"attachment-tab-".concat(e),"aria-controls":"attachment-tabpanel-".concat(e)}}const tt=e=>{var t,a;let{show:o,dialogProps:s,onCancel:i}=e;const c=document.getElementById("portal"),u=(0,l.s0)(),h=(0,r.I0)(),p=["Embed","Python","JavaScript","cURL","Share Chatbot","Configuration"],[m,f]=(0,n.useState)(0),[g,x]=(0,n.useState)([]),[y,w]=(0,n.useState)([]),[j,b]=(0,n.useState)(""),[C,k]=(0,n.useState)({}),[S,Z]=(0,n.useState)(!1),[P,N]=(0,n.useState)({}),[R,M]=(0,n.useState)({}),E=(0,U.Z)(Xe.Z.getAllAPIKeys),L=(0,U.Z)(De.Z.updateChatflow),O=(0,U.Z)(De.Z.getIsChatflowStreaming),z=(0,U.Z)(J),H=e=>{Z(e),e&&z.request(s.chatflowid)},W=e=>(t,a)=>{const n={...R};n[e]=a,M(n)};(0,n.useEffect)((()=>{L.data&&h({type:d.ch,chatflow:L.data})}),[L.data,h]),(0,n.useEffect)((()=>{z.data&&function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a={},n=e.reduce((function(e,n){return e[n.node]=e[n.node]||[],e[n.node].push(n),a[n.node]=!!t,e}),Object.create(null));N(n),M(a)}(z.data)}),[z.data]);const G=e=>"Python"===e?'import requests\n\nAPI_URL = "'.concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid,'"\n\ndef query(payload):\n    response = requests.post(API_URL, json=payload)\n    return response.json()\n    \noutput = query({\n    "question": "Hey, how are you?",\n})\n'):"JavaScript"===e?'async function query(data) {\n    const response = await fetch(\n        "'.concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid,'",\n        {\n            method: "POST",\n            headers: {\n                "Content-Type": "application/json"\n            },\n            body: JSON.stringify(data)\n        }\n    );\n    const result = await response.json();\n    return result;\n}\n\nquery({"question": "Hey, how are you?"}).then((response) => {\n    console.log(response);\n});\n'):"cURL"===e?"curl ".concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid,' \\\n     -X POST \\\n     -d \'{"question": "Hey, how are you?"}\' \\\n     -H "Content-Type: application/json"'):"",Y=e=>"Python"===e?'import requests\n\nAPI_URL = "'.concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid,'"\nheaders = {"Authorization": "Bearer ').concat(null===C||void 0===C?void 0:C.apiKey,'"}\n\ndef query(payload):\n    response = requests.post(API_URL, headers=headers, json=payload)\n    return response.json()\n    \noutput = query({\n    "question": "Hey, how are you?",\n})\n'):"JavaScript"===e?'async function query(data) {\n    const response = await fetch(\n        "'.concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid,'",\n        {\n            headers: {\n                Authorization: "Bearer ').concat(null===C||void 0===C?void 0:C.apiKey,'",\n                "Content-Type": "application/json"\n            },\n            method: "POST",\n            body: JSON.stringify(data)\n        }\n    );\n    const result = await response.json();\n    return result;\n}\n\nquery({"question": "Hey, how are you?"}).then((response) => {\n    console.log(response);\n});\n'):"cURL"===e?"curl ".concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid,' \\\n     -X POST \\\n     -d \'{"question": "Hey, how are you?"}\' \\\n     -H "Content-Type: application/json" \\\n     -H "Authorization: Bearer ').concat(null===C||void 0===C?void 0:C.apiKey,'"'):"",_=e=>"Python"===e?"python":"JavaScript"===e?"javascript":"cURL"===e?"bash":"python",V=e=>"Python"===e?We:"JavaScript"===e?Ke:"Embed"===e?Ye:"cURL"===e?Ge:"Share Chatbot"===e?_e:"Configuration"===e?Ve:We,X=(e,t)=>{if("Python"===e){let e=(t=(0,Qe.VN)(t))[0].type;return e.includes(",")&&(e=e.split(",")[0]),'import requests\n\nAPI_URL = "'.concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid,'"\n\n# use form data to upload files\nform_data = {\n    "files": ',"('example".concat(e,"', open('example").concat(e,"', 'rb'))"),"\n}\nbody_data = {").concat((0,Qe.nJ)(t,"formData"),"}\n\ndef query(form_data):\n    response = requests.post(API_URL, files=form_data, data=body_data)\n    return response.json()\n\noutput = query(form_data)\n")}return"JavaScript"===e?"// use FormData to upload files\nlet formData = new FormData();\n".concat((0,Qe.Ln)(t,"formData"),'\nasync function query(formData) {\n    const response = await fetch(\n        "').concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid,'",\n        {\n            method: "POST",\n            body: formData\n        }\n    );\n    const result = await response.json();\n    return result;\n}\n\nquery(formData).then((response) => {\n    console.log(response);\n});\n'):"cURL"===e?"curl ".concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid," \\\n     -X POST \\").concat((0,Qe.CJ)(t,"formData"),' \\\n     -H "Content-Type: multipart/form-data"'):""},Q=(e,t)=>{if("Python"===e){let e=(t=(0,Qe.VN)(t))[0].type;return e.includes(",")&&(e=e.split(",")[0]),'import requests\n\nAPI_URL = "'.concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid,'"\nheaders = {"Authorization": "Bearer ').concat(null===C||void 0===C?void 0:C.apiKey,'"}\n\n# use form data to upload files\nform_data = {\n    "files": ',"('example".concat(e,"', open('example").concat(e,"', 'rb'))"),"\n}\nbody_data = {").concat((0,Qe.nJ)(t,"formData"),"}\n\ndef query(form_data):\n    response = requests.post(API_URL, headers=headers, files=form_data, data=body_data)\n    return response.json()\n\noutput = query(form_data)\n")}return"JavaScript"===e?"// use FormData to upload files\nlet formData = new FormData();\n".concat((0,Qe.Ln)(t,"formData"),'\nasync function query(formData) {\n    const response = await fetch(\n        "').concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid,'",\n        {\n            headers: { Authorization: "Bearer ').concat(null===C||void 0===C?void 0:C.apiKey,'" },\n            method: "POST",\n            body: formData\n        }\n    );\n    const result = await response.json();\n    return result;\n}\n\nquery(formData).then((response) => {\n    console.log(response);\n});\n'):"cURL"===e?"curl ".concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid," \\\n     -X POST \\").concat((0,Qe.CJ)(t,"formData"),' \\\n     -H "Content-Type: multipart/form-data" \\\n     -H "Authorization: Bearer ').concat(null===C||void 0===C?void 0:C.apiKey,'"'):""},$=(e,t)=>"Python"===e?'import requests\n\nAPI_URL = "'.concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid,'"\n\ndef query(payload):\n    response = requests.post(API_URL, json=payload)\n    return response.json()\n\noutput = query({\n    "question": "Hey, how are you?",\n    "overrideConfig": {').concat((0,Qe.nJ)(t,"json"),"\n    }\n})\n"):"JavaScript"===e?'async function query(data) {\n    const response = await fetch(\n        "'.concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid,'",\n        {\n            method: "POST",\n            headers: {\n                "Content-Type": "application/json"\n            },\n            body: JSON.stringify(data)\n        }\n    );\n    const result = await response.json();\n    return result;\n}\n\nquery({\n  "question": "Hey, how are you?",\n  "overrideConfig": {').concat((0,Qe.Ln)(t,"json"),"\n  }\n}).then((response) => {\n    console.log(response);\n});\n"):"cURL"===e?"curl ".concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid,' \\\n     -X POST \\\n     -d \'{"question": "Hey, how are you?", "overrideConfig": {').concat((0,Qe.CJ)(t,"json"),'}\' \\\n     -H "Content-Type: application/json"'):"",ee=(e,t)=>"Python"===e?'import requests\n\nAPI_URL = "'.concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid,'"\nheaders = {"Authorization": "Bearer ').concat(null===C||void 0===C?void 0:C.apiKey,'"}\n\ndef query(payload):\n    response = requests.post(API_URL, headers=headers, json=payload)\n    return response.json()\n\noutput = query({\n    "question": "Hey, how are you?",\n    "overrideConfig": {').concat((0,Qe.nJ)(t,"json"),"\n    }\n})\n"):"JavaScript"===e?'async function query(data) {\n    const response = await fetch(\n        "'.concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid,'",\n        {\n            headers: {\n                Authorization: "Bearer ').concat(null===C||void 0===C?void 0:C.apiKey,'",\n                "Content-Type": "application/json"\n            },\n            method: "POST",\n            body: JSON.stringify(data)\n        }\n    );\n    const result = await response.json();\n    return result;\n}\n\nquery({\n  "question": "Hey, how are you?",\n  "overrideConfig": {').concat((0,Qe.Ln)(t,"json"),"\n  }\n}).then((response) => {\n    console.log(response);\n});\n"):"cURL"===e?"curl ".concat(q.v2,"/api/v1/prediction/").concat(s.chatflowid,' \\\n     -X POST \\\n     -d \'{"question": "Hey, how are you?", "overrideConfig": {').concat((0,Qe.CJ)(t,"json"),'}\' \\\n     -H "Content-Type: application/json" \\\n     -H "Authorization: Bearer ').concat(null===C||void 0===C?void 0:C.apiKey,'"'):"",te=e=>"Python"===e?'body_data = {\n    "openAIApiKey[chatOpenAI_0]": "sk-my-openai-1st-key",\n    "openAIApiKey[openAIEmbeddings_0]": "sk-my-openai-2nd-key"\n}':"JavaScript"===e?'formData.append("openAIApiKey[chatOpenAI_0]", "sk-my-openai-1st-key")\nformData.append("openAIApiKey[openAIEmbeddings_0]", "sk-my-openai-2nd-key")':"cURL"===e?'-F "openAIApiKey[chatOpenAI_0]=sk-my-openai-1st-key" \\\n-F "openAIApiKey[openAIEmbeddings_0]=sk-my-openai-2nd-key" \\':void 0;(0,n.useEffect)((()=>{if(E.data){const e=[{label:"No Authorization",name:""}];for(const t of E.data)e.push({label:t.keyName,name:t.id});e.push({label:"- Add New Key -",name:"addnewkey"}),x(e),w(E.data),s.chatflowApiKeyId&&(b(s.chatflowApiKeyId),k(E.data.find((e=>e.id===s.chatflowApiKeyId))))}}),[s,E.data]),(0,n.useEffect)((()=>{o&&(E.request(),O.request(s.chatflowid))}),[o]);const ae=o?(0,F.jsxs)(I.Z,{open:o,fullWidth:!0,maxWidth:"md",onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,F.jsx)(T.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:s.title}),(0,F.jsxs)(A.Z,{children:[(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,F.jsx)("div",{style:{flex:80},children:(0,F.jsx)(pe.Z,{value:m,onChange:(e,t)=>{f(t)},"aria-label":"tabs",children:p.map(((e,t)=>(0,F.jsx)(me.Z,{icon:(0,F.jsx)("img",{style:{objectFit:"cover",height:15,width:"auto"},src:V(e),alt:"code"}),iconPosition:"start",label:e,...et(t)},t)))})}),(0,F.jsx)("div",{style:{flex:20},children:(0,F.jsx)(we.L,{name:"SelectKey",disableClearable:!0,options:g,onSelect:e=>(e=>{if("addnewkey"===e)return void u("/apikey");b(e),k(y.find((t=>t.id===e)));const t={apikeyid:e};L.request(s.chatflowid,t)})(e),value:null!==(t=null!==(a=s.chatflowApiKeyId)&&void 0!==a?a:j)&&void 0!==t?t:"Choose an API key"})})]}),(0,F.jsx)("div",{style:{marginTop:10}}),p.map(((e,t)=>{var a;return(0,F.jsxs)($e,{value:m,index:t,children:[("Embed"===e||"Share Chatbot"===e)&&j&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("p",{children:"You cannot use API key while embedding/sharing chatbot."}),(0,F.jsxs)("p",{children:["Please select ",(0,F.jsx)("b",{children:'"No Authorization"'})," from the dropdown at the top right corner."]})]}),"Embed"===e&&!j&&(0,F.jsx)(He,{chatflowid:s.chatflowid}),"Embed"!==e&&"Share Chatbot"!==e&&"Configuration"!==e&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(ye.Z1,{theme:ye.FE,text:j?Y(e):G(e),language:_(e),showLineNumbers:!1,wrapLines:!0}),(0,F.jsx)(Fe,{label:"Show Input Config",value:S,onChange:H}),S&&z.data&&z.data.length>0&&(0,F.jsxs)(F.Fragment,{children:[Object.keys(P).sort().map((e=>(0,F.jsxs)(fe.Z,{expanded:R[e]||!1,onChange:W(e),disableGutters:!0,children:[(0,F.jsx)(ge.Z,{expandIcon:(0,F.jsx)(ve.Z,{}),"aria-controls":"nodes-accordian-".concat(e),id:"nodes-accordian-header-".concat(e),children:(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,F.jsx)(v.Z,{variant:"h5",children:e}),(0,F.jsx)("div",{style:{display:"flex",flexDirection:"row",width:"max-content",borderRadius:15,background:"rgb(254,252,191)",padding:5,paddingLeft:10,paddingRight:10,marginLeft:10},children:(0,F.jsx)("span",{style:{color:"rgb(116,66,16)",fontSize:"0.825rem"},children:P[e][0].nodeId})})]})}),(0,F.jsx)(xe.Z,{children:(0,F.jsx)(B,{rows:P[e].map((e=>{const{node:t,nodeId:a,...n}=e;return n})),columns:Object.keys(P[e][0]).slice(-3)})})]},e))),(0,F.jsx)(ye.Z1,{theme:ye.FE,text:j?s.isFormDataRequired?Q(e,z.data):ee(e,z.data):s.isFormDataRequired?X(e,z.data):$(e,z.data),language:_(e),showLineNumbers:!1,wrapLines:!0}),(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"column",borderRadius:10,background:"#d8f3dc",padding:10,marginTop:10,marginBottom:10},children:[(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,F.jsx)(K.mhH,{size:30,color:"#2d6a4f"}),(0,F.jsx)("span",{style:{color:"#2d6a4f",marginLeft:10,fontWeight:500},children:"You can also specify multiple values for a config parameter by specifying the node id"})]}),(0,F.jsx)("div",{style:{padding:10},children:(0,F.jsx)(ye.Z1,{theme:ye.FE,text:s.isFormDataRequired?te(e):'{\n    "overrideConfig": {\n        "openAIApiKey": {\n            "chatOpenAI_0": "sk-my-openai-1st-key",\n            "openAIEmbeddings_0": "sk-my-openai-2nd-key"\n        }\n    }\n}',language:_(e),showLineNumbers:!1,wrapLines:!0})})]})]}),(null===(a=O.data)||void 0===a?void 0:a.isStreaming)&&(0,F.jsxs)("p",{children:["Read\xa0",(0,F.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://docs.flowiseai.com/how-to-use#streaming",children:"here"}),"\xa0on how to stream response back to application"]})]}),"Share Chatbot"===e&&!j&&(0,F.jsx)(Ee,{isSessionMemory:s.isSessionMemory}),"Configuration"===e&&(0,F.jsx)(Ue,{})]},t)}))]})]}):null;return(0,D.createPortal)(ae,c)};var at=a(54279),nt=a(25599),ot=a(86008),st=a(91862),it=a(76387),rt=a(83795),lt=a(30530);const ct=[{label:"LangSmith",name:"langSmith",icon:a.p+"static/media/langchain.03999e05472fc2689e39.png",url:"https://smith.langchain.com",inputs:[{label:"Connect Credential",name:"credential",type:"credential",credentialNames:["langsmithApi"]},{label:"Project Name",name:"projectName",type:"string",optional:!0,description:"If not provided, default will be used",placeholder:"default"},{label:"On/Off",name:"status",type:"boolean",optional:!0}]},{label:"LangFuse",name:"langFuse",icon:a.p+"static/media/langfuse.428d797f60a43ef7494f.png",url:"https://langfuse.com",inputs:[{label:"Connect Credential",name:"credential",type:"credential",credentialNames:["langfuseApi"]},{label:"Release",name:"release",type:"string",optional:!0,description:"The release number/hash of the application to provide analytics grouped by release"},{label:"On/Off",name:"status",type:"boolean",optional:!0}]},{label:"LLMonitor",name:"llmonitor",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAGhUlEQVR4nOxYW0wj1xmeiz228R1fMNgG24BhMWA2BTY0CbQhSpU0aqVm2436QNRKvTxU6kNfou4qrdSmqdJWfc1L+9CumrbartRtpJWiQFQoS7XswmIuxmB8xRjfsAcbMx57ZiowHsb2+LaqNjzwPc3555z/fHP+c77/P8P5+kefAhcJ0OdNoBSXhGrhklAtXDhCnKcfCYGdckmHTKgQ8JsQDkBRSTwbTWdc8aQ3kaKeGSEQAEa1qpeNrUOaZh4HZu2TwrMPA9FPXXsbkUTD/hsSxjG9+tsDJr1EWGd/eyTxpxWnPYr+/wmJEM6Pr1lGtMr6XdO4v737h+WtHFlXGOsKmU7SdGt8SCMSMI3hI2wxENmMooFkOoVnYRAUIdx2qfCKSjaqVUp4CN3ztW6dUS7+1dzKYSZbc64aK8SFIb1E+LOJISn/fAJ7NPG3NfeT/YNKo2AQfKFd/S2LUccIrh89ujXzGK3FqSKhFqHgh8M9gxoFDJ4bsRzxx+WtT3b2qjs9owWBNyzG6xYjLS3bMfTmzBJOkNVG9V6fKrcKuZzfvDrS2SyBGGxiaezdz5YfB2P1sAEAgKKA1XDcGTu8plNxoBNWiiZ+s4D3MBCtMopdGCdNrcomfolx1hvyJFJ1sqHxOBj7YH6VXpRJU9vV1uaGCWnFTeVGnYTFCENgr1L6JYNmokPTrZBAIFjeZykY++vaDt1829pdhRD7KYtjeLkxms4wmzwY+kaf4fUunZjHpY0JDL/n8N1z+EoO+T/snjG92iQXAwBgkIlG2pSLe+yBY1+haVcQy+aYlhxJfrIToJtqIf+3Xxm9YTEy2QAAIOMjU9auX78yLGOcSgAASAq4bTtfpFc721jnrUgoksbe/88qWlindDb3+4V1d2ED8WDo3YmhKnrd1Sy5+dIgXBy+pWBsP5XOPw9pFJXSTkVhXAkdfO9f8+bTbbEdOzzOEfSr630GWmAIkvzMs/9k/wACgeE25YsdmvwndiukXzXr7jn8TJ/zvvCbfYa8vF1RSlmVrJpS4wS5Fi7NjhwIfL1bV2BDvTdnWyoIwaw3tBiI/uSL/fnm13raSwhtRBJvFp475WJWQg3XQ71KqRA52zfT7r2lYlma84UW/OH8s7KJ3yEtCqvz4JBkfBir/4YJqYTnGW2ZTSSZFEvSH5rJ/sW2k8kRWzH0vjPA6p89ZGoh/50XB1uE/Nu2nbKR5+eZTXROK6byrgXc2fDc2fCwTpoH+wq9Ydab5GIhwv3uVTMPLuoTTmH083OtLNXIMMO4nzquMncDhHLkWay5MNQuFTFfOWJoCj/L2C+b2kaLK6QvGzTXdKoz6keYDz1qlBB7yFzxJP080CLfPjhkcKU+3vK/1W/Kf807L1nnPPsroQMQODn2Y3o13fOfm16mTwmPa1ZIcYLYjKJVEj47ofVwgiys3gt69V17keu7du+YTt0hE+U5TRg0EwZNiQd7NHHfuUs3X+vSfueqGTmNfvw488H8aqW6lj1kcQx3FOrzzmZJj0LKfIsT5C9mn3grZ35HFH1/zkZns8EW+Q+Ge5HCXpQLeDfHrZLinEODvR46ET2Kel53tv5aSdO0O8h8m84S064gTpDtUhGfkQSiaeyjVdeHjxwYQ9mnrF0lGxGB4dhxZit2WD5vRaWe84be6jflhaRPJXvDrP94q0h2syR5Z8Nz1+41yUVqoYA6OVNpT5zlRiYTIOX+lQIe67wVhZGgqD/bnHTzbWuXRSUr70ZSlPMg+cAfXvCH3WxsAAAIJlkOv7tCxKsp9bwvvLB7lge4MPTTcetAi7xKf1YMqOVjOnWJ0YemHhQyTAkq7qE8lvZiI1plvrhBYGiioxUAqM0oWs8VCwbBb1oMPxq18Djnn40TxH93I79bWE8X11s0al8UFQLee5PPaUTn9asPPfr7umvBHyEodmIwCD6vV92wGJl7OZQ6/vm/l0MpjKwwql5CpwcVuTU+1HlagNJAMXxxL+o4vSgmMJyiKCkf0UmEV5TSYa1SyivayO548pezK7HjTM256r1KIzD0/S/0vGKqWHpWwYw7+OGjzerXsYYJ5dGvlk9ZO83FOlkFW7HD2zanLRSvf4rGCOVhUcsmjW0jWqUYYVfbJJ5dDERn3MG1cANU8niaH1br4cR6OAECgF4qNMrEahGfB5+IdSZHRNKYK570o0fP7ocVDer0uD1FgVEdF+4f4yWhWrgkVAsXjtD/AgAA///a3JKR/wDzvwAAAABJRU5ErkJggg==",url:"https://llmonitor.com",inputs:[{label:"Connect Credential",name:"credential",type:"credential",credentialNames:["llmonitorApi"]},{label:"On/Off",name:"status",type:"boolean",optional:!0}]}],dt=e=>{let{show:t,dialogProps:a,onCancel:o}=e;const s=document.getElementById("portal"),i=(0,r.I0)();(0,Ie.Z)();const l=function(){return i((0,d.yv)(...arguments))},c=function(){return i((0,d.sy)(...arguments))},[u,m]=(0,n.useState)({}),[f,g]=(0,n.useState)({}),x=(e,t,a)=>{let n={};n=Object.prototype.hasOwnProperty.call(u,t)?{...u}:{...u,[t]:{}},n[t][a]=e,m(n)};(0,n.useEffect)((()=>{if(a.chatflow&&a.chatflow.analytic)try{m(JSON.parse(a.chatflow.analytic))}catch(e){m({}),console.error(e)}return()=>{m({}),g({})}}),[a]),(0,n.useEffect)((()=>(i(t?{type:d.tS}:{type:d.Go}),()=>i({type:d.Go}))),[t,i]);const y=t?(0,F.jsxs)(I.Z,{onClose:o,open:t,fullWidth:!0,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,F.jsx)(T.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:"Analyse Chatflow"}),(0,F.jsx)(A.Z,{children:ct.map(((e,t)=>{return(0,F.jsxs)(fe.Z,{expanded:f[e.name]||!1,onChange:(a=e.name,(e,t)=>{const n={...f};n[a]=t,g(n)}),disableGutters:!0,children:[(0,F.jsx)(ge.Z,{expandIcon:(0,F.jsx)(ve.Z,{}),"aria-controls":e.name,id:e.name,children:(0,F.jsxs)(at.ZP,{style:{padding:0,margin:0},alignItems:"center",children:[(0,F.jsx)(nt.Z,{children:(0,F.jsx)("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white"},children:(0,F.jsx)("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:"AI",src:e.icon})})}),(0,F.jsx)(ot.Z,{sx:{ml:1},primary:e.label,secondary:(0,F.jsx)("a",{target:"_blank",rel:"noreferrer",href:e.url,children:e.url})}),u[e.name]&&u[e.name].status&&(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignContent:"center",alignItems:"center",background:"#d8f3dc",borderRadius:15,padding:5,paddingLeft:7,paddingRight:7,marginRight:10},children:[(0,F.jsx)("div",{style:{width:15,height:15,borderRadius:"50%",backgroundColor:"#70e000"}}),(0,F.jsx)("span",{style:{color:"#006400",marginLeft:10},children:"ON"})]})]})}),(0,F.jsx)(xe.Z,{children:e.inputs.map(((t,a)=>{var n,o;return(0,F.jsxs)(p.Z,{sx:{p:2},children:[(0,F.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:(0,F.jsxs)(v.Z,{children:[t.label,!t.optional&&(0,F.jsx)("span",{style:{color:"red"},children:"\xa0*"}),t.description&&(0,F.jsx)(Ze.H,{style:{marginLeft:10},title:t.description})]})}),f[e.name]&&"credential"===t.type&&(0,F.jsx)(it.Z,{data:u[e.name]?{credential:u[e.name].credentialId}:{},inputParam:t,onSelect:t=>x(t,e.name,"credentialId")}),f[e.name]&&"boolean"===t.type&&(0,F.jsx)(rt.D,{onChange:a=>x(a,e.name,t.name),value:u[e.name]?u[e.name][t.name]:null!==(n=t.default)&&void 0!==n&&n}),f[e.name]&&("string"===t.type||"password"===t.type||"number"===t.type)&&(0,F.jsx)(lt.I,{inputParam:t,onChange:a=>x(a,e.name,t.name),value:u[e.name]?u[e.name][t.name]:null!==(o=t.default)&&void 0!==o?o:""})]},a)}))})]},t);var a}))}),(0,F.jsx)(st.Z,{children:(0,F.jsx)(Se.S,{variant:"contained",onClick:async()=>{try{const e=await De.Z.updateChatflow(a.chatflow.id,{analytic:JSON.stringify(u)});e.data&&(l({message:"Analytic Configuration Saved",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>c(e),children:(0,F.jsx)(K.kLi,{})})}}),i({type:d.ch,chatflow:e.data})),o()}catch(e){const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);l({message:"Failed to save Analytic Configuration: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>c(e),children:(0,F.jsx)(K.kLi,{})})}})}},children:"Save"})})]}):null;return(0,D.createPortal)(y,s)};var ut=a(92426),ht=a.n(ut),pt=a(17145),mt=a(86294),ft=a(39410),gt=a(288),xt=a(95803),yt=a.n(xt),vt=a(33485),wt=a(48598),jt=a(52053),bt=a.n(jt),Ct=a(47804);const kt=a.p+"static/media/account.bccec459ac1b2deab2d2.png";const St=a.p+"static/media/message_empty.e64ce71827642b3667c24731d5cfaaa0.svg";var Zt=a(31986);const Dt=(0,n.memo)(Zt.D,((e,t)=>e.children===t.children));var It=a(51267),Tt=a(57537);const At={javascript:".js",python:".py",java:".java",c:".c",cpp:".cpp","c++":".cpp","c#":".cs",ruby:".rb",php:".php",swift:".swift","objective-c":".m",kotlin:".kt",typescript:".ts",go:".go",perl:".pl",rust:".rs",scala:".scala",haskell:".hs",lua:".lua",shell:".sh",sql:".sql",html:".html",css:".css"},Pt=(0,n.memo)((e=>{var t;let{language:a,chatflowid:o,isDialog:s,value:i}=e;const r=(0,g.Z)(),[l,c]=(0,n.useState)(null),d=Boolean(l),u=()=>{c(null)};return(0,F.jsxs)("div",{style:{width:s?"":300},children:[(0,F.jsx)(p.Z,{sx:{color:"white",background:null===(t=r.palette)||void 0===t?void 0:t.common.dark,p:1,borderTopLeftRadius:10,borderTopRightRadius:10},children:(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[a,(0,F.jsx)("div",{style:{flex:1}}),(0,F.jsx)(y.Z,{size:"small",title:"Copy",color:"success",onClick:e=>{navigator.clipboard&&navigator.clipboard.writeText&&(navigator.clipboard.writeText(i),c(e.currentTarget),setTimeout((()=>{u()}),1500))},children:(0,F.jsx)(K.Rx8,{})}),(0,F.jsx)(ke.ZP,{open:d,anchorEl:l,onClose:u,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,F.jsx)(v.Z,{variant:"h6",sx:{pl:1,pr:1,color:"white",background:r.palette.success.dark},children:"Copied!"})}),(0,F.jsx)(y.Z,{size:"small",title:"Download",color:"primary",onClick:()=>{const e=At[a]||".file",t="file-".concat(o).concat(e);if(!t)return;const n=new Blob([i],{type:"text/plain"}),s=URL.createObjectURL(n),r=document.createElement("a");r.download=t,r.href=s,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)},children:(0,F.jsx)(K.DjJ,{})})]})}),(0,F.jsx)(It.Z,{language:a,style:Tt.Z,customStyle:{margin:0},children:i})]})}));Pt.displayName="CodeBlock";var Nt=a(46804),Rt=a.n(Nt);const Mt=e=>{var t;let{show:a,dialogProps:o,onCancel:s}=e;const i=document.getElementById("portal"),l=(0,r.v9)((e=>e.customization)),[c,d]=(0,n.useState)({});(0,n.useEffect)((()=>(o.data&&d(o.data),()=>{d({})})),[o]);const u=a?(0,F.jsxs)(I.Z,{onClose:s,open:a,fullWidth:!0,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,F.jsx)(T.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:null!==(t=o.title)&&void 0!==t?t:"Source Documents"}),(0,F.jsx)(A.Z,{children:(0,F.jsx)(Rt(),{theme:l.isDarkMode?"ocean":"rjv-default",style:{padding:10,borderRadius:10},src:c,name:null,quotesOnKeys:!1,enableClipboard:!1,displayDataTypes:!1})})]}):null;return(0,D.createPortal)(u,i)};var Et=a(95550);const Lt=e=>z.Z.get("/internal-chatmessage/".concat(e)),Ot=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return z.Z.get("/chatmessage/".concat(e),{params:{order:"DESC",...t}})},Ft=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return z.Z.get("/chatmessage/".concat(e),{params:{order:"ASC",...t}})},Bt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return z.Z.delete("/chatmessage/".concat(e),{params:{...t}})};var qt=a(60806);a(6882);const zt=(0,n.forwardRef)((function(e,t){let{value:a,onClick:n}=e;return(0,F.jsx)(vt.Z,{style:{borderRadius:15,border:"1px solid #e0e0e0"},onClick:n,ref:t,children:a})})),Jt=e=>{let{show:t,dialogProps:a,onCancel:o}=e;const s=document.getElementById("portal"),i=(0,r.I0)(),l=(0,g.Z)(),c=(0,r.v9)((e=>e.customization)),{confirm:u}=(0,qt.Z)();(0,Ie.Z)();const m=function(){return i((0,d.yv)(...arguments))},f=function(){return i((0,d.sy)(...arguments))},[x,y]=(0,n.useState)([]),[v,w]=(0,n.useState)([]),[b,C]=(0,n.useState)([]),[k,S]=(0,n.useState)(0),[Z,P]=(0,n.useState)(!1),[N,R]=(0,n.useState)({}),[M,E]=(0,n.useState)([]),[L,O]=(0,n.useState)((new Date).setMonth((new Date).getMonth()-1)),[B,z]=(0,n.useState)(new Date),J=(0,U.Z)(Ot),H=(0,U.Z)(Ft),W=e=>{var t,a;const n=e.chatId,o=null!==(t=e.memoryType)&&void 0!==t?t:"null",s=null!==(a=e.sessionId)&&void 0!==a?a:"null";return"".concat(n,"_").concat(o,"_").concat(s)},G=e=>{let[t,a,...n]=e.split("_");const o=t,s=a,i=n.join("_"),r={chatId:o};return"null"!==s&&(r.memoryType=s),"null"!==i&&(r.sessionId=i),r},Y=(e,t)=>{R({data:e,title:t}),P(!0)};(0,n.useEffect)((()=>{H.data&&(e=>{let t="";const a=[];for(let n=0;n<e.length;n+=1){const o=e[n];if(t){const e=o.createdDate.split("T")[0];e!==t&&(t=e,a.push({message:o.createdDate,type:"timeMessage"}))}else t=o.createdDate.split("T")[0],a.push({message:o.createdDate,type:"timeMessage"});const s={...o,message:o.content,type:o.role};o.sourceDocuments&&(s.sourceDocuments=JSON.parse(o.sourceDocuments)),o.usedTools&&(s.usedTools=JSON.parse(o.usedTools)),o.fileAnnotations&&(s.fileAnnotations=JSON.parse(o.fileAnnotations)),a.push(s)}C(a)})(H.data)}),[H.data]),(0,n.useEffect)((()=>{if(J.data){w(J.data);const e=(e=>{const t={},a=[];for(let n=0;n<e.length;n+=1){const o=W(e[n]),s=e[n];Object.prototype.hasOwnProperty.call(t,o)?Object.prototype.hasOwnProperty.call(t,o)&&1===t[o].counter&&(t[o]={counter:2,item:{...t[o].item,apiContent:"apiMessage"===t[o].item.role?"Bot: ".concat(t[o].item.content):"User: ".concat(t[o].item.content),userContent:"apiMessage"===s.role?"Bot: ".concat(s.content):"User: ".concat(s.content)}},a.push(t[o].item)):t[o]={counter:1,item:e[n]}}if(y(a),a.length)return W(a[0])})(J.data);S(0),e&&H.request(a.chatflow.id,G(e))}}),[J.data]),(0,n.useEffect)((()=>(a.chatflow&&J.request(a.chatflow.id),()=>{y([]),w([]),C([]),E([]),S(0),O((new Date).setMonth((new Date).getMonth()-1)),z(new Date)})),[a]),(0,n.useEffect)((()=>(i(t?{type:d.tS}:{type:d.Go}),()=>i({type:d.Go}))),[t,i]);const _=t?(0,F.jsxs)(I.Z,{onClose:o,open:t,fullWidth:!0,maxWidth:x&&0==x.length?"md":"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,F.jsx)(T.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[a.title,(0,F.jsx)("div",{style:{flex:1}}),(0,F.jsx)(h.Z,{variant:"outlined",onClick:()=>(()=>{const e={};for(let a=0;a<v.length;a+=1){const o=v[a],s=W(o),i={content:o.content,role:"apiMessage"===o.role?"bot":"user",time:o.createdDate};var t,n;o.sourceDocuments&&(i.sourceDocuments=JSON.parse(o.sourceDocuments)),o.usedTools&&(i.usedTools=JSON.parse(o.usedTools)),o.fileAnnotations&&(i.fileAnnotations=JSON.parse(o.fileAnnotations)),Object.prototype.hasOwnProperty.call(e,s)?Object.prototype.hasOwnProperty.call(e,s)&&(e[s].messages=[...e[s].messages,i]):e[s]={id:o.chatId,source:"INTERNAL"===o.chatType?"UI":"API/Embed",sessionId:null!==(t=o.sessionId)&&void 0!==t?t:null,memoryType:null!==(n=o.memoryType)&&void 0!==n?n:null,messages:[i]}}const o=[];for(const a in e)o.push({...e[a]});for(let a=0;a<o.length;a+=1)o[a].messages=o[a].messages.reverse();const s=JSON.stringify(o,null,2),i="data:application/json;charset=utf-8,"+encodeURIComponent(s),r="".concat(a.chatflow.id,"-Message.json");let l=document.createElement("a");l.setAttribute("href",i),l.setAttribute("download",r),l.click()})(),startIcon:(0,F.jsx)(K.D57,{}),children:"Export"})]})}),(0,F.jsx)(A.Z,{children:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%",marginBottom:10},children:[(0,F.jsxs)("div",{style:{marginRight:10},children:[(0,F.jsx)("b",{style:{marginRight:10},children:"From Date"}),(0,F.jsx)(bt(),{selected:L,onChange:e=>(e=>{O(e),J.request(a.chatflow.id,{startDate:e,endDate:B,chatType:M.length?M:void 0})})(e),selectsStart:!0,startDate:L,endDate:B,customInput:(0,F.jsx)(zt,{})})]}),(0,F.jsxs)("div",{style:{marginRight:10},children:[(0,F.jsx)("b",{style:{marginRight:10},children:"To Date"}),(0,F.jsx)(bt(),{selected:B,onChange:e=>(e=>{z(e),J.request(a.chatflow.id,{endDate:e,startDate:L,chatType:M.length?M:void 0})})(e),selectsEnd:!0,startDate:L,endDate:B,minDate:L,maxDate:new Date,customInput:(0,F.jsx)(zt,{})})]}),(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",minWidth:"200px",marginRight:10},children:[(0,F.jsx)("b",{style:{marginRight:10},children:"Source"}),(0,F.jsx)(Et.j,{name:"chatType",options:[{label:"UI",name:"INTERNAL"},{label:"API/Embed",name:"EXTERNAL"}],onSelect:e=>{return E(t=e),void J.request(a.chatflow.id,{chatType:t.length?t:void 0,startDate:L,endDate:B});var t},value:M,formControlSx:{mt:0}},JSON.stringify(M))]}),(0,F.jsx)("div",{style:{flex:1}})]}),(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[x&&0==x.length&&(0,F.jsxs)(ee.Z,{sx:{alignItems:"center",justifyContent:"center",width:"100%"},flexDirection:"column",children:[(0,F.jsx)(p.Z,{sx:{p:5,height:"auto"},children:(0,F.jsx)("img",{style:{objectFit:"cover",height:"20vh",width:"auto"},src:St,alt:"msgEmptySVG"})}),(0,F.jsx)("div",{children:"No Messages"})]}),x&&x.length>0&&(0,F.jsx)("div",{style:{flexBasis:"40%"},children:(0,F.jsx)(p.Z,{sx:{overflowY:"auto",display:"flex",flexGrow:1,flexDirection:"column",maxHeight:"calc(100vh - 260px)"},children:x.map(((e,t)=>(0,F.jsx)(vt.Z,{sx:{p:0,borderRadius:"".concat(c.borderRadius,"px"),boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)",mt:1,ml:1,mr:1,mb:t===x.length-1?1:0},selected:k===t,onClick:()=>((e,t)=>{S(e),H.request(a.chatflow.id,G(W(t)))})(t,e),children:(0,F.jsx)(at.ZP,{alignItems:"center",children:(0,F.jsx)(ot.Z,{primary:(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,F.jsx)("span",{children:null===e||void 0===e?void 0:e.userContent}),(0,F.jsx)("div",{style:{maxHeight:"100px",maxWidth:"400px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:null===e||void 0===e?void 0:e.apiContent})]}),secondary:ht()(e.createdDate).format("MMMM Do YYYY, h:mm:ss a")})})},t)))})}),x&&x.length>0&&(0,F.jsxs)("div",{style:{flexBasis:"60%",paddingRight:"30px"},children:[b&&b.length>1&&(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,F.jsxs)("div",{style:{flex:1,marginLeft:"20px",marginBottom:"15px",marginTop:"10px"},children:[b[1].sessionId&&(0,F.jsxs)("div",{children:["Session Id:\xa0",(0,F.jsx)("b",{children:b[1].sessionId})]}),b[1].chatType&&(0,F.jsxs)("div",{children:["Source:\xa0",(0,F.jsx)("b",{children:"INTERNAL"===b[1].chatType?"UI":"API/Embed"})]}),b[1].memoryType&&(0,F.jsxs)("div",{children:["Memory:\xa0",(0,F.jsx)("b",{children:b[1].memoryType})]})]}),(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignContent:"center",alignItems:"end"},children:[(0,F.jsx)(Se.S,{sx:{height:"max-content",width:"max-content"},variant:"outlined",color:"error",title:"Clear Message",onClick:()=>(async e=>{const t={title:"Clear Session",description:e.sessionId&&e.memoryType?"Are you sure you want to clear session id: ".concat(e.sessionId," from ").concat(e.memoryType,"?"):"Are you sure you want to clear messages?",confirmButtonName:"Clear",cancelButtonName:"Cancel"},n=await u(t),o=a.chatflow.id;if(n)try{const t={chatflowid:o,isClearFromViewMessageDialog:!0};e.chatId&&(t.chatId=e.chatId),e.chatType&&(t.chatType=e.chatType),e.memoryType&&(t.memoryType=e.memoryType),e.sessionId&&(t.sessionId=e.sessionId),await Bt(o,t);const a=e.sessionId&&e.memoryType?"Succesfully cleared session id: ".concat(e.sessionId," from ").concat(e.memoryType):"Succesfully cleared messages";m({message:a,options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>f(e),children:(0,F.jsx)(K.kLi,{})})}}),J.request(o)}catch(s){const e=s.response.data||"".concat(s.response.status,": ").concat(s.response.statusText);m({message:e,options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>f(e),children:(0,F.jsx)(K.kLi,{})})}})}})(b[1]),startIcon:(0,F.jsx)(K.W7f,{}),children:"Clear"}),b[1].sessionId&&(0,F.jsx)(j.Z,{title:"At your left \ud83d\udc48 you will see the Memory node that was used in this conversation. You need to have the matching Memory node with same parameters in the canvas, in order to delete the session conversations stored on the Memory node",placement:"bottom",children:(0,F.jsx)("h5",{style:{cursor:"pointer",color:l.palette.primary.main},children:"Why my session is not deleted?"})})]})]}),(0,F.jsx)("div",{style:{marginLeft:"20px",border:"1px solid #e0e0e0",borderRadius:"".concat(c.borderRadius,"px")},className:"cloud-message",children:(0,F.jsx)("div",{style:{width:"100%",height:"100%"},children:b&&b.map(((e,t)=>"apiMessage"===e.type||"userMessage"===e.type?(0,F.jsxs)(p.Z,{sx:{background:"apiMessage"===e.type?l.palette.asyncSelect.main:"",pl:1,pr:1},style:{display:"flex",justifyContent:"center",alignContent:"center"},children:["apiMessage"===e.type?(0,F.jsx)("img",{style:{marginLeft:"10px"},src:Ct,alt:"AI",width:"25",height:"25",className:"boticon"}):(0,F.jsx)("img",{style:{marginLeft:"10px"},src:kt,alt:"Me",width:"25",height:"25",className:"usericon"}),(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[e.usedTools&&(0,F.jsx)("div",{style:{display:"block",flexDirection:"row",width:"100%"},children:e.usedTools.map(((e,t)=>(0,F.jsx)(wt.Z,{size:"small",label:e.tool,component:"a",sx:{mr:1,mt:1},variant:"outlined",clickable:!0,onClick:()=>Y(e,"Used Tools")},t)))}),(0,F.jsx)("div",{className:"markdownanswer",children:(0,F.jsx)(Dt,{remarkPlugins:[ft.Z,gt.Z],rehypePlugins:[pt.Z,mt.Z],components:{code(e){let{inline:t,className:n,children:o,...s}=e;const i=/language-(\w+)/.exec(n||"");return t?(0,F.jsx)("code",{className:n,...s,children:o}):(0,F.jsx)(Pt,{chatflowid:a.chatflow.id,isDialog:!0,language:i&&i[1]||"",value:String(o).replace(/\n$/,""),...s},Math.random())}},children:e.message})}),e.fileAnnotations&&(0,F.jsx)("div",{style:{display:"block",flexDirection:"row",width:"100%"},children:e.fileAnnotations.map(((e,t)=>(0,F.jsx)(h.Z,{sx:{fontSize:"0.85rem",textTransform:"none",mb:1,mr:1},variant:"outlined",onClick:()=>(async e=>{try{const t=await yt().post("".concat(q.v2,"/api/v1/openai-assistants-file"),{fileName:e.fileName},{responseType:"blob"}),a=new Blob([t.data],{type:t.headers["content-type"]}),n=window.URL.createObjectURL(a),o=document.createElement("a");o.href=n,o.download=e.fileName,document.body.appendChild(o),o.click(),o.remove()}catch(t){console.error("Download failed:",t)}})(e),endIcon:(0,F.jsx)(K.DjJ,{color:l.palette.primary.main}),children:e.fileName},t)))}),e.sourceDocuments&&(0,F.jsx)("div",{style:{display:"block",flexDirection:"row",width:"100%"},children:(0,Qe.oY)(e).map(((e,t)=>{const a=e.metadata&&e.metadata.source?(0,Qe.K2)(e.metadata.source):void 0;return(0,F.jsx)(wt.Z,{size:"small",label:a?"/"===a.pathname.substring(0,15)?a.host:"".concat(a.pathname.substring(0,15),"..."):"".concat(e.pageContent.substring(0,15),"..."),component:"a",sx:{mr:1,mb:1},variant:"outlined",clickable:!0,onClick:()=>{return a?(t=e.metadata.source,void window.open(t,"_blank")):Y(e);var t}},t)}))})]})]},t):(0,F.jsx)(p.Z,{sx:{background:l.palette.timeMessage.main,p:2},style:{display:"flex",justifyContent:"center",alignContent:"center"},children:ht()(e.message).format("MMMM Do YYYY, h:mm:ss a")},t)))})})]})]}),(0,F.jsx)(Mt,{show:Z,dialogProps:N,onCancel:()=>P(!1)})]})})]}):null;return(0,D.createPortal)(_,s)},Ht=e=>{let{chatflow:t,handleSaveFlow:a,handleDeleteFlow:o,handleLoadFlow:s}=e;const i=(0,g.Z)(),c=(0,r.I0)(),u=(0,l.s0)(),h=(0,n.useRef)(),m=(0,n.useRef)(),[f,x]=(0,n.useState)(null),[y,w]=(0,n.useState)(""),[j,b]=(0,n.useState)(!1),[C,k]=(0,n.useState)(!1),[S,Z]=(0,n.useState)(!1),[D,I]=(0,n.useState)({}),[T,A]=(0,n.useState)(!1),[P,N]=(0,n.useState)({}),[R,M]=(0,n.useState)(!1),[E,L]=(0,n.useState)({}),O=(0,U.Z)(De.Z.updateChatflow),B=(0,r.v9)((e=>e.canvas));return(0,n.useEffect)((()=>{O.data&&(w(O.data.name),c({type:d.ch,chatflow:O.data})),x(!1)}),[O.data]),(0,n.useEffect)((()=>{t&&w(t.name)}),[t]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(p.Z,{children:(0,F.jsx)(Q.Z,{title:"Back",sx:{borderRadius:"50%"},children:(0,F.jsx)($.Z,{variant:"rounded",sx:{...i.typography.commonAvatar,...i.typography.mediumAvatar,transition:"all .2s ease-in-out",background:i.palette.secondary.light,color:i.palette.secondary.dark,"&:hover":{background:i.palette.secondary.dark,color:i.palette.secondary.light}},color:"inherit",onClick:()=>window.history.state&&window.history.state.idx>0?u(-1):u("/",{replace:!0}),children:(0,F.jsx)(K.ed9,{stroke:1.5,size:"1.3rem"})})})}),(0,F.jsxs)(p.Z,{sx:{flexGrow:1},children:[!f&&(0,F.jsxs)(ee.Z,{flexDirection:"row",children:[(0,F.jsxs)(v.Z,{sx:{fontSize:"1.5rem",fontWeight:600,ml:2},children:[B.isDirty&&(0,F.jsx)("strong",{style:{color:i.palette.orange.main},children:"*"})," ",y]}),(null===t||void 0===t?void 0:t.id)&&(0,F.jsx)(Q.Z,{title:"Edit Name",sx:{borderRadius:"50%"},children:(0,F.jsx)($.Z,{variant:"rounded",sx:{...i.typography.commonAvatar,...i.typography.mediumAvatar,transition:"all .2s ease-in-out",ml:1,background:i.palette.secondary.light,color:i.palette.secondary.dark,"&:hover":{background:i.palette.secondary.dark,color:i.palette.secondary.light}},color:"inherit",onClick:()=>x(!0),children:(0,F.jsx)(K.TRY,{stroke:1.5,size:"1.3rem"})})})]}),f&&(0,F.jsxs)(ee.Z,{flexDirection:"row",children:[(0,F.jsx)(te.Z,{size:"small",inputRef:h,sx:{width:"50%",ml:2},defaultValue:y}),(0,F.jsx)(Q.Z,{title:"Save Name",sx:{borderRadius:"50%"},children:(0,F.jsx)($.Z,{variant:"rounded",sx:{...i.typography.commonAvatar,...i.typography.mediumAvatar,transition:"all .2s ease-in-out",background:i.palette.success.light,color:i.palette.success.dark,ml:1,"&:hover":{background:i.palette.success.dark,color:i.palette.success.light}},color:"inherit",onClick:()=>{if(t.id){const e={name:h.current.value};O.request(t.id,e)}},children:(0,F.jsx)(K.NOm,{stroke:1.5,size:"1.3rem"})})}),(0,F.jsx)(Q.Z,{title:"Cancel",sx:{borderRadius:"50%"},children:(0,F.jsx)($.Z,{variant:"rounded",sx:{...i.typography.commonAvatar,...i.typography.mediumAvatar,transition:"all .2s ease-in-out",background:i.palette.error.light,color:i.palette.error.dark,ml:1,"&:hover":{background:i.palette.error.dark,color:i.palette.error.light}},color:"inherit",onClick:()=>x(!1),children:(0,F.jsx)(K.kLi,{stroke:1.5,size:"1.3rem"})})})]})]}),(0,F.jsxs)(p.Z,{children:[(null===t||void 0===t?void 0:t.id)&&(0,F.jsx)(Q.Z,{title:"API Endpoint",sx:{borderRadius:"50%",mr:2},children:(0,F.jsx)($.Z,{variant:"rounded",sx:{...i.typography.commonAvatar,...i.typography.mediumAvatar,transition:"all .2s ease-in-out",background:i.palette.canvasHeader.deployLight,color:i.palette.canvasHeader.deployDark,"&:hover":{background:i.palette.canvasHeader.deployDark,color:i.palette.canvasHeader.deployLight}},color:"inherit",onClick:()=>{let e=!1;try{const a=JSON.parse(t.flowData).nodes;for(const t of a)if(t.data.inputParams.find((e=>"file"===e.type))){e=!0;break}}catch(n){console.error(n)}let a=!1;try{const e=JSON.parse(t.flowData).nodes;for(const t of e)if(t.data.inputParams.find((e=>"sessionId"===e.name))){a=!0;break}}catch(n){console.error(n)}I({title:"Embed in website or use as API",chatflowid:t.id,chatflowApiKeyId:t.apikeyid,isFormDataRequired:e,isSessionMemory:a}),Z(!0)},children:(0,F.jsx)(K.seM,{stroke:1.5,size:"1.3rem"})})}),(0,F.jsx)(Q.Z,{title:"Save Chatflow",sx:{borderRadius:"50%",mr:2},children:(0,F.jsx)($.Z,{variant:"rounded",sx:{...i.typography.commonAvatar,...i.typography.mediumAvatar,transition:"all .2s ease-in-out",background:i.palette.canvasHeader.saveLight,color:i.palette.canvasHeader.saveDark,"&:hover":{background:i.palette.canvasHeader.saveDark,color:i.palette.canvasHeader.saveLight}},color:"inherit",onClick:()=>{t.id?a(y):k(!0)},children:(0,F.jsx)(K.e11,{stroke:1.5,size:"1.3rem"})})}),(0,F.jsx)(Q.Z,{ref:m,title:"Settings",sx:{borderRadius:"50%"},children:(0,F.jsx)($.Z,{variant:"rounded",sx:{...i.typography.commonAvatar,...i.typography.mediumAvatar,transition:"all .2s ease-in-out",background:i.palette.canvasHeader.settingsLight,color:i.palette.canvasHeader.settingsDark,"&:hover":{background:i.palette.canvasHeader.settingsDark,color:i.palette.canvasHeader.settingsLight}},onClick:()=>b(!j),children:(0,F.jsx)(K.iCC,{stroke:1.5,size:"1.3rem"})})})]}),(0,F.jsx)(ue,{chatflow:t,isSettingsOpen:j,anchorEl:m.current,onClose:()=>b(!1),onSettingsItemClick:e=>{if(b(!1),"deleteChatflow"===e)o();else if("analyseChatflow"===e)N({title:"Analyse Chatflow",chatflow:t}),A(!0);else if("viewMessages"===e)L({title:"View Messages",chatflow:t}),M(!0);else if("duplicateChatflow"===e)try{localStorage.setItem("duplicatedFlowData",t.flowData),window.open("".concat(q.kZ,"/canvas"),"_blank")}catch(a){console.error(a)}else if("exportChatflow"===e)try{const e=JSON.parse(t.flowData);let a=JSON.stringify((0,Qe.mx)(e),null,2),n="data:application/json;charset=utf-8,"+encodeURIComponent(a),o="".concat(t.name," Chatflow.json"),s=document.createElement("a");s.setAttribute("href",n),s.setAttribute("download",o),s.click()}catch(a){console.error(a)}},onUploadFile:e=>{b(!1),s(e)}}),(0,F.jsx)(he.Z,{show:C,dialogProps:{title:"Save New Chatflow",confirmButtonName:"Save",cancelButtonName:"Cancel"},onCancel:()=>k(!1),onConfirm:e=>{k(!1),a(e)}}),(0,F.jsx)(tt,{show:S,dialogProps:D,onCancel:()=>Z(!1)}),(0,F.jsx)(dt,{show:T,dialogProps:P,onCancel:()=>A(!1)}),(0,F.jsx)(Jt,{show:R,dialogProps:E,onCancel:()=>M(!1)})]})};var Ut=a(11100),Wt=a(10907);const Kt=(0,x.ZP)(Wt.Z)((e=>{let{theme:t,color:a="primary"}=e;return{color:"white",backgroundColor:t.palette[a].main,"&:hover":{backgroundColor:t.palette[a].main,backgroundImage:"linear-gradient(rgb(0 0 0/10%) 0 0)"}}})),Gt=e=>{let{nodesData:t,node:a}=e;const o=(0,g.Z)(),s=(0,r.v9)((e=>e.customization)),i=(0,r.I0)(),[l,c]=(0,n.useState)(""),[u,h]=(0,n.useState)({}),[m,f]=(0,n.useState)(!1),[x,y]=(0,n.useState)({}),j=(0,n.useRef)(null),b=(0,n.useRef)(m),k=(0,n.useRef)(),S=()=>{const e=k.current;e&&(e.scrollTop=0)},Z=e=>{c(e),setTimeout((()=>{if(e){const a=(e=>t.filter((t=>{const a=t.name.toLowerCase().includes(e.toLowerCase()),n=t.category.toLowerCase().includes(e.toLowerCase());return a||n})))(e);D(a,!0),S()}else""===e&&(D(t),S())}),500)},D=(e,t)=>{const a={},n=e.reduce((function(e,n){return e[n.category]=e[n.category]||[],e[n.category].push(n),a[n.category]=!!t,e}),Object.create(null));h(n),((e,t,a)=>{var n;const o={...e},s=null!==(n=o["Vector Stores"])&&void 0!==n?n:[],i=[],r=[];for(const l of s)"DEPRECATING"===l.badge?i.push(l):r.push(l);delete o["Vector Stores"],i.length&&(o["Vector Stores;DEPRECATING"]=i,t["Vector Stores;DEPRECATING"]=!!a),r.length&&(o["Vector Stores;NEW"]=r,t["Vector Stores;NEW"]=!!a),h(o)})(n,a,t),y(a)},I=e=>(t,a)=>{const n={...x};n[e]=a,y(n)},T=e=>{j.current&&j.current.contains(e.target)||f(!1)};return(0,n.useEffect)((()=>{!0===b.current&&!1===m&&j.current.focus(),b.current=m}),[m]),(0,n.useEffect)((()=>{a&&f(!1)}),[a]),(0,n.useEffect)((()=>{t&&(D(t),i({type:d.gU,componentNodes:t}))}),[t,i]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Kt,{sx:{left:20,top:20},ref:j,size:"small",color:"primary","aria-label":"add",title:"Add Node",onClick:()=>{f((e=>!e))},children:m?(0,F.jsx)(K.UrD,{}):(0,F.jsx)(K.SC9,{})}),(0,F.jsx)(ae.Z,{placement:"bottom-end",open:m,anchorEl:j.current,role:void 0,transition:!0,disablePortal:!0,popperOptions:{modifiers:[{name:"offset",options:{offset:[-40,14]}}]},sx:{zIndex:1e3},children:e=>{let{TransitionProps:t}=e;return(0,F.jsx)(re.Z,{in:m,...t,children:(0,F.jsx)(N.Z,{children:(0,F.jsx)(ne.d,{onClickAway:T,children:(0,F.jsxs)(C.Z,{border:!1,elevation:16,content:!1,boxShadow:!0,shadow:o.shadows[16],children:[(0,F.jsxs)(p.Z,{sx:{p:2},children:[(0,F.jsx)(ee.Z,{children:(0,F.jsx)(v.Z,{variant:"h4",children:"Add Nodes"})}),(0,F.jsx)(Ce.Z,{sx:{width:"100%",pr:2,pl:2,my:2},id:"input-search-node",value:l,onChange:e=>Z(e.target.value),placeholder:"Search nodes",startAdornment:(0,F.jsx)(Ut.Z,{position:"start",children:(0,F.jsx)(K.jVj,{stroke:1.5,size:"1rem",color:o.palette.grey[500]})}),endAdornment:(0,F.jsx)(Ut.Z,{position:"end",sx:{cursor:"pointer",color:o.palette.grey[500],"&:hover":{color:o.palette.grey[900]}},title:"Clear Search",children:(0,F.jsx)(K.kLi,{stroke:1.5,size:"1rem",onClick:()=>Z(""),style:{cursor:"pointer"}})}),"aria-describedby":"search-helper-text",inputProps:{"aria-label":"weight"}}),(0,F.jsx)(w.Z,{})]}),(0,F.jsx)(ie(),{containerRef:e=>{k.current=e},style:{height:"100%",maxHeight:"calc(100vh - 320px)",overflowX:"hidden"},children:(0,F.jsx)(p.Z,{sx:{p:2},children:(0,F.jsx)(oe.Z,{sx:{width:"100%",maxWidth:370,py:0,borderRadius:"10px",[o.breakpoints.down("md")]:{maxWidth:370},"& .MuiListItemSecondaryAction-root":{top:22},"& .MuiDivider-root":{my:0},"& .list-container":{pl:7}},children:Object.keys(u).sort().map((e=>"Vector Stores"===e?(0,F.jsx)(F.Fragment,{}):(0,F.jsxs)(fe.Z,{expanded:x[e]||!1,onChange:I(e),disableGutters:!0,children:[(0,F.jsx)(ge.Z,{expandIcon:(0,F.jsx)(ve.Z,{}),"aria-controls":"nodes-accordian-".concat(e),id:"nodes-accordian-header-".concat(e),children:e.split(";").length>1?(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,F.jsx)(v.Z,{variant:"h5",children:e.split(";")[0]}),"\xa0",(0,F.jsx)(wt.Z,{sx:{width:"max-content",fontWeight:700,fontSize:"0.65rem",background:"DEPRECATING"===e.split(";")[1]?o.palette.warning.main:o.palette.teal.main,color:"DEPRECATING"!==e.split(";")[1]?"white":"inherit"},size:"small",label:e.split(";")[1]})]}):(0,F.jsx)(v.Z,{variant:"h5",children:e})}),(0,F.jsx)(xe.Z,{children:u[e].map(((t,a)=>(0,F.jsxs)("div",{onDragStart:e=>((e,t)=>{e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.effectAllowed="move"})(e,t),draggable:!0,children:[(0,F.jsx)(vt.Z,{sx:{p:0,borderRadius:"".concat(s.borderRadius,"px"),cursor:"move"},children:(0,F.jsxs)(at.ZP,{alignItems:"center",children:[(0,F.jsx)(nt.Z,{children:(0,F.jsx)("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white"},children:(0,F.jsx)("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:t.name,src:"".concat(q.v2,"/api/v1/node-icon/").concat(t.name)})})}),(0,F.jsx)(ot.Z,{sx:{ml:1},primary:(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,F.jsx)("span",{children:t.label}),"\xa0",t.badge&&(0,F.jsx)(wt.Z,{sx:{width:"max-content",fontWeight:700,fontSize:"0.65rem",background:"DEPRECATING"===t.badge?o.palette.warning.main:o.palette.teal.main,color:"DEPRECATING"!==t.badge?"white":"inherit"},size:"small",label:t.badge})]}),secondary:t.description})]})}),a===u[e].length-1?null:(0,F.jsx)(w.Z,{})]},t.name)))})]},e)))})})})]})})})})}})]})};var Yt=a(48349),_t=a(1675),Vt=a(94267);const Xt=(e,t)=>z.Z.post("/internal-prediction/".concat(e),t),Qt=e=>{let{open:t,chatflowid:a,isDialog:o}=e;const s=(0,g.Z)(),i=(0,r.v9)((e=>e.customization)),l=(0,n.useRef)(),[c,d]=(0,n.useState)(""),[m,f]=(0,n.useState)(!1),[x,v]=(0,n.useState)([{message:"Hi there! How can I help?",type:"apiMessage"}]),[j,b]=(0,n.useState)(""),[C,k]=(0,n.useState)(!1),[S,Z]=(0,n.useState)(!1),[D,I]=(0,n.useState)({}),[T,A]=(0,n.useState)(void 0),P=(0,n.useRef)(null),N=(0,U.Z)(Lt),R=(0,U.Z)(De.Z.getIsChatflowStreaming),M=(e,t)=>{I({data:e,title:t}),Z(!0)},E=()=>{l.current&&l.current.scrollTo({top:q.bs})},L=(0,n.useCallback)((e=>d(e.target.value)),[d]),O=e=>{v((t=>{let a=[...(0,u.cloneDeep)(t)];return"userMessage"===a[a.length-1].type||(a[a.length-1].message+=e),a}))},B=e=>{v((t=>{let a=[...(0,u.cloneDeep)(t)];return"userMessage"===a[a.length-1].type||(a[a.length-1].sourceDocuments=e),a}))},z=async e=>{if(e.preventDefault(),""!==c.trim()){f(!0),v((e=>[...e,{message:c,type:"userMessage"}]));try{const e={question:c,history:x.filter((e=>"Hi there! How can I help?"!==e.message)),chatId:T};C&&(e.socketIOClientId=j);const t=await Xt(a,e);if(t.data){const e=t.data;if(T||A(e.chatId),!C){let t="";t=e.text?e.text:e.json?"```json\n"+JSON.stringify(e.json,null,2):JSON.stringify(e,null,2),v((a=>[...a,{message:t,sourceDocuments:null===e||void 0===e?void 0:e.sourceDocuments,usedTools:null===e||void 0===e?void 0:e.usedTools,fileAnnotations:null===e||void 0===e?void 0:e.fileAnnotations,type:"apiMessage"}]))}(0,Qe.AS)(a,e.chatId,x),f(!1),d(""),setTimeout((()=>{var e;null===(e=P.current)||void 0===e||e.focus(),E()}),100)}}catch(t){return void function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Oops! There seems to be an error. Please try again.";e=e.replace("Unable to parse JSON response from chat agent.\n\n",""),v((t=>[...t,{message:e,type:"apiMessage"}])),f(!1),d(""),setTimeout((()=>{var e;null===(e=P.current)||void 0===e||e.focus()}),100)}(t.response.data||"".concat(t.response.status,": ").concat(t.response.statusText))}}};return(0,n.useEffect)((()=>{var e;if(null!==(e=N.data)&&void 0!==e&&e.length){var t;const e=null===(t=N.data[0])||void 0===t?void 0:t.chatId;A(e);const n=N.data.map((e=>{const t={message:e.content,type:e.role};return e.sourceDocuments&&(t.sourceDocuments=JSON.parse(e.sourceDocuments)),e.usedTools&&(t.usedTools=JSON.parse(e.usedTools)),e.fileAnnotations&&(t.fileAnnotations=JSON.parse(e.fileAnnotations)),t}));v((e=>[...e,...n])),(0,Qe.AS)(a,e,x)}}),[N.data]),(0,n.useEffect)((()=>{var e,t;R.data&&k(null!==(e=null===(t=R.data)||void 0===t?void 0:t.isStreaming)&&void 0!==e&&e)}),[R.data]),(0,n.useEffect)((()=>{E()}),[x]),(0,n.useEffect)((()=>{o&&P&&setTimeout((()=>{var e;null===(e=P.current)||void 0===e||e.focus()}),100)}),[o,P]),(0,n.useEffect)((()=>{let e;return t&&a&&(N.request(a),R.request(a),E(),e=(0,_t.ZP)(q.v2),e.on("connect",(()=>{b(e.id)})),e.on("start",(()=>{v((e=>[...e,{message:"",type:"apiMessage"}]))})),e.on("sourceDocuments",B),e.on("token",O)),()=>{d(""),f(!1),v([{message:"Hi there! How can I help?",type:"apiMessage"}]),e&&(e.disconnect(),b(""))}}),[t,a]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:o?"cloud-dialog":"cloud",children:(0,F.jsx)("div",{ref:l,className:"messagelist",children:x&&x.map(((e,t)=>(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)(p.Z,{sx:{background:"apiMessage"===e.type?s.palette.asyncSelect.main:""},style:{display:"flex"},className:"userMessage"===e.type&&m&&t===x.length-1?i.isDarkMode?"usermessagewaiting-dark":"usermessagewaiting-light":"usermessagewaiting"===e.type?"apimessage":"usermessage",children:["apiMessage"===e.type?(0,F.jsx)("img",{src:Ct,alt:"AI",width:"30",height:"30",className:"boticon"}):(0,F.jsx)("img",{src:kt,alt:"Me",width:"30",height:"30",className:"usericon"}),(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[e.usedTools&&(0,F.jsx)("div",{style:{display:"block",flexDirection:"row",width:"100%"},children:e.usedTools.map(((e,t)=>(0,F.jsx)(wt.Z,{size:"small",label:e.tool,component:"a",sx:{mr:1,mt:1},variant:"outlined",clickable:!0,onClick:()=>M(e,"Used Tools")},t)))}),(0,F.jsx)("div",{className:"markdownanswer",children:(0,F.jsx)(Dt,{remarkPlugins:[ft.Z,gt.Z],rehypePlugins:[pt.Z,mt.Z],components:{code(e){let{inline:t,className:n,children:s,...i}=e;const r=/language-(\w+)/.exec(n||"");return t?(0,F.jsx)("code",{className:n,...i,children:s}):(0,F.jsx)(Pt,{chatflowid:a,isDialog:o,language:r&&r[1]||"",value:String(s).replace(/\n$/,""),...i},Math.random())}},children:e.message})}),e.fileAnnotations&&(0,F.jsx)("div",{style:{display:"block",flexDirection:"row",width:"100%"},children:e.fileAnnotations.map(((e,t)=>(0,F.jsx)(h.Z,{sx:{fontSize:"0.85rem",textTransform:"none",mb:1},variant:"outlined",onClick:()=>(async e=>{try{const t=await yt().post("".concat(q.v2,"/api/v1/openai-assistants-file"),{fileName:e.fileName},{responseType:"blob"}),a=new Blob([t.data],{type:t.headers["content-type"]}),n=window.URL.createObjectURL(a),o=document.createElement("a");o.href=n,o.download=e.fileName,document.body.appendChild(o),o.click(),o.remove()}catch(t){console.error("Download failed:",t)}})(e),endIcon:(0,F.jsx)(K.DjJ,{color:s.palette.primary.main}),children:e.fileName},t)))}),e.sourceDocuments&&(0,F.jsx)("div",{style:{display:"block",flexDirection:"row",width:"100%"},children:(0,Qe.oY)(e).map(((e,t)=>{const a=e.metadata&&e.metadata.source?(0,Qe.K2)(e.metadata.source):void 0;return(0,F.jsx)(wt.Z,{size:"small",label:a?"/"===a.pathname.substring(0,15)?a.host:"".concat(a.pathname.substring(0,15),"..."):"".concat(e.pageContent.substring(0,15),"..."),component:"a",sx:{mr:1,mb:1},variant:"outlined",clickable:!0,onClick:()=>{return a?(t=e.metadata.source,void window.open(t,"_blank")):M(e);var t}},t)}))})]})]},t)})))})}),(0,F.jsx)(w.Z,{}),(0,F.jsx)("div",{className:"center",children:(0,F.jsx)("div",{style:{width:"100%"},children:(0,F.jsx)("form",{style:{width:"100%"},onSubmit:z,children:(0,F.jsx)(Ce.Z,{inputRef:P,autoFocus:!0,sx:{width:"100%"},disabled:m||!a,onKeyDown:e=>{const t=e.isComposing||229===e.keyCode;"Enter"===e.key&&c&&!t?!e.shiftKey&&c&&z(e):"Enter"===e.key&&e.preventDefault()},id:"userInput",name:"userInput",placeholder:m?"Waiting for response...":"Type your question...",value:c,onChange:L,multiline:!0,maxRows:o?7:2,endAdornment:(0,F.jsx)(Ut.Z,{position:"end",sx:{padding:"15px"},children:(0,F.jsx)(y.Z,{type:"submit",disabled:m||!a,edge:"end",children:m?(0,F.jsx)("div",{children:(0,F.jsx)(Vt.Z,{color:"inherit",size:20})}):(0,F.jsx)(K.h9l,{color:m||!a?"#9e9e9e":i.isDarkMode?"white":"#1e88e5"})})})})})})}),(0,F.jsx)(Mt,{show:S,dialogProps:D,onCancel:()=>Z(!1)})]})},$t=e=>{let{show:t,dialogProps:a,onClear:n,onCancel:o}=e;const s=document.getElementById("portal"),i=(0,r.v9)((e=>e.customization)),l=t?(0,F.jsxs)(I.Z,{open:t,fullWidth:!0,maxWidth:"md",onClose:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{overflow:"visible"},children:[(0,F.jsx)(T.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[a.title,(0,F.jsx)("div",{style:{flex:1}}),i.isDarkMode&&(0,F.jsx)(Se.S,{variant:"outlined",color:"error",title:"Clear Conversation",onClick:n,startIcon:(0,F.jsx)(K.W7f,{}),children:"Clear Chat"}),!i.isDarkMode&&(0,F.jsx)(h.Z,{variant:"outlined",color:"error",title:"Clear Conversation",onClick:n,startIcon:(0,F.jsx)(K.W7f,{}),children:"Clear Chat"})]})}),(0,F.jsx)(A.Z,{sx:{display:"flex",justifyContent:"flex-end",flexDirection:"column"},children:(0,F.jsx)(Qt,{isDialog:!0,open:a.open,chatflowid:a.chatflowid})})]}):null;return(0,D.createPortal)(l,s)},ea=e=>{let{chatflowid:t}=e;const a=(0,g.Z)(),{confirm:o}=(0,qt.Z)(),s=(0,r.I0)();(0,Ie.Z)();const i=function(){return s((0,d.yv)(...arguments))},l=function(){return s((0,d.sy)(...arguments))},[c,u]=(0,n.useState)(!1),[p,m]=(0,n.useState)(!1),[f,x]=(0,n.useState)({}),y=(0,n.useRef)(null),v=(0,n.useRef)(c),w=e=>{y.current&&y.current.contains(e.target)||u(!1)},j=async()=>{if(await o({title:"Clear Chat History",description:"Are you sure you want to clear all chat history?",confirmButtonName:"Clear",cancelButtonName:"Cancel"}))try{const e=localStorage.getItem("".concat(t,"_INTERNAL"));if(!e)return;const a=JSON.parse(e);await Bt(t,{chatId:a.chatId,chatType:"INTERNAL"}),localStorage.removeItem("".concat(t,"_INTERNAL")),(()=>{const e={...f,open:!1};x(e),setTimeout((()=>{const e={...f,open:!0};x(e)}),500)})(),i({message:"Succesfully cleared all chat history",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>l(e),children:(0,F.jsx)(K.kLi,{})})}})}catch(e){const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);i({message:t,options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>l(e),children:(0,F.jsx)(K.kLi,{})})}})}};return(0,n.useEffect)((()=>{!0===v.current&&!1===c&&y.current.focus(),v.current=c}),[c,t]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Kt,{sx:{position:"absolute",right:20,top:20},ref:y,size:"small",color:"secondary","aria-label":"chat",title:"Chat",onClick:()=>{u((e=>!e))},children:c?(0,F.jsx)(K.kLi,{}):(0,F.jsx)(K.fu1,{})}),c&&(0,F.jsx)(Kt,{sx:{position:"absolute",right:80,top:20},onClick:j,size:"small",color:"error","aria-label":"clear",title:"Clear Chat History",children:(0,F.jsx)(K.W7f,{})}),c&&(0,F.jsx)(Kt,{sx:{position:"absolute",right:140,top:20},onClick:()=>{x({open:!0,chatflowid:t}),m(!0)},size:"small",color:"primary","aria-label":"expand",title:"Expand Chat",children:(0,F.jsx)(K.ybr,{})}),(0,F.jsx)(ae.Z,{placement:"bottom-end",open:c,anchorEl:y.current,role:void 0,transition:!0,disablePortal:!0,popperOptions:{modifiers:[{name:"offset",options:{offset:[40,14]}}]},sx:{zIndex:1e3},children:e=>{let{TransitionProps:n}=e;return(0,F.jsx)(re.Z,{in:c,...n,children:(0,F.jsx)(N.Z,{children:(0,F.jsx)(ne.d,{onClickAway:w,children:(0,F.jsx)(C.Z,{border:!1,elevation:16,content:!1,boxShadow:!0,shadow:a.shadows[16],children:(0,F.jsx)(Qt,{chatflowid:t,open:c})})})})})}}),(0,F.jsx)($t,{show:p,dialogProps:f,onClear:j,onCancel:()=>m(!1)})]})};var ta=a(72795);const aa=(e,t)=>z.Z.post("/vector/internal-upsert/".concat(e),t);function na(e){const{children:t,value:a,index:n,...o}=e;return(0,F.jsx)("div",{role:"tabpanel",hidden:a!==n,id:"attachment-tabpanel-".concat(n),"aria-labelledby":"attachment-tab-".concat(n),...o,children:a===n&&(0,F.jsx)(p.Z,{sx:{p:1},children:t})})}function oa(e){return{id:"attachment-tab-".concat(e),"aria-controls":"attachment-tabpanel-".concat(e)}}const sa=e=>{let{show:t,dialogProps:a,onCancel:o}=e;const s=document.getElementById("portal"),{reactFlowInstance:i}=(0,n.useContext)(G.K),l=(0,r.I0)();(0,Ie.Z)();const c=function(){return l((0,d.yv)(...arguments))},u=function(){return l((0,d.sy)(...arguments))},m=(0,U.Z)(J),[f,g]=(0,n.useState)([]),[x,y]=(0,n.useState)(!1),[w,j]=(0,n.useState)({}),[b,C]=(0,n.useState)({}),[k,S]=(0,n.useState)({}),[Z,P]=(0,n.useState)(0),[N,R]=(0,n.useState)(""),[M,E]=(0,n.useState)({}),L=(e,t,n,o)=>"Python"===e?'import requests\n\nAPI_URL = "'.concat(q.v2,"/api/v1/vector/upsert/").concat(a.chatflowid,'"\n\ndef query(payload):\n    response = requests.post(API_URL, json=payload)\n    return response.json()\n\noutput = query({\n    ').concat(n?'"stopNodeId": "'.concat(t,'",\n    '):"",'"overrideConfig": {').concat((0,Qe.nJ)(o,"json",n,t),"\n    }\n})\n"):"JavaScript"===e?'async function query(data) {\n    const response = await fetch(\n        "'.concat(q.v2,"/api/v1/vector/upsert/").concat(a.chatflowid,'",\n        {\n            method: "POST",\n            headers: {\n                "Content-Type": "application/json"\n            },\n            body: JSON.stringify(data)\n        }\n    );\n    const result = await response.json();\n    return result;\n}\n\nquery({\n  ').concat(n?'"stopNodeId": "'.concat(t,'",\n  '):"",'"overrideConfig": {').concat((0,Qe.Ln)(o,"json",n,t),"\n  }\n}).then((response) => {\n    console.log(response);\n});\n"):"cURL"===e?"curl ".concat(q.v2,"/api/v1/vector/upsert/").concat(a.chatflowid," \\\n      -X POST \\\n      ").concat(n?'-d \'{"stopNodeId": "'.concat(t,'", "overrideConfig": {').concat((0,Qe.CJ)(o,"json",n,t),"}' \\"):'-d \'{"overrideConfig": {'.concat((0,Qe.CJ)(o,"json",n,t),"}' \\"),'\n      -H "Content-Type: application/json"'):"",O=(e,t,n,o)=>{if("Python"===e){let e=(o=(0,Qe.VN)(o))[0].type;return e.includes(",")&&(e=e.split(",")[0]),'import requests\n\nAPI_URL = "'.concat(q.v2,"/api/v1/vector/upsert/").concat(a.chatflowid,'"\n\n# use form data to upload files\nform_data = {\n    "files": ',"('example".concat(e,"', open('example").concat(e,"', 'rb'))"),"\n}\nbody_data = {").concat((0,Qe.nJ)(o,"formData",n,t),"}\n\ndef query(form_data, body_data):\n    response = requests.post(API_URL, files=form_data, data=body_data)\n    return response.json()\n\noutput = query(form_data, body_data)\n")}return"JavaScript"===e?"// use FormData to upload files\nlet formData = new FormData();\n".concat((0,Qe.Ln)(o,"formData",n,t),'\nasync function query(formData) {\n    const response = await fetch(\n        "').concat(q.v2,"/api/v1/vector/upsert/").concat(a.chatflowid,'",\n        {\n            method: "POST",\n            body: formData\n        }\n    );\n    const result = await response.json();\n    return result;\n}\n\nquery(formData).then((response) => {\n    console.log(response);\n});\n'):"cURL"===e?"curl ".concat(q.v2,"/api/v1/vector/upsert/").concat(a.chatflowid," \\\n     -X POST \\").concat((0,Qe.CJ)(o,"formData",n,t),' \\\n     -H "Content-Type: multipart/form-data"'):""},z=e=>"Python"===e?"python":"JavaScript"===e?"javascript":"cURL"===e?"bash":"python",H=e=>"Python"===e?We:"JavaScript"===e?Ke:"Embed"===e?EmbedSVG:"cURL"===e?Ge:"Share Chatbot"===e?ShareChatbotSVG:"Configuration"===e?settingsSVG:We,W=e=>{const t=[],a=Object.keys(e.data.inputs);for(let o=0;o<e.data.inputParams.length;o+=1){var n;if(a.includes(e.data.inputParams[o].name))t.push({label:e.data.inputParams[o].label,name:e.data.inputParams[o].name,type:e.data.inputParams[o].type,value:"file"===e.data.inputParams[o].type?(0,Qe.UO)(e.data.inputs[e.data.inputParams[o].name]):null!==(n=e.data.inputs[e.data.inputParams[o].name])&&void 0!==n?n:""})}return t};(0,n.useEffect)((()=>{if(m.data){var e,t;const a={...M};a[N]=((e,t)=>e.filter((e=>t.some((t=>e.nodeId===t.id)))))(m.data,null!==(e=null===(t=f.find((e=>e.vectorNode.data.id===N)))||void 0===t?void 0:t.nodes)&&void 0!==e?e:[]),E(a)}}),[m.data]),(0,n.useEffect)((()=>{if(a&&i){const e=i.getNodes(),t=i.getEdges();g((0,Qe.Fd)(e,t))}return()=>{g([]),y(!1),j({}),C({}),S({}),P(0),E({})}}),[a]),(0,n.useEffect)((()=>(l(t?{type:d.tS}:{type:d.Go}),()=>l({type:d.Go}))),[t,l]);const Y=t?(0,F.jsxs)(I.Z,{open:t,fullWidth:!0,maxWidth:"md",onClose:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{overflow:"visible"},children:[(0,F.jsx)(T.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:a.title}),(0,F.jsx)(A.Z,{sx:{display:"flex",justifyContent:"flex-end",flexDirection:"column"},children:(0,F.jsx)(ie(),{style:{height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden"},children:f.length>0&&f.map(((e,t)=>(0,F.jsxs)("div",{children:[e.nodes.length>0&&e.nodes.map(((e,t)=>{return(0,F.jsxs)(fe.Z,{expanded:b[e.data.id]||!1,onChange:(a=e.data.id,(e,t)=>{const n={...b};n[a]=t,C(n)}),disableGutters:!0,children:[(0,F.jsx)(ge.Z,{expandIcon:(0,F.jsx)(ve.Z,{}),"aria-controls":"nodes-accordian-".concat(e.data.name),id:"nodes-accordian-header-".concat(e.data.name),children:(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,F.jsx)("div",{style:{width:40,height:40,marginRight:10,borderRadius:"50%",backgroundColor:"white"},children:(0,F.jsx)("img",{style:{width:"100%",height:"100%",padding:7,borderRadius:"50%",objectFit:"contain"},alt:e.data.name,src:"".concat(q.v2,"/api/v1/node-icon/").concat(e.data.name)})}),(0,F.jsx)(v.Z,{variant:"h5",children:e.data.label}),(0,F.jsx)("div",{style:{display:"flex",flexDirection:"row",width:"max-content",borderRadius:15,background:"rgb(254,252,191)",padding:5,paddingLeft:10,paddingRight:10,marginLeft:10},children:(0,F.jsx)("span",{style:{color:"rgb(116,66,16)",fontSize:"0.825rem"},children:e.data.id})})]})}),(0,F.jsx)(xe.Z,{children:(0,F.jsx)(B,{sx:{minWidth:"max-content"},rows:W(e),columns:Object.keys(W(e)[0])})})]},t);var a})),(0,F.jsxs)(p.Z,{sx:{p:2},children:[(0,F.jsx)(Fe,{label:"Show API",value:k[e.vectorNode.data.id],onChange:()=>(e=>{var t,n;const o={...k};Object.keys(o).includes(e)?o[e]=!o[e]:o[e]=!0,!0===o[e]&&m.request(a.chatflowid),S(o),R(e);const s={...w};s[e]=!1,j(s);const i=null!==(t=null===(n=f.find((t=>t.vectorNode.data.id===e)))||void 0===n?void 0:n.nodes)&&void 0!==t?t:[];for(const a of i)if(a.data.inputParams.find((e=>"file"===e.type))){s[e]=!0,j(s);break}})(e.vectorNode.data.id)},JSON.stringify(k)),k[e.vectorNode.data.id]&&(0,F.jsx)("div",{children:(0,F.jsx)(pe.Z,{value:Z,onChange:(e,t)=>P(t),"aria-label":"tabs",children:["Python","JavaScript","cURL"].map(((e,t)=>(0,F.jsx)(me.Z,{icon:(0,F.jsx)("img",{style:{objectFit:"cover",height:15,width:"auto"},src:H(e),alt:"code"}),iconPosition:"start",label:e,...oa(t)},t)))})}),k[e.vectorNode.data.id]&&void 0!==w[e.vectorNode.data.id]&&M[e.vectorNode.data.id]&&M[e.vectorNode.data.id].length>0&&(0,F.jsx)(F.Fragment,{children:(0,F.jsx)("div",{style:{marginTop:10},children:["Python","JavaScript","cURL"].map(((t,a)=>(0,F.jsx)(na,{value:Z,index:a,children:(0,F.jsx)(ye.Z1,{theme:ye.FE,text:w[e.vectorNode.data.id]?O(t,e.vectorNode.data.id,f.length>1,M[e.vectorNode.data.id]):L(t,e.vectorNode.data.id,f.length>1,M[e.vectorNode.data.id]),language:z(t),showLineNumbers:!1,wrapLines:!0})},a)))})})]}),(0,F.jsxs)("div",{style:{marginBottom:"20px"},children:[x&&(0,F.jsx)(ta.E,{open:x}),!x&&(0,F.jsx)(h.Z,{sx:{color:"white"},fullWidth:!0,variant:"contained",color:"teal",title:"Upsert",onClick:()=>(async e=>{y(!0);try{await aa(a.chatflowid,{stopNodeId:e.data.id}),c({message:"Succesfully upserted vector store. You can start chatting now!",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>u(e),children:(0,F.jsx)(K.kLi,{})})}}),y(!1)}catch(t){const e=t.response.data||"".concat(t.response.status,": ").concat(t.response.statusText);c({message:e,options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>u(e),children:(0,F.jsx)(K.kLi,{})})}}),y(!1)}})(e.vectorNode),children:"Upsert"})]})]},t)))})})]}):null;return(0,D.createPortal)(Y,s)},ia=e=>{let{chatflowid:t}=e;const a=(0,r.I0)();(0,Ie.Z)();const o=function(){return a((0,d.yv)(...arguments))},s=function(){return a((0,d.sy)(...arguments))},[i,l]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1),[p,m]=(0,n.useState)({}),f=(0,n.useRef)(null),g=(0,n.useRef)(i);return(0,n.useEffect)((()=>{!0===g.current&&!1===i&&f.current.focus(),g.current=i}),[i,t]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Kt,{sx:{position:"absolute",right:80,top:20},ref:f,size:"small",color:"teal","aria-label":"upsert",title:"Upsert Vector Database",onClick:()=>{l((e=>!e));m({open:!0,title:"Upsert Vector Store",chatflowid:t}),u(!0)},children:i?(0,F.jsx)(K.kLi,{}):(0,F.jsx)(K.KPt,{})}),(0,F.jsx)(sa,{show:c,dialogProps:p,onUpsert:async()=>{try{await aa(t,{}),o({message:"Succesfully upserted vector store",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>s(e),children:(0,F.jsx)(K.kLi,{})})}})}catch(e){const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);o({message:t,options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>s(e),children:(0,F.jsx)(K.kLi,{})})}})}},onCancel:()=>{u(!1),l((e=>!e))}})]})},ra=()=>z.Z.get("/nodes"),la={customNode:V},ca={buttonedge:X},da=()=>{const e=(0,g.Z)(),t=(0,l.s0)(),{state:a}=(0,l.TH)(),x=a?a.templateFlowData:"",y=document.location.pathname.toString().split("/"),v="canvas"===y[y.length-1]?"":y[y.length-1],{confirm:w}=(0,qt.Z)(),j=(0,r.I0)(),b=(0,r.v9)((e=>e.canvas)),[C,k]=(0,n.useState)(b),[S,Z]=(0,n.useState)(null),{reactFlowInstance:D,setReactFlowInstance:I}=(0,n.useContext)(G.K);(0,Ie.Z)();const T=function(){return j((0,d.yv)(...arguments))},A=function(){return j((0,d.sy)(...arguments))},[P,N,R]=(0,o.Rr)(),[M,E,L]=(0,o.ll)(),[O,B]=(0,n.useState)(null),[z,J]=(0,n.useState)(!1),H=(0,n.useRef)(null),W=(0,U.Z)(ra),Y=(0,U.Z)(De.Z.createNewChatflow),_=(0,U.Z)(De.Z.testChatflow),V=(0,U.Z)(De.Z.updateChatflow),X=(0,U.Z)(De.Z.getSpecificChatflow),Q=e=>{try{const t=JSON.parse(e),a=t.nodes||[];N(a),E(t.edges||[]),oe()}catch(t){console.error(t)}},$=(0,n.useCallback)(((e,t)=>{B(t),N((e=>e.map((e=>(e.id===t.id?e.data={...e.data,selected:!0}:e.data={...e.data,selected:!1},e)))))})),ee=(0,n.useCallback)((e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"}),[]),te=(0,n.useCallback)((e=>{e.preventDefault();const t=H.current.getBoundingClientRect();let a=e.dataTransfer.getData("application/reactflow");if("undefined"===typeof a||!a)return;a=JSON.parse(a);const n=D.project({x:e.clientX-t.left-100,y:e.clientY-t.top-50}),o=(0,Qe.VZ)(a,D.getNodes()),s={id:o,position:n,type:"customNode",data:(0,Qe.qR)(a,o)};B(s),N((e=>e.concat(s).map((e=>(e.id===s.id?e.data={...e.data,selected:!0}:e.data={...e.data,selected:!1},e))))),setTimeout((()=>oe()),0)}),[D]),ae=()=>{j({type:d.cn}),T({message:"Chatflow saved",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>A(e),children:(0,F.jsx)(K.kLi,{})})}})},ne=e=>{T({message:e,options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>A(e),children:(0,F.jsx)(K.kLi,{})})}})},oe=()=>{j({type:d.K8})};return(0,n.useEffect)((()=>{if(X.data){const e=X.data,t=e.flowData?JSON.parse(e.flowData):[];N(t.nodes||[]),E(t.edges||[]),j({type:d.ch,chatflow:e})}else if(X.error){const e=X.error,t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);ne("Failed to retrieve chatflow: ".concat(t))}}),[X.data,X.error]),(0,n.useEffect)((()=>{if(Y.data){const e=Y.data;j({type:d.ch,chatflow:e}),ae(),window.history.replaceState(null,null,"/canvas/".concat(e.id))}else if(Y.error){const e=Y.error,t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);ne("Failed to save chatflow: ".concat(t))}}),[Y.data,Y.error]),(0,n.useEffect)((()=>{if(V.data)j({type:d.ch,chatflow:V.data}),ae();else if(V.error){const e=V.error,t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);ne("Failed to save chatflow: ".concat(t))}}),[V.data,V.error]),(0,n.useEffect)((()=>{_.error&&T({message:"Test chatflow failed",options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>A(e),children:(0,F.jsx)(K.kLi,{})})}})}),[_.error]),(0,n.useEffect)((()=>{if(Z(C.chatflow),C.chatflow){const e=C.chatflow.flowData?JSON.parse(C.chatflow.flowData):[];((e,t)=>{(0,Qe.Fd)(e,t).length?J(!0):J(!1)})(e.nodes||[],e.edges||[])}}),[C.chatflow]),(0,n.useEffect)((()=>(v?X.request(v):(localStorage.getItem("duplicatedFlowData")?(Q(localStorage.getItem("duplicatedFlowData")),setTimeout((()=>localStorage.removeItem("duplicatedFlowData")),0)):(N([]),E([])),j({type:d.ch,chatflow:{name:"Untitled chatflow"}})),W.request(),()=>{setTimeout((()=>j({type:d.cn})),0)})),[]),(0,n.useEffect)((()=>{k(b)}),[b]),(0,n.useEffect)((()=>{function e(e){const t=e.clipboardData.getData("text");t.includes('{"nodes":[')&&t.includes('],"edges":[')&&Q(t)}return window.addEventListener("paste",e),()=>{window.removeEventListener("paste",e)}}),[]),(0,n.useEffect)((()=>{x&&x.includes('"nodes":[')&&x.includes('],"edges":[')&&Q(x)}),[x]),c("You have unsaved changes! Do you want to navigate away?",C.isDirty),(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)(p.Z,{children:[(0,F.jsx)(m.Z,{enableColorOnDark:!0,position:"fixed",color:"inherit",elevation:1,sx:{bgcolor:e.palette.background.default},children:(0,F.jsx)(f.Z,{children:(0,F.jsx)(Ht,{chatflow:S,handleSaveFlow:e=>{if(D){const t=D.getNodes().map((e=>{const t=(0,u.cloneDeep)(e.data);return Object.prototype.hasOwnProperty.call(t.inputs,q.J6)&&(t.credential=t.inputs[q.J6],t.inputs=(0,u.omit)(t.inputs,[q.J6])),e.data={...t,selected:!1},e})),a=D.toObject();a.nodes=t;const n=JSON.stringify(a);if(S.id){const t={name:e,flowData:n};V.request(S.id,t)}else{const t={name:e,deployed:!1,isPublic:!1,flowData:n};Y.request(t)}}},handleDeleteFlow:async()=>{const e={title:"Delete",description:"Delete chatflow ".concat(S.name,"?"),confirmButtonName:"Delete",cancelButtonName:"Cancel"};if(await w(e))try{await De.Z.deleteChatflow(S.id),localStorage.removeItem("".concat(S.id,"_INTERNAL")),t(-1)}catch(a){const e=a.response.data||"".concat(a.response.status,": ").concat(a.response.statusText);T({message:e,options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,F.jsx)(h.Z,{style:{color:"white"},onClick:()=>A(e),children:(0,F.jsx)(K.kLi,{})})}})}},handleLoadFlow:Q})})}),(0,F.jsx)(p.Z,{sx:{pt:"70px",height:"100vh",width:"100%"},children:(0,F.jsx)("div",{className:"reactflow-parent-wrapper",children:(0,F.jsx)("div",{className:"reactflow-wrapper",ref:H,children:(0,F.jsxs)(o.x$,{nodes:P,edges:M,onNodesChange:R,onNodeClick:$,onEdgesChange:L,onDrop:te,onDragOver:ee,onNodeDragStop:oe,nodeTypes:la,edgeTypes:ca,onConnect:e=>{const t={...e,type:"buttonedge",id:"".concat(e.source,"-").concat(e.sourceHandle,"-").concat(e.target,"-").concat(e.targetHandle),data:{label:(0,Qe.Mw)(e.sourceHandle)}},a=e.targetHandle.split("-")[0],n=e.sourceHandle.split("-")[0],s=e.targetHandle.split("-")[2];N((e=>e.map((e=>{if(e.id===a){let t;setTimeout((()=>oe()),0);const a=e.data.inputAnchors.find((e=>e.name===s)),o=e.data.inputParams.find((e=>e.name===s));if(a&&a.list){const a=e.data.inputs[s]||[];"tools"===s?(0,Qe.kG)(a,n):a.push("{{".concat(n,".data.instance}}")),t=a}else t=o&&o.acceptVariable?e.data.inputs[s]||"":"{{".concat(n,".data.instance}}");e.data={...e.data,inputs:{...e.data.inputs,[s]:t}}}return e})))),E((e=>(0,o.Z_)(t,e)))},onInit:I,fitView:!0,deleteKeyCode:b.canvasDialogShow?null:["Backspace","Delete"],minZoom:.1,children:[(0,F.jsx)(s.Z,{style:{display:"flex",flexDirection:"row",left:"50%",transform:"translate(-50%, -50%)"}}),(0,F.jsx)(i.A,{color:"#aaa",gap:16}),(0,F.jsx)(Gt,{nodesData:W.data,node:O}),z&&(0,F.jsx)(ia,{chatflowid:v}),(0,F.jsx)(ea,{chatflowid:v})]})})})}),(0,F.jsx)(Yt.Z,{})]})})}}}]);
//# sourceMappingURL=2531.ad8c744f.chunk.js.map