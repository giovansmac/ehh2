"use strict";(self.webpackChunkflowise_ui=self.webpackChunkflowise_ui||[]).push([[2478],{76858:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(23917);const o={getAllChatflows:()=>n.Z.get("/chatflows"),getSpecificChatflow:e=>n.Z.get("/chatflows/".concat(e)),getSpecificChatflowFromPublicEndpoint:e=>n.Z.get("/public-chatflows/".concat(e)),createNewChatflow:e=>n.Z.post("/chatflows",e),updateChatflow:(e,t)=>n.Z.put("/chatflows/".concat(e),t),deleteChatflow:e=>n.Z.delete("/chatflows/".concat(e)),getIsChatflowStreaming:e=>n.Z.get("/chatflows-streaming/".concat(e))}},60990:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(30969);const o=e=>{const[t,a]=(0,n.useState)(null),[o,l]=(0,n.useState)(null),[r,i]=(0,n.useState)(!1);return{data:t,error:o,loading:r,request:async function(){i(!0);try{const t=await e(...arguments);a(t.data)}catch(t){l(t||"Unexpected Error!")}finally{i(!1)}}}}},52312:(e,t,a)=>{a.d(t,{S:()=>r});var n=a(45971),o=a(46138),l=a(17897);const r=(0,n.ZP)(o.Z)((e=>{let{theme:t,color:a="primary"}=e;return{color:"white",backgroundColor:t.palette[a].main,"&:hover":{backgroundColor:t.palette[a].main,backgroundImage:"linear-gradient(rgb(0 0 0/10%) 0 0)"}}}));(0,n.ZP)(l.Z)((e=>{let{theme:t,color:a="primary"}=e;return{"&.Mui-selected, &.Mui-selected:hover":{color:"white",backgroundColor:t.palette[a].main}}}))},54231:(e,t,a)=>{a.d(t,{Z:()=>p});var n=a(15749),o=a(30969),l=a(48886),r=a(38357),i=a(87130),s=a(47915),d=a(91862),c=a(52312),u=a(30530),h=a(37574);const p=e=>{let{show:t,dialogProps:a,onConfirm:p}=e;const g=document.getElementById("portal"),[m,x]=(0,o.useState)(""),[f,b]=(0,o.useState)(""),v=t?(0,h.jsxs)(l.Z,{onKeyUp:e=>{"Enter"===e.key&&p(m,f)},open:t,fullWidth:!0,maxWidth:"xs","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,h.jsx)(r.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:a.title}),(0,h.jsxs)(i.Z,{children:[(0,h.jsx)(s.Z,{children:"Username"}),(0,h.jsx)(u.I,{inputParam:{label:"Username",name:"username",type:"string",placeholder:"john doe"},onChange:e=>x(e),value:m,showDialog:!1}),(0,h.jsx)("div",{style:{marginTop:20}}),(0,h.jsx)(s.Z,{children:"Password"}),(0,h.jsx)(u.I,{inputParam:{label:"Password",name:"password",type:"password"},onChange:e=>b(e),value:f})]}),(0,h.jsx)(d.Z,{children:(0,h.jsx)(c.S,{variant:"contained",onClick:()=>p(m,f),children:a.confirmButtonName})})]}):null;return(0,n.createPortal)(v,g)}},84956:(e,t,a)=>{a.d(t,{x:()=>s});var n=a(45304),o=a.n(n),l=a(73835),r=(a(49015),a(61889),a(58457),a(44057),a(94702)),i=a(37574);const s=e=>{let{value:t,placeholder:a,disabled:n=!1,type:s,style:d,onValueChange:c,onMouseUp:u,onBlur:h}=e;const p=(0,r.Z)();return(0,i.jsx)(o(),{disabled:n,value:t,placeholder:a,highlight:e=>(0,l.highlight)(e,"json"===s?l.languages.json:l.languages.js),padding:10,onValueChange:c,onMouseUp:u,onBlur:h,tabSize:4,style:{...d,background:p.palette.codeEditor.main},textareaClassName:"editor__textarea"})}},94677:(e,t,a)=>{a.d(t,{d:()=>s});var n=a(45304),o=a.n(n),l=a(73835),r=(a(49015),a(61889),a(58457),a(44057),a(94702)),i=a(37574);const s=e=>{let{value:t,placeholder:a,disabled:n=!1,type:s,style:d,onValueChange:c,onMouseUp:u,onBlur:h}=e;const p=(0,r.Z)();return(0,i.jsx)(o(),{disabled:n,value:t,placeholder:a,highlight:e=>(0,l.highlight)(e,"json"===s?l.languages.json:l.languages.js),padding:10,onValueChange:c,onMouseUp:u,onBlur:h,tabSize:4,style:{...d,background:p.palette.card.main},textareaClassName:"editor__textarea"})}},30530:(e,t,a)=>{a.d(t,{I:()=>S});var n=a(30969),o=a(39494),l=a(33656),r=a(35531),i=a(15749),s=a(69405),d=a(48886),c=a(87130),u=a(47915),h=a(91862),p=a(46138),g=a(94702),m=a(42558),x=a.n(m),f=a(52312),b=a(84956),v=a(94677),j=a(2383),w=a(37574);const y=e=>{let{show:t,dialogProps:a,onCancel:o,onConfirm:l}=e;const r=document.getElementById("portal"),m=(0,g.Z)(),y=(0,s.I0)(),C=(0,s.v9)((e=>e.customization)),Z="json",[S,P]=(0,n.useState)(""),[k,I]=(0,n.useState)(null);(0,n.useEffect)((()=>(a.value&&P(a.value),a.inputParam&&I(a.inputParam),()=>{P(""),I(null)})),[a]),(0,n.useEffect)((()=>(y(t?{type:j.tS}:{type:j.Go}),()=>y({type:j.Go}))),[t,y]);const E=t?(0,w.jsxs)(d.Z,{open:t,fullWidth:!0,maxWidth:"md","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,w.jsx)(c.Z,{children:(0,w.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:k&&"string"===k.type&&(0,w.jsxs)("div",{style:{flex:70},children:[(0,w.jsx)(u.Z,{sx:{mb:2,ml:1},variant:"h4",children:k.label}),(0,w.jsx)(x(),{style:{border:"1px solid",borderColor:m.palette.grey[500],borderRadius:"12px",height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden",backgroundColor:"white"},children:C.isDarkMode?(0,w.jsx)(b.x,{disabled:a.disabled,value:S,onValueChange:e=>P(e),placeholder:k.placeholder,type:Z,style:{fontSize:"0.875rem",minHeight:"calc(100vh - 220px)",width:"100%"}}):(0,w.jsx)(v.d,{disabled:a.disabled,value:S,onValueChange:e=>P(e),placeholder:k.placeholder,type:Z,style:{fontSize:"0.875rem",minHeight:"calc(100vh - 220px)",width:"100%"}})})]})})}),(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(p.Z,{onClick:o,children:a.cancelButtonName}),(0,w.jsx)(f.S,{disabled:a.disabled,variant:"contained",onClick:()=>l(S,k.name),children:a.confirmButtonName})]})]}):null;return(0,i.createPortal)(E,r)};var C=a(75916),Z=a(86115);const S=e=>{var t,a;let{inputParam:i,value:s,nodes:d,edges:c,nodeId:u,onChange:h,disabled:p=!1,showDialog:g,dialogProps:m,onDialogCancel:x,onDialogConfirm:f}=e;const[b,v]=(0,n.useState)(null!==s&&void 0!==s?s:""),[j,S]=(0,n.useState)(null),[P,k]=(0,n.useState)([]),I=(0,n.useRef)(null),E=Boolean(j),N=()=>{S(null)};return(0,n.useEffect)((()=>{if(!p&&d&&c&&u&&i){const e=null!==i&&void 0!==i&&i.acceptVariable?(0,Z.Hg)(d,c,u,i.id):[];k(e)}}),[p,i,d,c,u]),(0,n.useEffect)((()=>{"string"===typeof b&&b&&b.endsWith("{{")&&S(I.current)}),[b]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(o.Z,{sx:{mt:1,width:"100%"},size:"small",children:(0,w.jsx)(l.Z,{id:i.name,size:"small",disabled:p,type:(e=>{switch(e){case"string":default:return"text";case"password":return"password";case"number":return"number"}})(i.type),placeholder:i.placeholder,multiline:!!i.rows,rows:null!==(t=i.rows)&&void 0!==t?t:1,value:b,name:i.name,onChange:e=>{v(e.target.value),h(e.target.value)},inputProps:{step:null!==(a=i.step)&&void 0!==a?a:1,style:{height:i.rows?"90px":"inherit"}}})}),g&&(0,w.jsx)(y,{show:g,dialogProps:m,onCancel:x,onConfirm:(e,t)=>{v(e),f(e,t)}}),(0,w.jsx)("div",{ref:I}),(null===i||void 0===i?void 0:i.acceptVariable)&&(0,w.jsx)(r.ZP,{open:E,anchorEl:j,onClose:N,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,w.jsx)(C.Z,{disabled:p,availableNodesForVariable:P,onSelectAndReturnVal:e=>{(e=>{const t=b+e.substring(2);h(t),v(t)})(e),N()}})})]})}},75916:(e,t,a)=>{a.d(t,{Z:()=>b});var n=a(69405),o=a(25139),l=a(47915),r=a(38361),i=a(67888),s=a(33485),d=a(54279),c=a(25599),u=a(86008),h=a(42558),p=a.n(h),g=a(47804);const m=a.p+"static/media/chathistory.c04a95d8006f2ac86a7d.png";var x=a(11021),f=a(37574);const b=e=>{let{availableNodesForVariable:t,disabled:a=!1,onSelectAndReturnVal:h}=e;const b=(0,n.v9)((e=>e.customization)),v=(e,t)=>{let a=e?"".concat(e.id,".data.instance"):t;const n="{{".concat(a,"}}");h(n)};return(0,f.jsx)(f.Fragment,{children:!a&&(0,f.jsxs)("div",{style:{flex:30},children:[(0,f.jsx)(o.Z,{flexDirection:"row",sx:{mb:1,ml:2,mt:2},children:(0,f.jsx)(l.Z,{variant:"h5",children:"Select Variable"})}),(0,f.jsx)(p(),{style:{height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden"},children:(0,f.jsx)(r.Z,{sx:{pl:2,pr:2},children:(0,f.jsxs)(i.Z,{children:[(0,f.jsx)(s.Z,{sx:{p:0,borderRadius:"".concat(b.borderRadius,"px"),boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)",mb:1},disabled:a,onClick:()=>v(null,"question"),children:(0,f.jsxs)(d.ZP,{alignItems:"center",children:[(0,f.jsx)(c.Z,{children:(0,f.jsx)("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white"},children:(0,f.jsx)("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:"AI",src:g})})}),(0,f.jsx)(u.Z,{sx:{ml:1},primary:"question",secondary:"User's question from chatbox"})]})}),(0,f.jsx)(s.Z,{sx:{p:0,borderRadius:"".concat(b.borderRadius,"px"),boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)",mb:1},disabled:a,onClick:()=>v(null,"chat_history"),children:(0,f.jsxs)(d.ZP,{alignItems:"center",children:[(0,f.jsx)(c.Z,{children:(0,f.jsx)("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white"},children:(0,f.jsx)("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:"chatHistory",src:m})})}),(0,f.jsx)(u.Z,{sx:{ml:1},primary:"chat_history",secondary:"Past conversation history between user and AI"})]})}),t&&t.length>0&&t.map(((e,t)=>{var n;const o=e.data.outputAnchors[0].options.find((t=>t.name===e.data.outputs.output));return(0,f.jsx)(s.Z,{sx:{p:0,borderRadius:"".concat(b.borderRadius,"px"),boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)",mb:1},disabled:a,onClick:()=>v(e),children:(0,f.jsxs)(d.ZP,{alignItems:"center",children:[(0,f.jsx)(c.Z,{children:(0,f.jsx)("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white"},children:(0,f.jsx)("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:e.data.name,src:"".concat(x.v2,"/api/v1/node-icon/").concat(e.data.name)})})}),(0,f.jsx)(u.Z,{sx:{ml:1},primary:e.data.inputs.chainName?e.data.inputs.chainName:e.data.id,secondary:"".concat(null!==(n=null===o||void 0===o?void 0:o.label)&&void 0!==n?n:"output"," from ").concat(e.data.label)})]})},t)}))]})})})]})})}},19448:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var n=a(30969),o=a(37574);function l(e,t,a,n){return new(a||(a=Promise))((function(o,l){function r(e){try{s(n.next(e))}catch(e){l(e)}}function i(e){try{s(n.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,i)}s((n=n.apply(e,t||[])).next())}))}const r=e=>{var{style:t,className:r}=e,i=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a}(e,["style","className"]);const s=(0,n.useRef)(null);return(0,n.useEffect)((()=>{l(void 0,void 0,void 0,(function*(){yield a.e(690).then(a.bind(a,20690))}))}),[]),(0,n.useEffect)((()=>{s.current&&Object.assign(s.current,i)}),[i]),(0,o.jsx)("flowise-fullchatbot",{ref:s,style:t,class:r})};var i=a(13026),s=a(54231),d=a(76858),c=a(60990),u=a(11021);const h=()=>{const e=document.location.pathname.toString().split("/"),t="chatbot"===e[e.length-1]?"":e[e.length-1],a=(0,i.s0)(),[l,h]=(0,n.useState)(null),[p,g]=(0,n.useState)({}),[m,x]=(0,n.useState)(!1),[f,b]=(0,n.useState)({}),[v,j]=(0,n.useState)(!0),[w,y]=(0,n.useState)({}),C=(0,c.Z)(d.Z.getSpecificChatflowFromPublicEndpoint),Z=(0,c.Z)(d.Z.getSpecificChatflow);return(0,n.useEffect)((()=>{C.request(t)}),[]),(0,n.useEffect)((()=>{var e,a;C.error&&(401===(null===(e=C.error)||void 0===e||null===(a=e.response)||void 0===a?void 0:a.status)&&(localStorage.getItem("username")&&localStorage.getItem("password")?Z.request(t):(b({title:"Login",confirmButtonName:"Login"}),x(!0))))}),[C.error]),(0,n.useEffect)((()=>{var e,t;Z.error&&(401===(null===(e=Z.error)||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&(b({title:"Login",confirmButtonName:"Login"}),x(!0)))}),[Z.error]),(0,n.useEffect)((()=>{if(C.data||Z.data){const t=C.data||Z.data;if(h(t),t.chatbotConfig)try{const e=JSON.parse(t.chatbotConfig);g(e),e.overrideConfig&&(e.overrideConfig.generateNewSession&&(e.overrideConfig.sessionId=Date.now().toString()),y(e.overrideConfig))}catch(e){console.error(e),g({}),y({})}}}),[C.data,Z.data]),(0,n.useEffect)((()=>{j(C.loading||Z.loading)}),[C.loading,Z.loading]),(0,o.jsx)(o.Fragment,{children:v?null:(0,o.jsxs)(o.Fragment,{children:[!l||l.apikeyid?(0,o.jsx)("p",{children:"Invalid Chatbot"}):(0,o.jsx)(r,{chatflowid:l.id,apiHost:u.v2,chatflowConfig:w,theme:{chatWindow:p}}),(0,o.jsx)(s.Z,{show:m,dialogProps:f,onConfirm:(e,t)=>{localStorage.setItem("username",e),localStorage.setItem("password",t),a(0)}})]})})}},47804:(e,t,a)=>{e.exports=a.p+"static/media/robot.3e38acc0493763eacabe.png"}}]);
//# sourceMappingURL=2478.4c75cd0c.chunk.js.map