"use strict";(self.webpackChunkflowise_ui=self.webpackChunkflowise_ui||[]).push([[8245],{74404:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(23917);const i={getAllTools:()=>o.Z.get("/tools"),getSpecificTool:e=>o.Z.get("/tools/".concat(e)),createNewTool:e=>o.Z.post("/tools",e),updateTool:(e,t)=>o.Z.put("/tools/".concat(e),t),deleteTool:e=>o.Z.delete("/tools/".concat(e))}},27341:(e,t,n)=>{n.d(t,{Z:()=>h});var o=n(15749),i=n(69405),a=n(30969),s=n(48886),l=n(87130),r=n(42558),d=n.n(r),c=n(50728),u=n(2383),p=n(37574);const h=e=>{let{show:t,dialogProps:n,onCancel:r}=e;const h=document.getElementById("portal"),m=(0,i.I0)(),[x,y]=(0,a.useState)([]),[g,f]=(0,a.useState)({});(0,a.useEffect)((()=>(n.inputParams&&y(n.inputParams),n.data&&f(n.data),()=>{y([]),f({})})),[n]),(0,a.useEffect)((()=>(m(t?{type:u.tS}:{type:u.Go}),()=>m({type:u.Go}))),[t,m]);const v=t?(0,p.jsx)(s.Z,{onClose:r,open:t,fullWidth:!0,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,p.jsx)(l.Z,{children:(0,p.jsx)(d(),{style:{height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden"},children:x.map(((e,t)=>(0,p.jsx)(c.Z,{disabled:n.disabled,inputParam:e,data:g,isAdditionalParams:!0},t)))})})}):null;return(0,o.createPortal)(v,h)}},50728:(e,t,n)=>{n.d(t,{Z:()=>J});var o=n(48428),i=n(30969),a=n(69405),s=n(45971),l=n(94702),r=n(6779),d=n(38361),c=n(47915),u=n(91243),p=n(46138),h=n(2295),m=n(49009),x=n(34061),y=n(95550),g=n(7276),f=n(30530),v=n(44850),j=n(40894),w=n(10814),b=n(50576),T=n(86115),Z=n(37574);const C=e=>{var t;let{columns:n,rows:o,style:a,disabled:s=!1,hideFooter:l=!1,onChange:r}=e;const[d,c]=(0,i.useState)(null!==(t=(0,T.RO)(o))&&void 0!==t?t:[]),u=(0,i.useCallback)((e=>()=>{let t=[];c((n=>{let o=[...(0,b.cloneDeep)(n)];return o=o.filter((t=>t.id!==e)),t=o,o})),r(JSON.stringify(t))}),[]),h=(e=>[...e,{field:"actions",type:"actions",width:80,getActions:e=>[(0,Z.jsx)(v.u,{icon:(0,Z.jsx)(w.Z,{}),label:"Delete",onClick:u(e.id)},"Delete")]}])(n),x=()=>{const e={};for(let n=0;n<h.length;n+=1){var t;e[null===(t=h[n])||void 0===t?void 0:t.field]=""}return e};return(0,Z.jsxs)(Z.Fragment,{children:[d&&h&&(0,Z.jsx)("div",{style:{marginTop:10,height:210,width:"100%",...a},children:(0,Z.jsx)(j._$,{processRowUpdate:e=>{let t=[];return c((n=>{let o=[...(0,b.cloneDeep)(n)];const i=o.findIndex((t=>t.id===e.id));return i>=0&&(o[i]={...e}),t=o,o})),r(JSON.stringify(t)),e},isCellEditable:()=>!s,hideFooter:l,onProcessRowUpdateError:e=>console.error(e),rows:d,columns:h})}),!s&&(0,Z.jsx)(p.Z,{sx:{mt:1},variant:"outlined",onClick:()=>{c((e=>{let t=[...(0,b.cloneDeep)(e)];const n=t.length?t[t.length-1].id+1:1;return t.push({...x(),id:n}),t}))},startIcon:(0,Z.jsx)(m.SC9,{}),children:"Add Item"})]})};var S=n(10571),D=n(83795),E=n(99177),k=n(30306),P=n(97251),N=n(668),A=n(48588),I=n(15749),L=n(48886),M=n(38357),R=n(87130),F=n(42558),O=n.n(F),H=n(2383);const B=e=>{let{show:t,dialogProps:n,onChange:o,onCancel:s}=e;const l=document.getElementById("portal"),r=(0,a.v9)((e=>e.customization)),d=(0,a.I0)();(0,i.useEffect)((()=>(d(t?{type:H.tS}:{type:H.Go}),()=>d({type:H.Go}))),[t,d]);const c=t?(0,Z.jsxs)(L.Z,{onClose:s,open:t,fullWidth:!0,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,Z.jsx)(M.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:"Format Prompt Values"}),(0,Z.jsx)(R.Z,{children:(0,Z.jsx)(O(),{style:{height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden"},children:(0,Z.jsx)(k._,{onChange:e=>o(e),value:n.value,isDarkMode:r.isDarkMode,inputParam:n.inputParam,nodes:n.nodes,edges:n.edges,nodeId:n.nodeId})})})]}):null;return(0,I.createPortal)(c,l)};var V=n(76387),W=n(11021);const z=["selectedTool","selectedAssistant"],G=(0,s.ZP)((e=>{let{className:t,...n}=e;return(0,Z.jsx)(r.Z,{...n,classes:{popper:t}})}))({["& .".concat(h.Z.tooltip)]:{maxWidth:500}}),J=e=>{var t,n,s,r,h,v,j,w,b,I,L,M,R,F,O,H;let{inputAnchor:J,inputParam:U,data:_,disabled:q=!1,isAdditionalParams:$=!1}=e;const Y=(0,l.Z)(),K=(0,a.v9)((e=>e.customization)),X=(0,i.useRef)(null),{reactFlowInstance:Q}=(0,i.useContext)(E.K),ee=(0,o.Bn)(),[te,ne]=(0,i.useState)(0),[oe,ie]=(0,i.useState)(!1),[ae,se]=(0,i.useState)({}),[le,re]=(0,i.useState)(""),[de,ce]=(0,i.useState)({}),[ue,pe]=(0,i.useState)(Date.now().toString()),[he,me]=(0,i.useState)(!1),[xe,ye]=(0,i.useState)({}),ge=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?(_.inputs[le]=e,pe(Date.now().toString())):_.inputs[le]="",ce({}),re("")};return(0,i.useEffect)((()=>{X.current&&X.current.offsetTop&&X.current.clientHeight&&(ne(X.current.offsetTop+X.current.clientHeight/2),ee(_.id))}),[_.id,X,ee]),(0,i.useEffect)((()=>{ee(_.id)}),[_.id,te,ee]),(0,Z.jsxs)("div",{ref:X,children:[J&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(G,{placement:"left",title:J.type,children:(0,Z.jsx)(o.HH,{type:"target",position:o.Ly.Left,id:J.id,isValidConnection:e=>(0,T.st)(e,Q),style:{height:10,width:10,backgroundColor:_.selected?Y.palette.primary.main:Y.palette.text.secondary,top:te}},J.id)}),(0,Z.jsx)(d.Z,{sx:{p:2},children:(0,Z.jsxs)(c.Z,{children:[J.label,!J.optional&&(0,Z.jsx)("span",{style:{color:"red"},children:"\xa0*"}),J.description&&(0,Z.jsx)(P.H,{style:{marginLeft:10},title:J.description})]})})]}),(U&&!U.additionalParams||$)&&(0,Z.jsxs)(Z.Fragment,{children:[U.acceptVariable&&(0,Z.jsx)(G,{placement:"left",title:U.type,children:(0,Z.jsx)(o.HH,{type:"target",position:o.Ly.Left,id:U.id,isValidConnection:e=>(0,T.st)(e,Q),style:{height:10,width:10,backgroundColor:_.selected?Y.palette.primary.main:Y.palette.text.secondary,top:te}},U.id)}),(0,Z.jsxs)(d.Z,{sx:{p:2},children:[(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,Z.jsxs)(c.Z,{children:[U.label,!U.optional&&(0,Z.jsx)("span",{style:{color:"red"},children:"\xa0*"}),U.description&&(0,Z.jsx)(P.H,{style:{marginLeft:10},title:U.description})]}),(0,Z.jsx)("div",{style:{flexGrow:1}}),"string"===U.type&&U.rows&&(0,Z.jsx)(u.Z,{size:"small",sx:{height:25,width:25},title:"Expand",color:"primary",onClick:()=>{var e,t;return((e,t)=>{se({value:e,inputParam:t,disabled:q,confirmButtonName:"Save",cancelButtonName:"Cancel"}),ie(!0)})(null!==(e=null!==(t=_.inputs[U.name])&&void 0!==t?t:U.default)&&void 0!==e?e:"",U)},children:(0,Z.jsx)(m.ybr,{})})]}),U.warning&&(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"row",borderRadius:10,background:"rgb(254,252,191)",padding:10,marginTop:10,marginBottom:10},children:[(0,Z.jsx)(m.DpU,{size:36,color:"orange"}),(0,Z.jsx)("span",{style:{color:"rgb(116,66,16)",marginLeft:10},children:U.warning})]}),"credential"===U.type&&(0,Z.jsx)(V.Z,{disabled:q,data:_,inputParam:U,onSelect:e=>{_.credential=e,_.inputs[W.J6]=e}}),"file"===U.type&&(0,Z.jsx)(S.$,{disabled:q,fileType:U.fileType||"*",onChange:e=>_.inputs[U.name]=e,value:null!==(t=null!==(n=_.inputs[U.name])&&void 0!==n?n:U.default)&&void 0!==t?t:"Choose a file to upload"}),"boolean"===U.type&&(0,Z.jsx)(D.D,{disabled:q,onChange:e=>_.inputs[U.name]=e,value:null!==(s=null!==(r=_.inputs[U.name])&&void 0!==r?r:U.default)&&void 0!==s&&s}),"datagrid"===U.type&&(0,Z.jsx)(C,{disabled:q,columns:U.datagrid,hideFooter:!0,rows:null!==(h=null!==(v=_.inputs[U.name])&&void 0!==v?v:JSON.stringify(U.default))&&void 0!==h?h:[],onChange:e=>_.inputs[U.name]=e}),("string"===U.type||"password"===U.type||"number"===U.type)&&(0,Z.jsx)(f.I,{disabled:q,inputParam:U,onChange:e=>_.inputs[U.name]=e,value:null!==(j=null!==(w=_.inputs[U.name])&&void 0!==w?w:U.default)&&void 0!==j?j:"",nodes:null!==U&&void 0!==U&&U.acceptVariable&&Q?Q.getNodes():[],edges:null!==U&&void 0!==U&&U.acceptVariable&&Q?Q.getEdges():[],nodeId:_.id,showDialog:oe,dialogProps:ae,onDialogCancel:()=>ie(!1),onDialogConfirm:(e,t)=>((e,t)=>{ie(!1),_.inputs[t]=e})(e,t)},_.inputs[U.name]),"json"===U.type&&(0,Z.jsxs)(Z.Fragment,{children:[!(null!==U&&void 0!==U&&U.acceptVariable)&&(0,Z.jsx)(k._,{disabled:q,onChange:e=>_.inputs[U.name]=e,value:null!==(b=null!==(I=_.inputs[U.name])&&void 0!==I?I:U.default)&&void 0!==b?b:"",isDarkMode:K.isDarkMode}),(null===U||void 0===U?void 0:U.acceptVariable)&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(p.Z,{sx:{borderRadius:25,width:"100%",mb:2,mt:2},variant:"outlined",onClick:()=>{var e;return((e,t)=>{let n=e;if("promptValues"===t.name&&!e){var o,i,a;const e={},t=(null!==(o=_.inputs.template)&&void 0!==o?o:"")+(null!==(i=_.inputs.systemMessagePrompt)&&void 0!==i?i:"")+(null!==(a=_.inputs.humanMessagePrompt)&&void 0!==a?a:""),s=(0,T.gj)(t);for(const n of s)e[n]="";Object.keys(e).length&&(n=JSON.stringify(e))}const s={value:n,inputParam:t,nodes:Q.getNodes(),edges:Q.getEdges(),nodeId:_.id};ye(s),me(!0)})(null!==(e=_.inputs[U.name])&&void 0!==e?e:"",U)},children:"Format Prompt Values"}),(0,Z.jsx)(B,{show:he,dialogProps:xe,onCancel:()=>me(!1),onChange:e=>_.inputs[U.name]=e})]})]}),"options"===U.type&&(0,Z.jsx)(x.L,{disabled:q,name:U.name,options:U.options,onSelect:e=>_.inputs[U.name]=e,value:null!==(L=null!==(M=_.inputs[U.name])&&void 0!==M?M:U.default)&&void 0!==L?L:"choose an option"}),"multiOptions"===U.type&&(0,Z.jsx)(y.j,{disabled:q,name:U.name,options:U.options,onSelect:e=>_.inputs[U.name]=e,value:null!==(R=null!==(F=_.inputs[U.name])&&void 0!==F?F:U.default)&&void 0!==R?R:"choose an option"}),"asyncOptions"===U.type&&(0,Z.jsxs)(Z.Fragment,{children:[1===_.inputParams.length&&(0,Z.jsx)("div",{style:{marginTop:10}}),(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,Z.jsx)(g.O,{disabled:q,name:U.name,nodeData:_,value:null!==(O=null!==(H=_.inputs[U.name])&&void 0!==H?H:U.default)&&void 0!==O?O:"choose an option",isCreateNewOption:z.includes(U.name),onSelect:e=>_.inputs[U.name]=e,onCreateNew:()=>{return"selectedTool"===(e=U.name)?ce({title:"Add New Tool",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add"}):"selectedAssistant"===e&&ce({title:"Add New Assistant",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add"}),void re(e);var e}}),z.includes(U.name)&&_.inputs[U.name]&&(0,Z.jsx)(u.Z,{title:"Edit",color:"primary",size:"small",onClick:()=>{return e=U.name,t=_.inputs[U.name],"selectedTool"===e?ce({title:"Edit Tool",type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",toolId:t}):"selectedAssistant"===e&&ce({title:"Edit Assistant",type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",assistantId:t}),void re(e);var e,t},children:(0,Z.jsx)(m.yl5,{})})]},ue)]})]})]}),(0,Z.jsx)(N.Z,{show:"selectedTool"===le,dialogProps:de,onCancel:()=>re(""),onConfirm:ge}),(0,Z.jsx)(A.Z,{show:"selectedAssistant"===le,dialogProps:de,onCancel:()=>re(""),onConfirm:ge})]})}},22526:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(48428),i=n(30969),a=n(45971),s=n(94702),l=n(6779),r=n(38361),d=n(47915),c=n(2295),u=n(99177),p=n(86115),h=n(34061),m=n(37574);const x=(0,a.ZP)((e=>{let{className:t,...n}=e;return(0,m.jsx)(l.Z,{...n,classes:{popper:t}})}))({["& .".concat(c.Z.tooltip)]:{maxWidth:500}}),y=e=>{var t,n,a,l,c,y;let{outputAnchor:g,data:f,disabled:v=!1}=e;const j=(0,s.Z)(),w=(0,i.useRef)(null),b=(0,o.Bn)(),[T,Z]=(0,i.useState)(0),[C,S]=(0,i.useState)(null),{reactFlowInstance:D}=(0,i.useContext)(u.K);return(0,i.useEffect)((()=>{var e,t;w.current&&null!==(e=w.current)&&void 0!==e&&e.offsetTop&&null!==(t=w.current)&&void 0!==t&&t.clientHeight&&setTimeout((()=>{var e,t;Z((null===(e=w.current)||void 0===e?void 0:e.offsetTop)+(null===(t=w.current)||void 0===t?void 0:t.clientHeight)/2),b(f.id)}),0)}),[f.id,w,b]),(0,i.useEffect)((()=>{setTimeout((()=>{b(f.id)}),0)}),[f.id,T,b]),(0,i.useEffect)((()=>{C&&setTimeout((()=>{b(f.id)}),0)}),[f.id,C,b]),(0,m.jsxs)("div",{ref:w,children:["options"!==g.type&&!g.options&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(x,{placement:"right",title:g.type,children:(0,m.jsx)(o.HH,{type:"source",position:o.Ly.Right,id:g.id,isValidConnection:e=>(0,p.st)(e,D),style:{height:10,width:10,backgroundColor:f.selected?j.palette.primary.main:j.palette.text.secondary,top:T}},g.id)}),(0,m.jsx)(r.Z,{sx:{p:2,textAlign:"end"},children:(0,m.jsx)(d.Z,{children:g.label})})]}),"options"===g.type&&g.options&&g.options.length>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(x,{placement:"right",title:null!==(t=null===(n=g.options.find((e=>{var t;return e.name===(null===(t=f.outputs)||void 0===t?void 0:t[g.name])})))||void 0===n?void 0:n.type)&&void 0!==t?t:g.type,children:(0,m.jsx)(o.HH,{type:"source",position:o.Ly.Right,id:null!==(a=null===(l=g.options.find((e=>{var t;return e.name===(null===(t=f.outputs)||void 0===t?void 0:t[g.name])})))||void 0===l?void 0:l.id)&&void 0!==a?a:"",isValidConnection:e=>(0,p.st)(e,D),style:{height:10,width:10,backgroundColor:f.selected?j.palette.primary.main:j.palette.text.secondary,top:T}})}),(0,m.jsx)(r.Z,{sx:{p:2,textAlign:"end"},children:(0,m.jsx)(h.L,{disabled:v,disableClearable:!0,name:g.name,options:g.options,onSelect:e=>{S(e),f.outputs[g.name]=e},value:null!==(c=null!==(y=f.outputs[g.name])&&void 0!==y?y:g.default)&&void 0!==c?c:"choose an option"})})]})]})}},668:(e,t,n)=>{n.d(t,{Z:()=>L});var o=n(15749),i=n(30969),a=n(69405),s=n(2383),l=n(50576),r=n(46138),d=n(48886),c=n(38357),u=n(87130),p=n(38361),h=n(25139),m=n(47915),x=n(33656),y=n(91862),g=n(52312),f=n(40894),v=n(49009),j=n(37574);const w=e=>{let{columns:t,rows:n,style:o,disabled:i=!1,onRowUpdate:a,addNewRow:s}=e;return(0,j.jsxs)(j.Fragment,{children:[!i&&(0,j.jsx)(r.Z,{variant:"outlined",onClick:s,startIcon:(0,j.jsx)(v.SC9,{}),children:"Add Item"}),n&&t&&(0,j.jsx)("div",{style:{marginTop:10,height:300,width:"100%",...o},children:(0,j.jsx)(f._$,{processRowUpdate:e=>(a(e),e),isCellEditable:()=>!i,onProcessRowUpdateError:e=>console.error(e),rows:n,columns:t})})]})};var b=n(97251),T=n(44850),Z=n(10814),C=n(48349),S=n(84956),D=n(94677),E=n(94702),k=n(74404),P=n(60806),N=n(60990),A=n(33926),I=n(86115);const L=e=>{let{show:t,dialogProps:n,onUseTemplate:f,onCancel:L,onConfirm:M}=e;const R=document.getElementById("portal"),F=(0,E.Z)(),O=(0,a.v9)((e=>e.customization)),H=(0,a.I0)();(0,A.Z)();const{confirm:B}=(0,P.Z)(),V=function(){return H((0,s.yv)(...arguments))},W=function(){return H((0,s.sy)(...arguments))},z=(0,N.Z)(k.Z.getSpecificTool),[G,J]=(0,i.useState)(""),[U,_]=(0,i.useState)(""),[q,$]=(0,i.useState)(""),[Y,K]=(0,i.useState)(""),[X,Q]=(0,i.useState)([]),[ee,te]=(0,i.useState)(""),ne=(0,i.useCallback)((e=>()=>{setTimeout((()=>{Q((t=>t.filter((t=>t.id!==e))))}))}),[]),oe=(0,i.useMemo)((()=>[{field:"property",headerName:"Property",editable:!0,flex:1},{field:"type",headerName:"Type",type:"singleSelect",valueOptions:["string","number","boolean","date"],editable:!0,width:120},{field:"description",headerName:"Description",editable:!0,flex:1},{field:"required",headerName:"Required",type:"boolean",editable:!0,width:80},{field:"actions",type:"actions",width:80,getActions:e=>[(0,j.jsx)(T.u,{icon:(0,j.jsx)(Z.Z,{}),label:"Delete",onClick:ne(e.id)},"Delete")]}]),[ne]);(0,i.useEffect)((()=>(H(t?{type:s.tS}:{type:s.Go}),()=>H({type:s.Go}))),[t,H]),(0,i.useEffect)((()=>{z.data&&(J(z.data.id),_(z.data.name),$(z.data.description),Q((0,I.RO)(z.data.schema)),z.data.func?te(z.data.func):te(""))}),[z.data]),(0,i.useEffect)((()=>{"EDIT"===n.type&&n.data?(J(n.data.id),_(n.data.name),$(n.data.description),K(n.data.iconSrc),Q((0,I.RO)(n.data.schema)),n.data.func?te(n.data.func):te("")):"EDIT"===n.type&&n.toolId?z.request(n.toolId):"IMPORT"===n.type&&n.data||"TEMPLATE"===n.type&&n.data?(_(n.data.name),$(n.data.description),K(n.data.iconSrc),Q((0,I.RO)(n.data.schema)),n.data.func?te(n.data.func):te("")):"ADD"===n.type&&(J(""),_(""),$(""),K(""),Q([]),te(""))}),[n]);const ie=t?(0,j.jsxs)(d.Z,{fullWidth:!0,maxWidth:"md",open:t,onClose:L,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,j.jsx)(c.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[n.title,(0,j.jsx)("div",{style:{flex:1}}),"EDIT"===n.type&&(0,j.jsx)(r.Z,{variant:"outlined",onClick:()=>(async()=>{try{const e=await k.Z.getSpecificTool(G);if(e.data){const t=e.data;delete t.id,delete t.createdDate,delete t.updatedDate;let n=JSON.stringify(t,null,2),o="data:application/json;charset=utf-8,"+encodeURIComponent(n),i="".concat(U,"-CustomTool.json"),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download",i),a.click()}}catch(e){const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);V({message:"Failed to export Tool: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,j.jsx)(r.Z,{style:{color:"white"},onClick:()=>W(e),children:(0,j.jsx)(v.kLi,{})})}}),L()}})(),startIcon:(0,j.jsx)(v.D57,{}),children:"Export"})]})}),(0,j.jsxs)(u.Z,{children:[(0,j.jsxs)(p.Z,{sx:{p:2},children:[(0,j.jsx)(h.Z,{sx:{position:"relative"},direction:"row",children:(0,j.jsxs)(m.Z,{variant:"overline",children:["Tool Name",(0,j.jsx)("span",{style:{color:"red"},children:"\xa0*"}),(0,j.jsx)(b.H,{style:{marginLeft:10},title:"Tool name must be small capital letter with underscore. Ex: my_tool"})]})}),(0,j.jsx)(x.Z,{id:"toolName",type:"string",fullWidth:!0,disabled:"TEMPLATE"===n.type,placeholder:"My New Tool",value:U,name:"toolName",onChange:e=>_(e.target.value)})]}),(0,j.jsxs)(p.Z,{sx:{p:2},children:[(0,j.jsx)(h.Z,{sx:{position:"relative"},direction:"row",children:(0,j.jsxs)(m.Z,{variant:"overline",children:["Tool description",(0,j.jsx)("span",{style:{color:"red"},children:"\xa0*"}),(0,j.jsx)(b.H,{style:{marginLeft:10},title:"Description of what the tool does. This is for ChatGPT to determine when to use this tool."})]})}),(0,j.jsx)(x.Z,{id:"toolDesc",type:"string",fullWidth:!0,disabled:"TEMPLATE"===n.type,placeholder:"Description of what the tool does. This is for ChatGPT to determine when to use this tool.",multiline:!0,rows:3,value:q,name:"toolDesc",onChange:e=>$(e.target.value)})]}),(0,j.jsxs)(p.Z,{sx:{p:2},children:[(0,j.jsx)(h.Z,{sx:{position:"relative"},direction:"row",children:(0,j.jsx)(m.Z,{variant:"overline",children:"Tool Icon Src"})}),(0,j.jsx)(x.Z,{id:"toolIcon",type:"string",fullWidth:!0,disabled:"TEMPLATE"===n.type,placeholder:"https://raw.githubusercontent.com/gilbarbara/logos/main/logos/airtable.svg",value:Y,name:"toolIcon",onChange:e=>K(e.target.value)})]}),(0,j.jsxs)(p.Z,{sx:{p:2},children:[(0,j.jsx)(h.Z,{sx:{position:"relative"},direction:"row",children:(0,j.jsxs)(m.Z,{variant:"overline",children:["Output Schema",(0,j.jsx)(b.H,{style:{marginLeft:10},title:"What should be the output response in JSON format?"})]})}),(0,j.jsx)(w,{columns:oe,rows:X,disabled:"TEMPLATE"===n.type,addNewRow:()=>{setTimeout((()=>{Q((e=>{let t=[...(0,l.cloneDeep)(e)];const n=t.length?t[t.length-1].id+1:1;return t.push({id:n,property:"",description:"",type:"",required:!1}),t}))}))},onRowUpdate:e=>{setTimeout((()=>{Q((t=>{let n=[...(0,l.cloneDeep)(t)];const o=n.findIndex((t=>t.id===e.id));return o>=0&&(n[o]={...e}),n}))}))}})]}),(0,j.jsxs)(p.Z,{sx:{p:2},children:[(0,j.jsx)(h.Z,{sx:{position:"relative"},direction:"row",children:(0,j.jsxs)(m.Z,{variant:"overline",children:["Javascript Function",(0,j.jsx)(b.H,{style:{marginLeft:10},title:'Function to execute when tool is being used. You can use properties specified in Output Schema as variables. For example, if the property is <code>userid</code>, you can use as <code>$userid</code>. Return value must be a string. You can also override the code from API by following this <a target="_blank" href="https://docs.flowiseai.com/tools/custom-tool#override-function-from-api">guide</a>'})]})}),"TEMPLATE"!==n.type&&(0,j.jsx)(r.Z,{style:{marginBottom:10},variant:"outlined",onClick:()=>te("/*\n* You can use any libraries imported in Flowise\n* You can use properties specified in Output Schema as variables. Ex: Property = userid, Variable = $userid\n* Must return a string value at the end of function\n*/\n\nconst fetch = require('node-fetch');\nconst url = 'https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&current_weather=true';\nconst options = {\n    method: 'GET',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n};\ntry {\n    const response = await fetch(url, options);\n    const text = await response.text();\n    return text;\n} catch (error) {\n    console.error(error);\n    return '';\n}"),children:"See Example"}),O.isDarkMode?(0,j.jsx)(S.x,{value:ee,disabled:"TEMPLATE"===n.type,onValueChange:e=>te(e),style:{fontSize:"0.875rem",minHeight:"calc(100vh - 220px)",width:"100%",borderRadius:5}}):(0,j.jsx)(D.d,{value:ee,disabled:"TEMPLATE"===n.type,onValueChange:e=>te(e),style:{fontSize:"0.875rem",minHeight:"calc(100vh - 220px)",width:"100%",border:"1px solid ".concat(F.palette.grey[300]),borderRadius:5}})]})]}),(0,j.jsxs)(y.Z,{children:["EDIT"===n.type&&(0,j.jsx)(g.S,{color:"error",variant:"contained",onClick:()=>(async()=>{const e={title:"Delete Tool",description:"Delete tool ".concat(U,"?"),confirmButtonName:"Delete",cancelButtonName:"Cancel"};if(await B(e))try{(await k.Z.deleteTool(G)).data&&(V({message:"Tool deleted",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,j.jsx)(r.Z,{style:{color:"white"},onClick:()=>W(e),children:(0,j.jsx)(v.kLi,{})})}}),M())}catch(t){const e=t.response.data||"".concat(t.response.status,": ").concat(t.response.statusText);V({message:"Failed to delete Tool: ".concat(e),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,j.jsx)(r.Z,{style:{color:"white"},onClick:()=>W(e),children:(0,j.jsx)(v.kLi,{})})}}),L()}})(),children:"Delete"}),"TEMPLATE"===n.type&&(0,j.jsx)(g.S,{color:"secondary",variant:"contained",onClick:()=>{f(n.data)},children:"Use Template"}),"TEMPLATE"!==n.type&&(0,j.jsx)(g.S,{disabled:!(U&&q),variant:"contained",onClick:()=>"ADD"===n.type||"IMPORT"===n.type?(async()=>{try{const e={name:U,description:q,color:(0,I.xl)(),schema:JSON.stringify(X),func:ee,iconSrc:Y},t=await k.Z.createNewTool(e);t.data&&(V({message:"New Tool added",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,j.jsx)(r.Z,{style:{color:"white"},onClick:()=>W(e),children:(0,j.jsx)(v.kLi,{})})}}),M(t.data.id))}catch(e){const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);V({message:"Failed to add new Tool: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,j.jsx)(r.Z,{style:{color:"white"},onClick:()=>W(e),children:(0,j.jsx)(v.kLi,{})})}}),L()}})():(async()=>{try{const e=await k.Z.updateTool(G,{name:U,description:q,schema:JSON.stringify(X),func:ee,iconSrc:Y});e.data&&(V({message:"Tool saved",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,j.jsx)(r.Z,{style:{color:"white"},onClick:()=>W(e),children:(0,j.jsx)(v.kLi,{})})}}),M(e.data.id))}catch(e){console.error(e);const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);V({message:"Failed to save Tool: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,j.jsx)(r.Z,{style:{color:"white"},onClick:()=>W(e),children:(0,j.jsx)(v.kLi,{})})}}),L()}})(),children:n.confirmButtonName})]}),(0,j.jsx)(C.Z,{})]}):null;return(0,o.createPortal)(ie,R)}},86420:()=>{}}]);
//# sourceMappingURL=8245.68d5b41f.chunk.js.map